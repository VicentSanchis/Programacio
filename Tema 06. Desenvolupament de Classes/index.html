
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Tema%2005.%20Programaci%C3%B3%20Modular/" rel="prev"/>
<link href="../Tema%2007.%20Entrada%2C%20eixida%20i%20gr%C3%A0fics/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.12" name="generator"/>
<title>06.- Desenvolupament de classes - PROGRAMACIÓ 1DAW</title>
<link href="../assets/stylesheets/main.7e359304.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheet/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.9/mermaid.neutral.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tema-6-desenvolupament-de-classes">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-header__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PROGRAMACIÓ 1DAW
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              06.- Desenvolupament de classes
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Canvia a mode fosc" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Canvia a mode fosc">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"></path></svg>
</label>
<input aria-label="Canvia a preferència del sistema" class="md-option" data-md-color-accent="white" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Canvia a preferència del sistema">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-nav__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    PROGRAMACIÓ 1DAW
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Índex
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2001.%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/">
<span class="md-ellipsis">
    01.- Introducció a la programació
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2002.%20El%20llenguatge%20Java/">
<span class="md-ellipsis">
    02.- El llenguatge Java
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2003.%20Programaci%C3%B3%20Orientada%20a%20Objectes/">
<span class="md-ellipsis">
    03.- Prog. Orientada a Objectes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2004.%20Estructures%20de%20Control/">
<span class="md-ellipsis">
    04.- Estructures de Control
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2005.%20Programaci%C3%B3%20Modular/">
<span class="md-ellipsis">
    05.- Programació modular
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    06.- Desenvolupament de classes
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    06.- Desenvolupament de classes
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
<span class="md-ellipsis">
      Introducció
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#radiografia-duna-classe-java">
<span class="md-ellipsis">
      Radiografia d'una classe Java
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definicio-de-classes-en-java">
<span class="md-ellipsis">
      Definició de classes en Java
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#propietats-i-metodes-de-les-classes">
<span class="md-ellipsis">
      Propietats i mètodes de les classes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#instancies">
<span class="md-ellipsis">
      Instàncies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#modificadors-de-visibilitat">
<span class="md-ellipsis">
      Modificadors de visibilitat
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metodes-i-atributs-estatics">
<span class="md-ellipsis">
      Mètodes i atributs estàtics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#herencia-de-classes">
<span class="md-ellipsis">
      Herència de classes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interficies">
<span class="md-ellipsis">
      Interfícies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conjunts-dobjectes-i-llibreries-de-classes">
<span class="md-ellipsis">
      Conjunts d'objectes i llibreries de classes
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2007.%20Entrada%2C%20eixida%20i%20gr%C3%A0fics/">
<span class="md-ellipsis">
    07.- Entrada, eixida i gràfics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2008.%20Col%C2%B7leccions/">
<span class="md-ellipsis">
    08.- Col·leccions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2009.%20Her%C3%A8ncia%2C%20polimorfisme%20i%20interf%C3%ADcies/">
<span class="md-ellipsis">
    09.- Herència, polimorfisme i interfícies
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2010.%20Bases%20de%20dades%20relacionals/">
<span class="md-ellipsis">
    10.- Bases de dades relacionals
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tema-6-desenvolupament-de-classes">Tema 6. Desenvolupament de classes</h1>
<div class="admonition danger">
<p class="admonition-title">Resultat d'aprenentatge associat</p>
<p><strong>RA4. Desenvolupa programes organitzats a classes analitzant i aplicant els principis de la programació orientada a objectes.</strong></p>
<h3 id="criteris-davaluacio">Criteris d'avaluació</h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.1. S'ha reconegut la sintaxi, estructura i components típics d'una classe.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.2. S'han definit classes.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.3. S'han definit propietats i mètodes.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.4. S'han creat constructors.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.5. S'han desenvolupat programes que instancien i utilitzin objectes de les classes creades anteriorment.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA4.6. S'han utilitzat mecanismes per controlar la visibilitat de les classes i dels seus membres.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.7. S'han definit i utilitzat classes heretades.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.8. S'han creat i utilitzat mètodes estàtics.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.9. S'han definit i utilitzat interfícies.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.10. S'han creat i utilitzat conjunts i llibreries de classes.</li>
</ul>
</div>
<h2 id="introduccio">Introducció</h2>
<p>Una vegada hem vista la sintaxi de Java, l'ús (instanciació) d'objectes i  com funcionen els mètodes, funcions, procediments, crides etc.. ja tenim tot el necessari per poder començar a desenvolupar les nostres pròpies classes a Java.</p>
<h2 id="radiografia-duna-classe-java">Radiografia d'una classe Java</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.1. S'ha reconegut la sintaxi, estructura i components típis d'una classe.</li>
</ul>
</div>
<p>Una <strong>classe és la definició d’un objecte</strong>, és l’element que descriu els components d’un objecte de forma general. Diem que hem creat un objecte quan donem valors i utilitzem els components definits a la classe. Dit d'una altra forma, una classe és el model o plantilla que defineix com seran els objectes que en derivem. És a dir, estableix què saben (atributs) i què poden fer (mètodes). Els objectes són, doncs, instàncies concretes d’una classe.</p>
<p>Per entendre la sintaxi i estructura d’una classe en Java (i també a Processing), convé distingir les seues parts principals:</p>
<ul>
<li><strong>Nom de la classe:</strong> s'escriu amb majúscula inicial per convenció.</li>
<li><strong>Atributs:</strong> variables que defineixen l'estat de la classe.</li>
<li><strong>Constructor (s):</strong> mètode especial que permet crear (instanciar) objectes inicialitzant atributs.</li>
<li><strong>Mètodes:</strong> accions que poden fer els objectes de la classe.</li>
<li><strong>Comentaris i documentació:</strong> és bona pràctica descriure què fa cada part de la classe.</li>
</ul>
<p>Veien un exemple genèric de com seria una classe en notació <strong>UML</strong></p>
<p><center>
<div class="mermaid">    classDiagram
    direction TB

    class Cotxe {
        - String color atribut1
        - int velocitat
        + Cotxe(String c, int v)
        + void arrancar()
        + void accelerar()
        + void frenar()
    }
        
</div>
</center></p>
<p>A l'esquema anterior hem definit una classe amb nom <strong>Cotxe</strong> que té dos <strong>atributs</strong>: color i velocitat; un <strong>constructor</strong>: Cotxe i tres <strong>mètodes</strong>: arrancar, accelerar i frenar.</p>
<p>Però estudiem un exemple més concret. Per tal de veure com és el desenvolupament de classes en programació orientada a objectes, quina és la seua sintaxi, estructura i components típics, el que farem serà un xicotet projecte amb un <strong>sistema de partícules</strong> en forma de volcà com mostra la imatge:</p>
<p><center>
<img alt="Sistema de partícules" src="../assets/Tema6/Volcano1.gif" style="border:1px solid #EEE;" width="50%"/>
</center></p>
<p>Un <strong>sistema de partícules</strong> és una tècnica de programació gràfica utilitzada per simular fenòmens formats per molts  elements petits i independents (anomenats partícules) que, en conjunt, generen un efecte visual complex.</p>
<p>Cada <strong>partícula</strong> és un objecte amb propietats pròpies (posició, velocitat, color, vida, etc.) que determinen <strong>l'estat</strong> de l'objecte i regles de funcionament general (com es mou, com es dissipa, com canvia al llarg del temps) que determinen el <strong>comportament</strong> de la classe.</p>
<p>Un <strong>sistema de partícules</strong> gestiona un conjunt d’aquestes partícules:</p>
<ul>
<li><strong>Creació:</strong> genera noves partícules segons unes condicions (per exemple, cada frame).</li>
<li><strong>Actualització:</strong> calcula l’estat de cada partícula (moure’s, canviar d’opacitat, reduir vida...).</li>
<li><strong>Dibuix:</strong> mostra totes les partícules a la pantalla.</li>
<li><strong>Eliminació:</strong> descarta les partícules que ja han “mort” o superat la seua vida útil.</li>
</ul>
<p>Els exemples més típics de sistemes de partícules són: foc, fum, nuvols, pluja, neu, focs d'artifici...</p>
<p>En definitiva un <strong>sistema de partícules</strong> és, doncs, un algorisme orientat a objectes que permet simular fenòmens complexos mitjançant la suma de molts elements simples, gestionats de manera conjunta però amb comportament individual.</p>
<p>Però abans de passar a la implementació del nostre sistema de partícules, unes quantes pinzellades breus de com es desenvolupa un projecte de programació orientada a objectes.</p>
<h3 id="realitzacio-de-programes-orientats-a-objectes">Realització de programes orientats a objectes</h3>
<p>A partir d’ara, quan hajam de resoldre un problema hem de començar a <strong>pensar d’una forma diferent</strong> a la que estàvem fent fins ara. En programació orientada a objectes seguirem usant els mecanismes de programació estructurada com ara sentències repetitives, alternatives, etc.. tanmateix hem de plantejar un sistema on les dades presenten una major importància.</p>
<p><strong>L’objectiu de l’orientació a objectes</strong> és plasmar la realitat de manera que programem els elements el més pròxim possible a com els veiem al seu entorn natural. Així, quan hajam d’encarar un problema d’aquest tipus:</p>
<ul>
<li>Ens preguntarem sobre aquells elements dels que realment es interessant emmagatzemar informació, és a dir, <strong>localitzarem els possibles objectes</strong> del nostre programa.</li>
<li>De cada element hem de conèixer quines són les seues <strong>característiques</strong> o quines són les característiques que el representen.</li>
<li>De cada element hem de conèixer les <strong>operacions a realitzar</strong>, accions que hi poden fer,  ja que cada conjunt de dades permetrà la realització d’un conjunt d’operacions.</li>
<li>Finalment, desenvoluparem un entorn on utilitzarem els elements configurats.</li>
</ul>
<details class="question">
<summary>Activitat 601. Dissenya la teua partícula</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">Enunciat</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Dissenya una classe partícula seguint les indicacions dels apunts i l'exemple anterior. </p>
<p><strong>Entregar:</strong> Document pdf que continga el disseny UML de la classe i una breu reflexió de les motivacions.</p>
</div>
</div>
</div>
</details>
<h2 id="definicio-de-classes-en-java">Definició de classes en Java</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.2. S'han definit classes</li>
</ul>
</div>
<p>Per poder definir una classe ens hem de basar en l'esquema general de classe vist a l'apartat <strong>Radiografia d'una classe en Java</strong> per poder construir-la i d'una altra banda, ens hem de fixar també en l'apartat de <strong>Realització de programes orientats a objectes</strong>. Com haviem dit, hem de localitzar primer quines són les característiques que representen l'objecte que es vol implementar així com les operacions o accions que hi pot realitzar.</p>
<p>Al sistema de particules la classe que pretenem modelar inicialment és la classe <strong>particula</strong>. Per tal de modelar des del punt de vista de la programació orientada a objectes i com varem a veure en apartats anteriors, consistiria en quedar-nos amb aquells detalls que siguen rellevants i desestimar els que no tenen importància. Des del meu punt de vista una particula tindria les següents característiques:</p>
<ul>
<li>Té dimensions.</li>
<li>Té una velocitat inicial.</li>
<li>Té color.</li>
<li>Està en una posició.</li>
<li>Va en una direcció.</li>
</ul>
<p>Respecte de les accions que una particula pot realitzar són:</p>
<ul>
<li>S'ha de mostrar per pantalla</li>
<li>Actualitza la seua posició en el temps, en altres paraules, es mou.</li>
<li>Li afecta la gravetat i les lleis de la física general.</li>
</ul>
<p>Una vegada hem fet aquest procés d'abstracció i hem decidit què es representarà al nostre sistema i què no, hem de dissenyar la nostra classe usant UML, concretament diagrama de classes:</p>
<p><center>
<div class="mermaid">    classDiagram
    direction TB

    class Particula {
        posicio;
        direccio;
        velocitat;
        grandaria;
        pinta;
        
        mostrar()
        actualitzar()
    }
        
</div>
</center></p>
<p>D'aquest disseny de la classe <strong>particula</strong> ja podem començar a picar el codi del nostre projecte, però abans algunes consideracions prèvies associades a l'entorn integrat de desenvolupament escollit (Processing IDE) i les seues particularitats.</p>
<p>L'anàlisi i el disseny formen part del procés de desenvolupament abans de començar a codificar. Una vegada tenim l'abstracció feta i el diagrama UML, passem a la fase d'implementació.</p>
<p>Tot projecte desenvolupat amb Processing IDE (igual que altres IDEs) necessita d'un punt d'entrada, fitxer principal o <strong>main</strong>. Aquest fitxer principal o main és el que conté els mètodes setup, draw, i tots els controladors d'esdeveniments i també serà el lloc des del qual es farà ús de les classes i objectes que formaran part del projecte. En altres paraules, el que hem estat fent fins ara amb les activitats realitzades en Processing IDE. Per últim i no menys important, és en aquest fitxer en el que s'executen totes les ordres de dibuix a l'sketch.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="w">    </span><span class="c1">// Variables globals</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="c1">// Configuració inicial de l'aplicació</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="c1">// Bucle de joc o mètode draw</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="c1">// Control d'esdeveniments</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">mouseClicked</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">keyPressed</span><span class="w">   </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">keyReleased</span><span class="w">  </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="c1">// Altres esdeveniments</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span>
</code></pre></div></td></tr></table></div>
<p>Aquest codi és el que conté el punt d'entrada principal a l'aplicació és el que donarà nom al projecte, per tant tindrà el mateix nom que la carpeta que el conté. Crea el teu projecte de particules i guarda'l amb el nom <strong>SistemaParticules</strong>.</p>
<p>Una vegada ja tenim el nostre projecte creat s'afegirien les classes necessàries. En el nostre cas tindrem una unica classe que es diu <strong>Particula</strong>. Aquesta acció resultarà en un nou fitxer dins del projecte que s'acaba de crear. Per tal de crear aquesta classe realitza les següents accions:</p>
<p><center>
<img src="../assets/Tema5/CrearClasse1.png" width="60%"/>
</center></p>
<p>Si es fa clic amb el ratolí el que es marca a la imatge anterior ens apareixeran les següents opcions: "Nova pestanya", "Reanomena", "Elimina", "Pestanya Anterior", "Pestanya següent" ... Hem d'escollir l'opció <strong>Nova Pestanya</strong> i al diàleg que apareixerà li posarem <strong>Particula.java</strong>, el nom de la classe que volem crear. El resultat final serà que el nostre editor del Processing IDE tindrà dues pestanyes: el main que hem anomenat SistemaParticules i la classe Particula.java. </p>
<p><center>
<img src="../assets/Tema5/CrearClasse2.png" width="60%"/>
</center></p>
<div class="admonition danger">
<p class="admonition-title">Compte amb l'extensió de la classe Partícula</p>
<p>Fixa't que el nom de la classe partícula té extensió java i no pde. Això és molt important.</p>
<p>Veiem-ho amb més detall. Processing IDE usa un tipus de classe que fa ús dels PApplets (o Applets de Processing IDE) per poder dibuixar per exemple amb les funcions de dibuix que ens ofereix l'API de Processing IDE. Per tant té un funcionament un poc peculiar i és per aquest motiu que no podrem posar atributs estàtics dins d'una classe com si podriem fer en altres entorns de desenvolupament. </p>
<p>El problema que tenim és que si la nostra classe Particula és .pde no podrem treballar amb mètodes i atributs estàtics sense convertir tota la classe en estàtica cosa no que no seria viable. Però si l'opció que escollim finalment és guardar la nostra particual com a "Particula.java" ens trobarem en que ja no podem usar mètodes de dibuix de Processing IDE. </p>
<p>Convertir la classe Particula.pde a Particula.java. Sí que podem posar atributs i mètodes estàtics però no poden fer ús de les funcionalitat de la llibreria de Processing IDE com les de dibuix, per tant el mètode mostrar ja no funcionaria.</p>
<p>Pareix ser que hem arribat a un carreró sense eixida, però encara ens queda una última opció que és passar-li l'sketch (PApplet) a la classe partícula quan ho necessitem.</p>
</div>
<p>A partir d'ara ja podem començar a escriure el codi de la nostra classe Particula basant-nos en les fases d'anàlisi i disseny anteriors. Però primer vegem quina és la sintaxi del llenguatge Java per a implementar classes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="w">    </span><span class="c1">// Imports a altres llibreries</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">NomClasse</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">        </span><span class="c1">// Atributs: característiques que defineixen l’estat de la classe</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">        </span><span class="c1">// Constructor: mètode que s'executa quan es crea un nou objecte de la classe</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">        </span><span class="c1">// Mètodes: accions que defineixen el comportament de la classe</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Al nostre cas la nostra classe inicial en Java podria ser la següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span>
<span class="normal"><a href="#__codelineno-2-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="w">    </span><span class="c1">// Aquestes llibreries seran necessàries per poder usar elements de la llibreria de Processing IDE</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PApplet</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PVector</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">        </span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 602. Crea un projecte en Processing IDE</summary>
<p>Crea un projecte amb Processing IDE com s'ha explicat en aquest apartat amb nom <strong>"SistemaParticules"</strong>. Aquest projecte ha de tindre dos fitxers: el principal o main de l'entorn de desenvolupament i un altre que contindrà la futura classe <strong>"Particula.java"</strong>  que havies dissenyat a l'activitat anterior. </p>
<p>Per tal de no repetir el mateix resultat del volcà que farem com a exemple el resultat que obtindreu serà una pluja. Les particules en el vostre cas seran gotes de pluja que cauen des des totes les posicions de l'eix y superior en diferents direccions, velocitats i tamanys.</p>
</details>
<h2 id="propietats-i-metodes-de-les-classes">Propietats i mètodes de les classes</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.3. S'han definit propietats i mètodes.</li>
</ul>
</div>
<p>Però com pot veure aquesta definició de classe és un poc pobra i falten encara moltes coses, concretament falten <strong>atributs</strong> i <strong>mètodes</strong>.</p>
<div class="admonition info">
<p class="admonition-title">Recordatori</p>
<p>Un <strong>atribut</strong> és una característica de l'entitat que es vol representar i <strong>determinen l'estat</strong> dels objectes de la classe.</p>
<p>Els <strong>metodes</strong> són els procediments o funcions que <strong>condicionen el comportament</strong> dels objectes de la classe.</p>
</div>
<h3 id="atributs">Atributs</h3>
<p>Els atributs en <strong>Programació Orientada a Objectes</strong> l'atribut d'una classe és (salvant les distàncies) en programació orientada a objectes com una variable en programació procedimental.  Per tant ja podem intuir que definir atributs a una classe en java és com declarar, en certa manera, una variable en programació estructurada clàssica. Recordeu que una varible en java es fa de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="w">    </span><span class="c1">// Declaració d'una variable en Java</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="c1">// tipusBase identificador [= valorInicial];</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0f</span><span class="p">;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Tornem al nostre sistema de particules. Segons el diagrama de classes de l'apartat anterior, la nostra particula tenia les següents característiques: posicio, direccio, velocitat, pinta, grandaria. Ara es tracta de convertir aquestes característiques en atributs de la classe <strong>Particula</strong> i com que hem dit que un atribut és molt semblant a la declaració d'una variable en programació procedimental, el que hem de fer primer és trobar-los un tipus de dades adequat a cada identificador. </p>
<p>Sembla prou evident que posició serà un PVector, direcció també (encara que aquest no siga tan evident), velocitat podria ser un float, pinta pot ser de tipus <strong>color</strong>, un tipus que ens proporciona l'API de Processing IDE i finalment grandaria pot ser un enter.</p>
<p>Una vegada decidits els tipus de dades que s'associaran a les propietats de la nostra classe ja podem començar a escriure el codi dels atributs de la classe <strong>Particula</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PApplet</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PVector</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span><span class="w">     </span><span class="c1">// Vector de posició de la partícula (on està)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span><span class="w">    </span><span class="c1">// Direcció en la que s'està movent la partícula (normalitzat)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span><span class="w">         </span><span class="c1">// Vector de velocitat</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">        </span><span class="kt">float</span><span class="w">   </span><span class="n">velocitat</span><span class="p">;</span><span class="w">   </span><span class="c1">// Velocitat escalar (magnitud) de la partícula</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">pinta</span><span class="p">;</span><span class="w">       </span><span class="c1">// Color amb que es pinta la partìcula (format ARGB 0xFFFFFFF)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span><span class="w">   </span><span class="c1">// Diametre de la partícula (al volcà seran cercles)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Full d'estils</p>
<p>Fixa't que en la declaració dels atributs i referent a l'estil en el que s'intentarà escriure codi en aquest curs, no hi ha sempre un sol espai entre tipus de dades i identificador sino que s'escriuen en dos columnes diferent.</p>
<p>Recorda que també encara que no estiguen, s'han de posar comentaris de documentació als atributs per tal que en cas de ésser necessari poder generar el manual de referència de la classe amb javadoc.</p>
</div>
<details class="question">
<summary>Activitat 603. Atributs de les partícules</summary>
<p>Igual que hem fet amb la partícula del nostre sistema (volcà). Has de definir els atributs o propietats de la classe partícula del teu sistema (pluja). Analitza detingudament que és el que esperes que passe amb el teu sistema pluja i quines han de ser les característiques que haurien de tindre les gotes (particules) de la pluja (sistema de partícules).</p>
<p>Recorda que has de posar comentaris de documentació als atributs. Pots aprofitar per explicar la justificació del perquè consideres importants els atributs o propietats que has escollit.</p>
</details>
<h3 id="els-constructors-de-classe">Els Constructors de classe</h3>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.4. S'han creat constructors</li>
</ul>
</div>
<p>Una vegada ja tenim definida a la nostra classe <strong>Particula</strong>, almenys els seus atributs o propietats, el que hem de fer és definir un dels mètodes principals de tota classe: <strong>el constructor de classe</strong>.</p>
<p>Un <strong>Constructor</strong> és un mètode o funció però amb una sèrie de característiques especials.</p>
<ol>
<li>No retorna res</li>
<li>Té exactament el mateix identificador que l'identificador de la classe</li>
<li>S'executa de forma automàtica en crear un nou objecte amb la paraula reservada <strong>new</strong></li>
</ol>
<p>Hi han dos tipus de constructors: el constructor per defecte i els constructors parametritzats. </p>
<p>Es poden escriure tants constructors com siga necessari però lo normal és crear un constructor per defecte sense paràmetres i un parametritzat.</p>
<p>En cas que el programador no definisca cap constructor al codi de la seua classe, és el compilador de java el que el genera automàticament.</p>
<p>A la nostra classe <strong>Particula</strong> el constructor quedaria de la següent manera:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PApplet</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PVector</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">        </span><span class="kt">float</span><span class="w">   </span><span class="n">velocitat</span><span class="p">;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">pinta</span><span class="p">;</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">        </span><span class="c1">// Constructor de la classe Particula (per defecte)</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">        </span><span class="n">Particula</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cap amunt.</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">pinta</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mh">0xFFFF0000</span><span class="p">;</span><span class="w">          </span><span class="c1">// Escrit en format ARGB (el primer parell de simbols és l'alpha)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">        </span><span class="c1">// Constructor parametritzat</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">        </span><span class="n">Particula</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">vel</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">gran</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">;</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gran</span><span class="p">;</span>
<a id="__codelineno-5-32" name="__codelineno-5-32"></a>
<a id="__codelineno-5-33" name="__codelineno-5-33"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 604. Constructor de partícules</summary>
<p>Igual que a l'exemple del sistema de partícules, crea dos constructors de la classe partícula del teu sistema de partícules pluja. Un serà el constructor per defecte (sense paràmetres) i l'altre seria el constructor parametritzat que inicialitza els valors del nostre objecte particula (de pluja).</p>
<p>Després declara dos objectes de la classe Particula al main del teu projecte, concretament a la secció de variables globals i al mètode setup fer que es cride als dos constructors que acabes d'implementar.</p>
</details>
<p>Una vegada tenim creats els constructors de la classe, cal recordar que un constructor de classe serveix per a crear <strong>instàncies</strong> d'eixa classe. Recordeu que un objecte al final és una instància d'una classe.</p>
<h2 id="instancies">Instàncies</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.5. S'han desenvolupat programes que instancien i utilitzin objectes de les classes creades anteriorment</li>
</ul>
</div>
<p>Encara que segurament ja ho hauràs fet per comprovar que els mètodes de les classes que has definit funcionen i també ho varem començar a utilitzar al tema 3 sobre programació orientada a objectes, ha arribat el moment <strong>d'instanciar</strong> objectes a partir de les classes dissenyades utilitzant els constructors de classe.</p>
<div class="admonition info">
<p class="admonition-title">Definició d'instanciar</p>
<p>Mecanisme mitjançat el qual el programador (usuari d'una llibreria de classes) pot crear objectes d'una classe concreta usant algun dels seus constructors. </p>
</div>
<p>Instanciar un objecte d'una classe (aka: crear un objecte a partir d'una classe) és relativament simple i molt semblant a quan declaravem variables amb els tipus bàsics de java. Per exemple, si voliem declarar una variable 'contador' de tipus entera ho feiem així:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">contador</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="n">contador</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>El procés per crear objectes a partir d'una classe (instanciar) és molt semblant però en lloc d'usar tipus bàsics utilitzem el nom de la classe. Mira l'exemple següent on declarem dos objectes p1 i p2 de la classe Particula i els instanciem amb els dos constructors a les línies següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="w">    </span><span class="c1">// Instància d'una particula p1 amb el constructor per defecte</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="w"> </span><span class="p">();</span><span class="w"> </span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="c1">// Instància d'una particula p1 amb el constructor parametritzat</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="p">);</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="n">PVector</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Però si et fixes bé p1 i p2 no són les úniques instàncies. Quantes creacions d'objectes (instàncies) i de quina classe són els objectes de l'exemple anterior?</p>
<ul>
<li><strong>p1</strong> objecte de la classe Particula.</li>
<li><strong>pos</strong> objecte de la classe PVector.</li>
<li><strong>dir</strong> objecte de la classe PVector.</li>
<li><strong>p2</strong> objecte de la classe Particula.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Identficadors significatius</p>
<p>Recorda que és molt important que tries bé els identificadors dels elements que formen part dels teus projectes, ja que ajuden a poder seguir i llegir millor el codi desenvolupat.</p>
</div>
<details class="question">
<summary>Activitat 605. Les gotes de pluja</summary>
<p>Al final al teu sistema de partícules de la pluja el que acabaràs instanciant són gotes de pluja. Crea almenys cinc gotes de pluja diferents entre elles utilitzant els constructors de la classe Particula. Encara que no es mostren de moment les parícules per pantalla, hauries d'aconseguir que foren diferents entre elles. Quan més automatizada tinques la diferència entre gotes millor.</p>
</details>
<h3 id="els-metodes">Els mètodes</h3>
<p>Abans d’implementar el comportament de les nostres partícules (com es mouen, com canvien de color o com desapareixen), hem d’aprendre com expressar aquestes accions mitjançant funcions i mètodes. Aquest apartat servirà per entendre la base sobre la qual construirem els comportaments del sistema de partícules.</p>
<p>Continuant amb les classes anteriors, caldria que ens férem les següents qüestions: 
1. Quines accions són les que pot realitzar el nostre piroclast? 
2. En que afecta eixes accions als atributs que hem escollit per definir-la?</p>
<p>Un <strong>mètode</strong> és una <strong>funció definida dins d'una classe</strong> que descriu una <strong>acció o comportament</strong> que poden realitzar els objectes d'aquella classe.</p>
<p>Els mètodes són els que determinen com interactua un objecte amb si mateix o amb altres objectes, és a dir, el seu comportament, i permeten modificar o consultar el seu estat (els seus atributs)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1">// Funció simple </span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">mostraEstat</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">"Soc una particula i estic viva"</span><span class="p">);</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">}</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="c1">// Funció amb paràmetres</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">sayMyName</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">strNom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">"Hola Món, soc la partícula "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strNom</span><span class="p">);</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="c1">// Funció que torna algun valor</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="n">String</span><span class="w"> </span><span class="nf">canviaNom</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">strNom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">strNom</span><span class="p">.</span><span class="na">reverse</span><span class="p">();</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 606. Mètodes a les classes</summary>
<p>Escriu un mètode que retorne l'identificador dels objectes. De la mateixa forma que als mètodes anteriors, afegirem un mètode a la classe Particula que salude i ens diga el nom de la següent forma: "Hola soc pluja$Particula@13e68b75"</p>
<p>El nom d'un objecte (o identificador) es pot obtindre cridant a:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
</code></pre></div></td></tr></table></div></p>
<p>Per comprovar si tot funciona correctament has de cridar al mètode diguesHola just després de crear els objectes al mètode setup del main.</p>
<p><strong>Reflexiona:</strong> Què ha de tornar aquest mètode? Quí s'ha d'encarregar de fer el println?</p>
</details>
<p>Continuant amb el nostre sistema de partícules del volcà podriem fer un mètode que s'encarregue de mostrar els objectes particula del sistema. Però al tractar-se d'un fitxer .java i no un .pde no podem fer ús d'algunes de les funcionalitats de l'API de Processing IDE com: fill, stroke, ellipse, circle etc.. és per tant necessari que la interfícies del nostre mètode mostrar tina un paràmetre de la classe PApplet.  Ja veurem després quin argument usarem quan cridem al mètode mostrar.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span>
<span class="normal"><a href="#__codelineno-10-29">29</a></span>
<span class="normal"><a href="#__codelineno-10-30">30</a></span>
<span class="normal"><a href="#__codelineno-10-31">31</a></span>
<span class="normal"><a href="#__codelineno-10-32">32</a></span>
<span class="normal"><a href="#__codelineno-10-33">33</a></span>
<span class="normal"><a href="#__codelineno-10-34">34</a></span>
<span class="normal"><a href="#__codelineno-10-35">35</a></span>
<span class="normal"><a href="#__codelineno-10-36">36</a></span>
<span class="normal"><a href="#__codelineno-10-37">37</a></span>
<span class="normal"><a href="#__codelineno-10-38">38</a></span>
<span class="normal"><a href="#__codelineno-10-39">39</a></span>
<span class="normal"><a href="#__codelineno-10-40">40</a></span>
<span class="normal"><a href="#__codelineno-10-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">        </span><span class="kt">float</span><span class="w">   </span><span class="n">velocitat</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">pinta</span><span class="p">;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">        </span><span class="c1">// Constructor de la classe Particula (per defecte)</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">        </span><span class="n">Particula</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span><span class="w"> </span><span class="c1">// Pots substituir el (20,20) per randoms</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cap amunt. </span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">pinta</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="err">#</span><span class="mh">0xF00</span><span class="p">;</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="w">        </span><span class="c1">// Constructor parametritzat</span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="w">        </span><span class="n">Particula</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">vel</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">gran</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-10-26" name="__codelineno-10-26"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">;</span>
<a id="__codelineno-10-27" name="__codelineno-10-27"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-10-28" name="__codelineno-10-28"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gran</span><span class="p">;</span>
<a id="__codelineno-10-29" name="__codelineno-10-29"></a>
<a id="__codelineno-10-30" name="__codelineno-10-30"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-10-31" name="__codelineno-10-31"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-10-32" name="__codelineno-10-32"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-10-33" name="__codelineno-10-33"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-10-34" name="__codelineno-10-34"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-35" name="__codelineno-10-35"></a>
<a id="__codelineno-10-36" name="__codelineno-10-36"></a><span class="w">        </span><span class="c1">// És necessari que el mètode mostrar tinga l'sketch on dibuixar-se com a paràmetre</span>
<a id="__codelineno-10-37" name="__codelineno-10-37"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostrar</span><span class="w"> </span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">app</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-38" name="__codelineno-10-38"></a><span class="w">            </span><span class="n">app</span><span class="p">.</span><span class="na">fill</span><span class="w"> </span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<a id="__codelineno-10-39" name="__codelineno-10-39"></a><span class="w">            </span><span class="n">app</span><span class="p">.</span><span class="na">circle</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="p">);</span>
<a id="__codelineno-10-40" name="__codelineno-10-40"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-41" name="__codelineno-10-41"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La forma d'usar aquest mètode de la classe partícula des del main i seguint amb el que hem estat fins ara al projecte del volcà, seria la següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c1">// Variables globals</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p1</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="c1">// Mètode setup</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="n">size</span><span class="w"> </span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">500</span><span class="p">);</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">    </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="w"> </span><span class="p">();</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="p">}</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">    </span><span class="n">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="n">p1</span><span class="p">.</span><span class="na">mostrar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w">   </span><span class="c1">// Al fitxer principal el PApplet és ell mateix (this) this seria l'sketch on dibuixar-se la partícula</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 607 Mètode mostrar de la classe partícula</summary>
<p>A la classe partícula crear un mètode mostrar que dibuixe segons les seues propietats: posicio, grandaria i color. Compte amb reutilitzar el codi de l'anterior sistema de partícules perquè mentre les particules del sistema volcà són cercles de color roig, les gotes de pluja quan cauen es podrien representar (dibuixar) d'una altra manera.</p>
<p>Utilitza aquest mètode mostrar fes que les cinc particules que has creat a l'activitat anterior es mostren per pantalla.</p>
</details>
<p>Com has pogut observar, les partícules que has creat no es mouen, estan estàtiques. Això és perquè no tenen implementat el <strong>mètode actualitzar</strong>. El nostre sistema de partícules està influenciat bàsicament per les lleis de la física, és a dir, bàsicament a les partícules del nostres sistema les afecta: la gravetat, la fricció amb l'aire, la direcció i la velocitat inicial i a cada frame haurà d'actualitzar la seua posició, però no patisques, et deixe ací la fórmula física necessària per actualitzar la posició de la partícula agafant els frames com a unitat de temps.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">gravetat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">);</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">vel</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">        </span><span class="n">friccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">        </span><span class="n">friccio</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">        </span><span class="n">friccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="mf">0.02</span><span class="p">);</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">        </span><span class="n">PVector</span><span class="w"> </span><span class="n">acceleracio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">        </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">gravetat</span><span class="p">);</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">        </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">friccio</span><span class="p">);</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">        </span><span class="n">vel</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">acceleracio</span><span class="p">);</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">        </span><span class="n">pos</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vel</span><span class="p">);</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 608. Mètode actualitzar de la classe partícula</summary>
<p>Al teu sistema de partícules de la pluja, implementa el mètode actualitzar en base a les lleis de la física com em fet a l'exemple anterior.</p>
<p><strong>Algunes idees:</strong> si imagines que l'aplicació que estàs creant és una finestra per la que veus la pluja caure has de tindre en compte el factor profunditat. No és igual una gota de pluja que cau prop de la finestra que la que cau lluny. </p>
<p>Qualsevol altra cosa que aportes a l'activitat i estiga degudament justificada també puntuarà.</p>
</details>
<h2 id="modificadors-de-visibilitat">Modificadors de visibilitat</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.6. S'han utilitzat mecanismes per controlar la visibilitat de les classes i dels seus membres.</li>
</ul>
</div>
<p>Un <strong>principi fonamental</strong> en la programació orientada a objectes  és l’ocultació de la informació, açò significa que no es pot accedir per mètodes externs de la classe a determinada informació interna. El mecanisme principal per aconseguir-ho és posar-los dins d’una classe i fer-los privats i així només es podrà accedir a aquests des de dins de la classe</p>
<p>Existeixen tres diferents especificacions d’accés o modificadors de visibilitat:</p>
<ul>
<li><strong>public (+):</strong> un mètode o atribut té una visibilitat pública quan totes les demès classes poden accedir a ells, bé siga una altra classe o una subclasse.</li>
<li><strong>Private (-):</strong> sols es pot accedir a ells des del propi codi de la classe.</li>
<li><strong>Protected (#):</strong> només des del propi codi de la classe o de les seues subclasses es pot accedir.</li>
<li><strong>Package (~):</strong> només accessible per membres del paquet.</li>
</ul>
<p><center>
<div class="mermaid">    classDiagram
    direction TB

    class Particula {
        - posicio;
        - direccio;
        - vel;
        - velocitat;
        - pinta;
        - grandaria;
        
        + Particula()
        + Particula(PVector pos, PVector dir, float vel, int gran)
        + mostrar()
        + actualitzar()
    }
        
</div>
</center></p>
<p>Aquest diagrama de classes UML s'implementaria de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span>
<span class="normal"><a href="#__codelineno-13-30">30</a></span>
<span class="normal"><a href="#__codelineno-13-31">31</a></span>
<span class="normal"><a href="#__codelineno-13-32">32</a></span>
<span class="normal"><a href="#__codelineno-13-33">33</a></span>
<span class="normal"><a href="#__codelineno-13-34">34</a></span>
<span class="normal"><a href="#__codelineno-13-35">35</a></span>
<span class="normal"><a href="#__codelineno-13-36">36</a></span>
<span class="normal"><a href="#__codelineno-13-37">37</a></span>
<span class="normal"><a href="#__codelineno-13-38">38</a></span>
<span class="normal"><a href="#__codelineno-13-39">39</a></span>
<span class="normal"><a href="#__codelineno-13-40">40</a></span>
<span class="normal"><a href="#__codelineno-13-41">41</a></span>
<span class="normal"><a href="#__codelineno-13-42">42</a></span>
<span class="normal"><a href="#__codelineno-13-43">43</a></span>
<span class="normal"><a href="#__codelineno-13-44">44</a></span>
<span class="normal"><a href="#__codelineno-13-45">45</a></span>
<span class="normal"><a href="#__codelineno-13-46">46</a></span>
<span class="normal"><a href="#__codelineno-13-47">47</a></span>
<span class="normal"><a href="#__codelineno-13-48">48</a></span>
<span class="normal"><a href="#__codelineno-13-49">49</a></span>
<span class="normal"><a href="#__codelineno-13-50">50</a></span>
<span class="normal"><a href="#__codelineno-13-51">51</a></span>
<span class="normal"><a href="#__codelineno-13-52">52</a></span>
<span class="normal"><a href="#__codelineno-13-53">53</a></span>
<span class="normal"><a href="#__codelineno-13-54">54</a></span>
<span class="normal"><a href="#__codelineno-13-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">velocitat</span><span class="p">;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">pinta</span><span class="p">;</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">        </span><span class="c1">// Constructor de la classe Particula (per defecte)</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Particula</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span><span class="w"> </span><span class="c1">// Pots substituir el (20,20) per randoms</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cap amunt. </span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">pinta</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">        </span><span class="c1">// Constructor parametritzat</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Particula</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">vel</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">gran</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">;</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-13-28" name="__codelineno-13-28"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gran</span><span class="p">;</span>
<a id="__codelineno-13-29" name="__codelineno-13-29"></a>
<a id="__codelineno-13-30" name="__codelineno-13-30"></a><span class="w">            </span><span class="c1">// Calculem la velocitat vectorial</span>
<a id="__codelineno-13-31" name="__codelineno-13-31"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-13-32" name="__codelineno-13-32"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-13-33" name="__codelineno-13-33"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<a id="__codelineno-13-34" name="__codelineno-13-34"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-13-35" name="__codelineno-13-35"></a>
<a id="__codelineno-13-36" name="__codelineno-13-36"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostrar</span><span class="w"> </span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">app</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-37" name="__codelineno-13-37"></a><span class="w">            </span><span class="n">app</span><span class="p">.</span><span class="na">fill</span><span class="w"> </span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<a id="__codelineno-13-38" name="__codelineno-13-38"></a><span class="w">            </span><span class="n">app</span><span class="p">.</span><span class="na">circle</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="p">);</span>
<a id="__codelineno-13-39" name="__codelineno-13-39"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-13-40" name="__codelineno-13-40"></a>
<a id="__codelineno-13-41" name="__codelineno-13-41"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-42" name="__codelineno-13-42"></a><span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">gravetat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">);</span>
<a id="__codelineno-13-43" name="__codelineno-13-43"></a><span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">vel</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-13-44" name="__codelineno-13-44"></a><span class="w">            </span><span class="n">friccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-45" name="__codelineno-13-45"></a><span class="w">            </span><span class="n">friccio</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-13-46" name="__codelineno-13-46"></a><span class="w">            </span><span class="n">friccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="mf">0.02</span><span class="p">);</span>
<a id="__codelineno-13-47" name="__codelineno-13-47"></a>
<a id="__codelineno-13-48" name="__codelineno-13-48"></a><span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">acceleracio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-13-49" name="__codelineno-13-49"></a><span class="w">            </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">gravetat</span><span class="p">);</span>
<a id="__codelineno-13-50" name="__codelineno-13-50"></a><span class="w">            </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">friccio</span><span class="p">);</span>
<a id="__codelineno-13-51" name="__codelineno-13-51"></a>
<a id="__codelineno-13-52" name="__codelineno-13-52"></a><span class="w">            </span><span class="n">vel</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">acceleracio</span><span class="p">);</span>
<a id="__codelineno-13-53" name="__codelineno-13-53"></a><span class="w">            </span><span class="n">pos</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vel</span><span class="p">);</span>
<a id="__codelineno-13-54" name="__codelineno-13-54"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-13-55" name="__codelineno-13-55"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition danger">
<p class="admonition-title">Quan usar private i quan public</p>
<p>Per norma els atributs solen tindre un modificador de visibilitat <strong>privat</strong> i tant els mètodes com les classes solen ser <strong>public</strong></p>
</div>
<details class="question">
<summary>Activitat 609. Modificadors de visibilitat</summary>
<p>Aplica la norma dels modificadors de visibilitat al teu projecte pluja i adapta les classes que ja tens implementades.</p>
</details>
<h3 id="get-i-sets">Get i Sets</h3>
<p>Com ja hauràs pogut advertir ara els atributs al ser privats no són accessibles des de fora. Per això estan els <strong>gets</strong> i <strong>sets</strong>
Avantatge fonamental l'assignació de valors als atributs està controlada pel programador i no per l'ususari evitant un munt de possibles problemes. </p>
<p>Imagina que l'atribut velocitat de la nostra partícula del sistema (float) és pública, això permetria a qualsevol usuari del nostre sistema de partìcules fer algo així:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="p">();</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="n">f</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>La qual cosa aparentment no estaria mal i funcionaria de forma correcta, però que passaria si l'ususari/programador del nostre sistema de partícules escrivira un codi com el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="p">();</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="n">f</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>El codi continuaria siguen correcte i no donaria errades de compilació però faria el nostre sistema de partícules insostenible i molt inestable. Per aquest tipus de casos serveixen per una banda els modificadors de visibilitat i els get i sets dels atributs.</p>
<p>Mira el següent codi:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">vel</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Particula</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0f</span><span class="p">;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">setVelocitat</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">"Error de configuració. Velocitat massa alta o negativa"</span><span class="p">);</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>D'aquesta forma ens assegurem que tot ususari de la nostra particula del sistema de particules no podrà assignar mai una velocitat superior a 15 ni inferior a 0 a els elements del sistema.</p>
<p>Els sets per contra, serveixen per tal que només aquells valors dels atributs que el programador desitje siguen accessibles des de fora de la classe.</p>
<details class="question">
<summary>Activitat 610. Gets i sets</summary>
<p>Per aquells atributs susceptibles de ser modificats per l'usuari de la classe, fer els gets i sets pertinents. Mínim hauràs d'afegir el mètode <strong>setColor</strong> que tindrà paràmetres: r, g i b de tipus enters i amb rang de valors entre 0 i 255. El mètode setColor s'haurà d'encarregar de traduir els tres números enters a un número hexadecimal amb format ARGB. Exemple: 0xFF33BBAA on les primeres dues F són les que indiquen opacitat total.</p>
</details>
<h2 id="metodes-i-atributs-estatics">Mètodes i atributs estàtics</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.8. S'han creat i utilitzat mètodes estàtics</li>
</ul>
</div>
<p>En el desenvolupament d’aplicacions orientades a objectes hi ha situacions en què determinades dades o comportaments no pertanyen a cap objecte concret, sinó que són comuns a tot el sistema. En aquests casos, Java permet definir atributs i mètodes estàtics, associats a la classe i no a les seues instàncies. Veurem tres exemples d'ús d'atributs i mètodes estàtics: un comptador global, un mètode factory i una classe estàtica.</p>
<h3 id="comptador-global-de-particules">Comptador global de partícules</h3>
<p>Un ús molt comú que se li sol donar als atributs estàtics són els <strong>comptadors globals</strong> o les <strong>Factory o granges</strong>. Si per exemple al nostre sistema de partícules vullgurem portar un comptador amb totes les partícules que ha expulsat el volcà, podriem usar un atribut estàtic. Esta vegada sí a la mateixa classe partícula. I hauriem de modificar els constructors per tal que incrementen aquesta mena de variable estàtica global cada vegada que es crea una partícula.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">totalParticules</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="c1">// Constructor de la classe Particula (per defecte)</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Particula</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="n">totalParticules</span><span class="w"> </span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getTotalParticules</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">totalParticules</span><span class="p">;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="p">}</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="c1">// Al fitxer main del projecte</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="n">println</span><span class="p">(</span><span class="n">Particula</span><span class="p">.</span><span class="na">getTotalParticules</span><span class="p">());</span>
</code></pre></div></td></tr></table></div>
<p>En el sistema de partícules desenvolupat en aquest tema, les lleis de la física que governen el moviment de les partícules (com la gravetat o la fricció de l’aire) no són una propietat individual de cada partícula, sinó que són compartides per totes elles. Per aquest motiu, aquestes lleis s’han encapsulat en una classe auxiliar anomenada Fisica2D, que fa ús exclusiu d’atributs i mètodes estàtics.</p>
<details class="question">
<summary>Activitat 611. Crea un atribut estàtic al sistema de partícules</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"/><input id="__tabbed_2_2" name="__tabbed_2" type="radio"/><div class="tabbed-labels"><label for="__tabbed_2_1">Enunciat</label><label for="__tabbed_2_2">Rúbrica</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>En aquesta activitat es tracta de crear un comptador global estàtic per a les gotes de pluja que es generen al nostre sistema de partícules. Però abans necessitarem fer algunes cosetes. 
- Crea un constructor de particules al qual se li passarà la regió en la que es vol que aparega la partícula.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="w">    </span><span class="c1">// Prototip</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ample</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">alt</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
- Crea un mètode aleatori que encapsule <strong>Math.random</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="w">    </span><span class="c1">// Prototip</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">aleatori</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Ítem d’avaluació</th>
<th>4 (Excel·lent)</th>
<th>3 (Adequat)</th>
<th>2 (Bàsic)</th>
<th>1 (Insuficient)</th>
<th>0 (No assolit)</th>
<th>Pes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Creació de l’atribut estàtic comptador</strong></td>
<td>L’atribut estàtic està ben definit, justificat i correctament declarat.</td>
<td>Correctament declarat però amb poca justificació.</td>
<td>Declarat amb algun error menor.</td>
<td>Mal declarat o mal utilitzat.</td>
<td>No existeix.</td>
<td><strong>20%</strong></td>
</tr>
<tr>
<td><strong>Actualització correcta del comptador</strong></td>
<td>El comptador s’incrementa automàticament en crear cada partícula.</td>
<td>S’incrementa però amb alguna limitació.</td>
<td>Increment parcial o manual.</td>
<td>Increment incorrecte.</td>
<td>No s’incrementa.</td>
<td><strong>15%</strong></td>
</tr>
<tr>
<td><strong>Constructor amb regió (<code>x, y, ample, alt</code>)</strong></td>
<td>Constructor ben definit que inicialitza correctament la posició dins la regió.</td>
<td>Funciona correctament amb algun detall menor.</td>
<td>Inicialització parcial.</td>
<td>Errors conceptuals clars.</td>
<td>No implementat.</td>
<td><strong>20%</strong></td>
</tr>
<tr>
<td><strong>Mètode <code>aleatori(int min, int max)</code></strong></td>
<td>Encapsula correctament <code>Math.random</code> i retorna valors coherents.</td>
<td>Funciona correctament però sense encapsulació clara.</td>
<td>Funciona amb errors puntuals.</td>
<td>Errors freqüents.</td>
<td>No implementat.</td>
<td><strong>20%</strong></td>
</tr>
<tr>
<td><strong>Ús del mètode aleatori dins del constructor</strong></td>
<td>El constructor utilitza el mètode aleatori de forma clara i reutilitzable.</td>
<td>Ús correcte però poc net.</td>
<td>Ús parcial.</td>
<td>Ús incorrecte.</td>
<td>No s’utilitza.</td>
<td><strong>15%</strong></td>
</tr>
<tr>
<td><strong>Documentació i comentaris</strong></td>
<td>Atribut estàtic, constructor i mètode estan ben documentats.</td>
<td>Documentació correcta però millorable.</td>
<td>Documentació mínima.</td>
<td>Documentació pobra.</td>
<td>Sense documentació.</td>
<td><strong>10%</strong></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</details>
<h3 id="metodes-estatics">Mètodes estàtics</h3>
<p>De la mateixa manera que es poden crear atributs estàtics també hi podem crear mètodes estàtics. Per il·lustrar-ho  veurem un tipus de mètode anomenat <strong>Factory Method</strong> o també <strong>Factory Pattern</strong> que es un patró de disseny creacional que: encapsula la creació d'objectes, evita usar new directament des de fora i permet centralitzar la lògica de construcció.</p>
<p>En el nostre cas del sistema de partícules, aquest patró s’implementa mitjançant mètodes estàtics dins de la pròpia classe Particula, que actuen com una <strong>fàbrica de partícules.</strong></p>
<p><strong>Per què utilitzar una fàbrica?</strong>
Fins ara, la creació d’una partícula podria fer-se així:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="p">(</span><span class="n">posicio</span><span class="p">);</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="n">p</span><span class="p">.</span><span class="na">setColorRGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">p</span><span class="p">.</span><span class="na">setVelocitat</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
Aquest enfocament presenta alguns inconvenients: la lògica de construcció queda repartida pel codi, qualsevol canvi obliga a modificar molts llocs, i el codi principal es torna menys llegible.</p>
<p>Amb una fàbrica, tota aquesta lògica queda centralitzada en un únic lloc.</p>
<p>Factory method a la classe Partícula</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span>
<span class="normal"><a href="#__codelineno-21-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Particula</span><span class="w"> </span><span class="nf">crearParticula</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">origen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Particula</span><span class="p">(</span><span class="n">origen</span><span class="p">.</span><span class="na">copy</span><span class="p">());</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">setColorRGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">vel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PVector</span><span class="p">.</span><span class="na">random2D</span><span class="p">();</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">vel</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="na">Random</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">));</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Des del programa principal, ja no és necessari usar new, sinó que simplement es demana a la fàbrica que cree la partícula:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Particula</span><span class="p">.</span><span class="na">crearParticula</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">origen</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 612. Crear una fàbrica al teu sistema de partícules</summary>
<p>En el projecte del tema 6 hem desenvolupat un sistema de partícules que simula un volcà.</p>
<p>A partir d’aquest exemple, cada alumne haurà de desenvolupar un sistema de partícules propi que simule la pluja, reutilitzant la classe Particula i els coneixements sobre mètodes i atributs estàtics.</p>
<p>Per a facilitar la creació de partícules i centralitzar la seua configuració, utilitzarem el patró de disseny Factory Method.</p>
<p>Utlitza aquest mètode des de l'aplicació principal.</p>
</details>
<h3 id="classe-fisica2d">Classe Fisica2D</h3>
<p>La classe Fisica2D és una <strong>classe estàtica</strong> representa un conjunt de lleis físiques globals aplicables a qualsevol partícula del sistema. Com que no té sentit crear objectes d’aquesta classe, tots els seus membres són estàtics.</p>
<p>Entre els elements definits en aquesta classe trobem:</p>
<ul>
<li><strong>Atributs</strong> estàtics que representen constants físiques globals, com ara la gravetat o el coeficient de fricció de l’aire.</li>
<li><strong>Mètodes</strong> estàtics que calculen forces físiques a partir de l’estat d’una partícula, com la força de fricció en funció de la seua velocitat.</li>
</ul>
<p>Aquests mètodes poden ser utilitzats directament des d’altres classes sense necessitat de crear cap objecte Fisica2D.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">processing.core.PVector</span><span class="p">;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fisica2D</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">  </span><span class="c1">// Constants físiques globals</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">GRAVETAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.3f</span><span class="p">;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">FRICCIO_AIRE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.02f</span><span class="p">;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">  </span><span class="c1">// Aplica la gravetat</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="nf">gravetat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">GRAVETAT</span><span class="p">);</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">  </span><span class="c1">// Calcula força de fricció</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="nf">friccio</span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">velocitat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">    </span><span class="n">PVector</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">velocitat</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="na">normalize</span><span class="p">();</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="n">FRICCIO_AIRE</span><span class="p">);</span>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Classes estàtiques a Processing IDE</p>
<p>Per tal que es puguen utilitzar classes amb atributs i mètodes estàtics a Processing IDE és necessari que les classes estàtiques tinguen extensió .java i no .pde. I el problema que té aquesta opció és que els arxius (classes) amb extensió .java no poden fer ús de les funcions de l'API de Processing IDE.</p>
</div>
<h4 id="us-de-la-classe-estatica">Ús de la classe estàtica</h4>
<p>La classe Particula utilitza els mètodes estàtics de Fisica2D per aplicar les forces físiques durant l’actualització del seu moviment. D’aquesta manera, la lògica de la física queda desacoblada del comportament individual de la partícula, millorant la claredat del codi i afavorint la reutilització.</p>
<p>Aquest enfocament permet:</p>
<ul>
<li><strong>Diferenciar</strong> clarament entre estat individual (posició, velocitat) i comportament global (lleis físiques).</li>
<li><strong>Utilitzar</strong> correctament el concepte de static en Java.</li>
<li><strong>Centralitzar</strong> les constants i càlculs físics en una única classe.</li>
</ul>
<p>Amb aquesta nova classe Fisica2D, la classe partícula també es veuria afectada al seu mètode <strong>actualitzar</strong> com es pot veure a continuació.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span>
<span class="normal"><a href="#__codelineno-24-6">6</a></span>
<span class="normal"><a href="#__codelineno-24-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">    </span><span class="n">PVector</span><span class="w"> </span><span class="n">acceleracio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Fisica2D</span><span class="p">.</span><span class="na">gravetat</span><span class="p">());</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="n">acceleracio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Fisica2D</span><span class="p">.</span><span class="na">friccio</span><span class="p">(</span><span class="n">vel</span><span class="p">));</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">    </span><span class="n">vel</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">acceleracio</span><span class="p">);</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">    </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vel</span><span class="p">);</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Com es pot obaservar si compareu el mètode actualitzar modificat amb el mètode anterior, ara és molt més simple i fàcil de llegir a primera vista. En aquest cas la classe estàtica ens serveix per ocultar <strong>(Principi d'ocultació - POO)</strong> el funcionament intern de diversos càlculs físics que no necessàriament tenen a veure amb la classe Partícula. És a dir, a l'usuari de les classes els importa com fan els mètodes sino què fan els mètodes.</p>
<details class="question">
<summary>Activitat 613. Adapta la classe Fisica2D</summary>
<p>Per tal d’adaptar el sistema de partícules al fenomen de la pluja, caldrà modificar o ampliar la classe Fisica2D, fent ús d’atributs i mètodes estàtics.</p>
<ol>
<li>Analitza el funcionament de la classe Fisica2D utilitzada en el sistema de partícules del volcà.</li>
<li>Modifica o amplia aquesta classe per tal que puga ser utilitzada també en un sistema de partícules que simule la pluja.</li>
<li>Afegeix nous atributs i/o mètodes estàtics que permeten representar adequadament el comportament físic de la pluja.</li>
<li>Utilitza els nous mètodes estàtics de Fisica2D dins de la teua classe ParticulaPluja (o equivalent).</li>
</ol>
<p><strong>Requsits mínmis</strong>
    - Un atribut estàtic que represente la gravetat adequada per a la pluja
    - Un mètode estàtic que retorne la força de la gravetat aplicada a una partícula de pluja.
    - Un mètode estàtic que calcule la fricció de l’aire adaptada a la pluja (per exemple, més suau que en el volcà).</p>
</details>
<h2 id="herencia-de-classes">Herència de classes</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.¡7. S'han definit i utilitzat classes heretades</li>
</ul>
</div>
<p><strong>Què és una classe heretada?</strong>
En programació orientada a objectes, una classe heretada és una classe que reutilitza el codi d'una altra classe, anomenada classe base o classe pare.</p>
<p>Una classe heretada és una classe que reutilitza el codi d'una altra. En alguns casos, dues classes comparteixen:
- Els mateixos atributs
- Els mateixos mètodes</p>
<p>En lloc de repetir codi, podem crear una classe base i una classe heretada que reutilitze aquest comportament</p>
<p>Des d'un punt de vista general, una classe B que herete d'una classe A en java es definiria usant la paraula reservada de java <strong>extends</strong> de la segÜeng manera:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">B</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">    </span><span class="c1">// Codi de la classe</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="herencia-al-sistema-de-particules">Herència al sistema de partícules</h4>
<p>En el nostre projecte, totes les partícules:
- Tenen posició            (atribut)
- Es mouen                 (atribut)
- Tenen velocitat          (atribut)
- Es mouen                 (comportament)
- Es dibuixen per pantalla (comportament)</p>
<p>Per això hem creat una classe general anomenada <strong>Partícula</strong>, que conté els atributs i mètodes (comportament) comuns a totes les partícules.  A partir d'aquesta classe, podem crear partícules més específiques, com ara partícules de lava, gotes de pluja, paperets de confeti, etc.</p>
<p>Com que el nostre projecte de sistema de partícules intenta simular les partícules de lava expulsades per un volcà, a partir de la classe Partícula que ja tenim creada i que contenirà els atributs i comportaments comuns a totes les particules, crearem una particula de lava que herete de la partícula general</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span>
<span class="normal"><a href="#__codelineno-26-6">6</a></span>
<span class="normal"><a href="#__codelineno-26-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Particula</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Lava</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posInicial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">        </span><span class="n">posicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">posInicial</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">        </span><span class="n">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">        </span><span class="n">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xFFFF5500</span><span class="p">;</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Com pots observar la classe Lava no redefineix cpa mètode, reutilitza actualitzar() i mostrar() i només inicialitza els seus valors. Però com usariem ara la nova classe creada al nostre sistema de partícules? </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1">// Des del main del nostre projecte</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="c1">// Després podem fer</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="n">p</span><span class="p">.</span><span class="na">actualitzar</span><span class="p">();</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="n">p</span><span class="p">.</span><span class="na">mostrar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Tot i que la classe <strong>Lava</strong> és una classe diferent, es pot utlitzar com una Particula dins del sistema, això és possible perquè:
- Una instància de Lava és també una instància de Partícula
- Pot utilitzar tots els mètodes definits a la classe base.</p>
<p>En aquest tema <strong>no aprofundirem en per què això funciona</strong>, sino que simplement ho utilitzarem de forma pràctica.</p>
<p><strong>Idees claus a recordar</strong>
- Una classe heretada reutilitza codi d’una altra classe.
- La classe base conté el comportament comú.
- La classe heretada pot inicialitzar els seus propis valors.
- No és necessari redefinir mètodes per poder usar herència.
- L’objectiu principal en aquest punt és reutilitzar codi, no modificar-lo.</p>
<details class="question">
<summary>Activitat 614. Herència de partícules</summary>
<p>A partir de la classe Particula, crea una classe heretada <strong>Gota</strong> que represente una gota de pluja. La nova classe haurà de:
- Heretar de partícula.
- Inicialitzar la posició i la velocitat inicials cap avall (les gotes cauen).
- Assignar un color adequat per a una gota de pluja.
- Utilitzar els mètodes heretats sense modificar-los.</p>
<p>No està permés:
- Sobreescriure mètodes.
- Utilitzar super
- Crear jerarquies complexes.</p>
</details>
<h2 id="interficies">Interfícies</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
</div>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.9. S'han definit i utilitzat interfícies</li>
</ul>
<h3 id="que-es-una-interficie">Què és una interfície?</h3>
<p>Una <strong>interfície</strong> és una estructura que defineix <strong>què pot fer una classe</strong>, però <strong>no com ho fa</strong>. </p>
<p>Una interfície:
- No conté atributs
- No implementa mètodes
- Nomes defineix mètodes que una classe haurà d'implementar</p>
<div class="admonition info">
<p class="admonition-title">És una manera de dir</p>
<p>Qualsevol classe que implemente aquesta interfície promet que tindrà aquestos mètodes.</p>
</div>
<h3 id="per-a-que-serveixen-les-interficies">Per a què serveixen les interfícies</h3>
<p>Les interfícies permeten:
- Definir comportaments comuns.
- Agrupar classes diferents sota una mateixa funcionalitat.
- Treballar amb ojbectes sense coneixer la seua classe concreta.</p>
<p>En aquest tema, les utilitzarem <strong>com a contracte de comportament</strong>, no com a eina avançada de disseny.</p>
<h3 id="interficies-en-el-sistema-de-particules">Interfícies en el sistema de partícules</h3>
<p>Al nostres sistema de partícules, totes les partícules:
- S'actualitzen a cada frame
- Es dibuixen per pantalla</p>
<p>Això és un comportament comú, independentment de si son:
- Partícules de lava
- Gotes de pluja
- Paperets de confeti
- Qualsevol altre tipus de partícula</p>
<p>Podem representar aquest comportament mitjançant una interfície.</p>
<h3 id="defniicio-de-la-interficie-actualitzable">Defniició de la interfície Actualitzable</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Actualitzable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzar</span><span class="p">();</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostrar</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">app</span><span class="p">);</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Aquesta intefície indica que qualsevol classe que la implemente:
- Ha de tindre un mètode actualitzar()
- Ha de tindre un mètode mostrar(PApplet app)</p>
<p>No diu com s'ha d'implementar.</p>
<h3 id="implementacio-de-la-interficie-de-la-classe-particula">Implementació de la interfície de la classe Partícula</h3>
<p>La classe Partícula ja disposa d'aquestos mètodes, per tant po implementar la interfície:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Particula</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Actualitzable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">velocitat</span><span class="p">;</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pinta</span><span class="p">;</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">        </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">velocitat</span><span class="p">);</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostrar</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">app</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">        </span><span class="n">app</span><span class="p">.</span><span class="na">fill</span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">        </span><span class="n">app</span><span class="p">.</span><span class="na">ellipse</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Observa que:
- No cal afegir mètodes nous
- Només indicar que la classe <strong>implementa la interfície</strong></p>
<h3 id="per-que-es-util-aco">Per què és útil açò?</h3>
<p>Gràcies a la interfície, ara podem treballar amb qualsevol objecte que siga Actualitzable, siga o no una Particula.</p>
<!--Per exemple:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="n">Canviar</span><span class="w"> </span><span class="n">l</span><span class="err">&#39;</span><span class="n">exemple</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">tal</span><span class="w"> </span><span class="n">que</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">arraylists</span>
</code></pre></div></td></tr></table></div>
-->
<div class="admonition info">
<p class="admonition-title">Idees clau a recordar</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Una interfície defineix què fa una classe, no com ho fa.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Una classe pot implementar una interfície encara que herete d’una altra.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Les interfícies permeten escriure codi més flexible i reutilitzable.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> En aquest tema, les interfícies s’utilitzen com a contractes de comportament.</li>
</ul>
</div>
<details class="question">
<summary>Activitat 615. Interfície de comportament</summary>
<p>Crea una interfície anomenada Actualitzable que definisca els mètodes necessaris per actualitzar i mostrar un objecte del sistema.    </p>
<p>A continuació:
- Fes que la classe <code>Particula</code> implemente aquesta interfície.
- Comprova que les classes heretades (<code>Lava</code>, <code>Gota</code>) continuen funcionant correctament.
- Crea una col·lecció d’objectes <code>Actualitzable</code> i utilitza-la per actualitzar i dibuixar el sistema de partícules.</p>
<p><strong>No està permés:</strong>
- Afegir mètodes nous a la interfície.
- Modificar el comportament de les classes heretades.
- Utilitzar conceptes avançats com polimorfisme explícit o classes abstractes.</p>
</details>
<h2 id="conjunts-dobjectes-i-llibreries-de-classes">Conjunts d'objectes i llibreries de classes</h2>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA4.10. S'han creat i utilitzat conjunts i llibreries de classes</li>
</ul>
</div>
<p>En projectes reals, especialment quan treballem amb programació orientada a objectes, no solem treballar amb un únic objecte, sinó amb molts objectes del mateix tipus i amb diverses classes relacionades entre si.</p>
<p>En aquest apartat veurem com:
- Agrupar objectes en <strong>conjunts</strong>
- Organitzar les nostres classes en una <strong>llibreria pròpia</strong></p>
<p>Tot això ho farem dins del projecte del <strong>sistema de partícules.</strong></p>
<h3 id="conjunts-dobjectes-al-sistema-de-particules">Conjunts d'objectes al sistema de partícules</h3>
<p>Fins ara hem treballat només amb una partícula o diverses partícules però declarades a nivell individual i sense cap tipus de relació entre elles.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="n">Particula</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">30</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>Però un <strong>sistema de partícules</strong> no és més que un conjunt (relativament gran) de partícules que es mostren i mouen al mateix temps. Per exemple, el comportament del nostre volcà és que cada <strong>n</strong> frames expulse (<strong>crear</strong>) una particula de lava de forma continuada. En aquest escenari seria impossible declarar utilitzant el sistema anterior totes les partícules de lava que es crearan durant l'execució del nostre sistema de partícules. Per això necessitem una manera d'agrupar-les, recórrer-les, actualitzar-les i dibuixar-les de forma conjunta. A aquest agrupament d'objectes l'anomenem <strong>conjunt</strong>.</p>
<h4 id="que-es-un-conjunt-dobjectes">Què és un conjunt d'objectes?</h4>
<p>Un <strong>conjunt</strong> és una estructura que ens permet guardar:
- Diversos objectes
- Del mateix tipus (o d’un tipus comú)</p>
<p>En el nostre cas:
- Un conjunt de Particula
- Que pot contindre Lava, Gota, etc.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="c1">// Al exemple següent es crea un conjunt de particules amb identificador partícules que conté objectes de la classe Particula (entre &lt;&gt;)</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Particula</span><span class="o">&gt;</span><span class="w"> </span><span class="n">particules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="n">particules</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)));</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="n">particules</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)));</span>
</code></pre></div></td></tr></table></div>
<p>Ara amb aquest <strong>ArrayList</strong> ja podem: agrupar i treballar amb totes les particules recorrent l'arrai d'objectes de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Particula</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">particules</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">        </span><span class="n">p</span><span class="p">.</span><span class="na">actualitzar</span><span class="p">();</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">        </span><span class="n">p</span><span class="p">.</span><span class="na">mostrar</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>Avantatges d'usar conjunts</strong></p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Permeten gestionar molts objectes al mateix temps.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Faciliten la reutilització del codi</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Fan el programa més flexible</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Permeten ampliar el sistema fàcilment</li>
</ul>
<p>Observa que no ens importa quin tipus de particula és, totes es tracten com a partícula i el programa queda més net i escalable.</p>
<details class="question">
<summary>Activitat 616. Sistema de partícules múltiples</summary>
<p>Modifica el teu projecte del volcà perquè:</p>
</details>
<ul>
<li>Es cree un conjunt de partícules.</li>
<li>Cada iteració (pot ser cada cert número de frames) del programa afegisca una nova partícula de lava.</li>
<li>Totes les partícules s’actualitzen i es mostren utilitzant el conjunt.</li>
</ul>
<h3 id="llibreria-de-classes-del-sistema-de-particules">Llibreria de classes del sistema de partícules</h3>
<p>A mesura que un projecte creix, també creix el nombre de classes. Si totes estigueren dins del mateix fitxer, el codi seria difícil de:</p>
<ul>
<li>Llegir</li>
<li>Mantindre</li>
<li>Reutilitzar</li>
</ul>
<p>Per això organitzem el nostre codi en llibreries de classes.</p>
<h4 id="que-es-una-llibreria-de-classes">Què és una llibreria de classes</h4>
<p>Una llibreria de classes és un conjunt de classes relacionades entre si que resolen un problema concret i poden ser reutilitzades en altres projectes.
En el nostre cas serà la llibreria del sistema de partícules amb totes les classes creades.</p>
<p><strong>La llibreria del sistema de partícules</strong>
El nostre projecte ja conté diverses classes amb responsabilitats clares:
- <strong>Partícula:</strong> classe base.
- <strong>Lava:</strong> tipus concret de partícula.
- <strong>Gota:</strong> tipus concret de partícula.
- <strong>Fisica2D:</strong> càlculs físics.
- <strong>Actualizable:</strong> comportament comú.</p>
<p><strong>Organització del projecte</strong>
A continuació pots observar un exemple d'organització d'un projecte amb una llibreria de classes.</p>
<p><center>
<div class="mermaid">	graph TD
		A[📁SistemaParticules] --&gt; B[🧩SistemaParticules.pde]
		A --&gt; C[☕Particula.java]
		A --&gt; D[☕Lava.java]
		C --&gt; E[☕Gota.java]
		A --&gt; F[☕Fisica2D.java]     
        A --&gt; G[🔌 Actualitzablle.java]
</div>
</center></p>
<p><strong>Avantatges de crear una llibreria pròpia</strong></p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Millora l’organització del codi</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Facilita el manteniment</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Permet reutilitzar classes</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Separa responsabilitats</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> Fa el projecte més professional</li>
</ul>
<details class="question">
<summary>Activitat 617. Organitzem la llibreria</summary>
<p>Reorganitza el teu projecte perquè:
- Les classes del sistema de partícules estiguen <strong>separades</strong> del sketch SistemaParticules.pde.
- El sketch només s’encarregue de crear i utilitzar les partícules.
- El sistema de partícules puga ser reutilitzat en un altre projecte.
- Mescla el sistema de partícules volcà amb el de la pluja en un mateix sketch.</p>
</details>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "toc.integrate", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.c8d2eff1.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({
    theme: "forest",
    darkmode: true
});</script></body>
</html>