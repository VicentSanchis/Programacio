
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Tema%2006.%20Desenvolupament%20de%20Classes/" rel="prev"/>
<link href="../Tema%2008.%20Col%C2%B7leccions/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.14" name="generator"/>
<title>07.- Entrada, eixida i gràfics - PROGRAMACIÓ 1DAW</title>
<link href="../assets/stylesheets/main.342714a4.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheet/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.9/mermaid.neutral.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tema-7-entrada-eixida-i-grafics">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-header__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PROGRAMACIÓ 1DAW
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              07.- Entrada, eixida i gràfics
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Canvia a mode fosc" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Canvia a mode fosc">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"></path></svg>
</label>
<input aria-label="Canvia a preferència del sistema" class="md-option" data-md-color-accent="white" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Canvia a preferència del sistema">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-nav__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    PROGRAMACIÓ 1DAW
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Índex
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2001.%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/">
<span class="md-ellipsis">
    01.- Introducció a la programació
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2002.%20El%20llenguatge%20Java/">
<span class="md-ellipsis">
    02.- El llenguatge Java
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2003.%20Programaci%C3%B3%20Orientada%20a%20Objectes/">
<span class="md-ellipsis">
    03.- Prog. Orientada a Objectes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2004.%20Estructures%20de%20Control/">
<span class="md-ellipsis">
    04.- Estructures de Control
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2005.%20Programaci%C3%B3%20Modular/">
<span class="md-ellipsis">
    05.- Programació modular
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2006.%20Desenvolupament%20de%20Classes/">
<span class="md-ellipsis">
    06.- Desenvolupament de classes
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    07.- Entrada, eixida i gràfics
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    07.- Entrada, eixida i gràfics
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
<span class="md-ellipsis">
      Introducció
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#entrada-i-eixida-basiques">
<span class="md-ellipsis">
      Entrada i eixida bàsiques
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flux-de-dades-a-nivell-de-byte">
<span class="md-ellipsis">
      Flux de dades a nivell de byte
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flux-de-dades-a-nivell-de-caracter">
<span class="md-ellipsis">
      Flux de dades a nivell de caracter
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arxius-dobjectes">
<span class="md-ellipsis">
      Arxius d'objectes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fitxers-xml">
<span class="md-ellipsis">
      Fitxers XML
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#excepcions">
<span class="md-ellipsis">
      Excepcions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio_1">
<span class="md-ellipsis">
      Introducció
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#la-llibreria-controlp5">
<span class="md-ellipsis">
      La llibreria ControlP5
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#botons">
<span class="md-ellipsis">
      Botons
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#checkbox">
<span class="md-ellipsis">
      CheckBox
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#llistes-desplegables">
<span class="md-ellipsis">
      Llistes desplegables
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#radiobutton">
<span class="md-ellipsis">
      RadioButton
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#textfield">
<span class="md-ellipsis">
      TextField
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#slide">
<span class="md-ellipsis">
      Slide
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2008.%20Col%C2%B7leccions/">
<span class="md-ellipsis">
    08.- Col·leccions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2009.%20Her%C3%A8ncia%2C%20polimorfisme%20i%20interf%C3%ADcies/">
<span class="md-ellipsis">
    09.- Herència, polimorfisme i interfícies
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2010.%20Bases%20de%20dades%20relacionals/">
<span class="md-ellipsis">
    10.- Bases de dades relacionals
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tema-7-entrada-eixida-i-grafics">Tema 7. Entrada, eixida i gràfics</h1>
<h2 id="introduccio">Introducció</h2>
<p>Una part important de tot llenguatge de programació és com s’establirà el contacte amb l’exterior, bé siga mitjançant la <strong>consola</strong> o a través del <strong>sistema de fitxers</strong>, per finalment poder actuar amb l’usuari d’una aplicació en execució. Ambdós, consola i sistema de fitxers, poden funcionar tant d’entrada als nostres programes com d’eixida.</p>
<p>Java defineix una abstracció, els <strong>streams o fluxos</strong> per tractar la comunicació d’informació amb l’exterior. Per entendre-ho millor, un stream o flux és com un canal de comunicació entre un origen i un destí. Per exemple suposem el cas d’un programa que quan arranque haja de llegir una llista de clients d’un fitxer de text per crear una agenda. En aquest cas <strong>l’origen</strong> seria el fitxer de text i el <strong>destí</strong> el programa o aplicació que s’encarrega d’emplenar l’agenda amb el llistat de clients, doncs bé, l’stream en aquest escenari seria el <strong>canal de comunicació</strong> que s’establiria entre el fitxer de text i el programa per tal que aquest puga llegir la informació.</p>
<p><img alt="Streams" src="../assets/Tema8/EntradaEixida.png"/></p>
<p>A la imatge anterior es poden observar dos tipus de fluxos de dades: El primer és un flux d'entrada de dades, s'enten d'entrada perquè va del sistema de fitxers al programa, mentre que el segon representa un flux de dades d'eixida, ja que aquest va del programa al sistema de fitxers.</p>
<p>En aquest tema explicarem com Java tracta mitjançant objectes l’establiment d'aquests canals de comunicació i quines són les operacions que hi podem fer i com s’han d’utilitzar aquestes abstraccions de Java.
D’altra banda Java també ofereix el mecanisme d’excepcions per controlar els errors sobrevinguts. Una excepció és un problema que es produeix en temps d’execució. Java permet controlar aquests problemes i programar amb els try...catch la solució als errors en temps d’execució.</p>
<h2 id="entrada-i-eixida-basiques">Entrada i eixida bàsiques</h2>
<p>Com hem dit abans, Java organitza la entrada i eixida mitjançant l’ús d’streams, que són <strong>abstraccions en realitat</strong>, i aquests streams el que fan es transportar la informació del programa o aplicació a dispositius externs. Aquests dispositius externs poden ser bé fitxers o inclús la consola, que es tractada com un fitxer per Java.</p>
<h3 id="flux-i-jerarquia-de-classes">Flux i jerarquia de classes</h3>
<p>Com que les possibilitats que tenim en programació respecte de l’ús de fitxers és ampla, podem: llegir de fitxers, escriure en fitxers, llegir per una entrada com un teclat <strong>System.in</strong> o escriure en una eixida com un monitor <strong>System.out</strong>, Java en primera instància distingeix entre dos tipus de fluxos: <strong>flux de bytes</strong> i <strong>flux de caracters</strong></p>
<table>
<thead>
<tr>
<th>E/S</th>
<th>Bytes</th>
<th>Caracters</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flux entrada</td>
<td>InputStream</td>
<td>Reader</td>
</tr>
<tr>
<td>Flux eixida</td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
</tbody>
</table>
<p>Java declara quatre classes <strong>abstractes</strong>, és a dir, que no podem instanciar cap objectes d'aquestes classes, que deriven directament de la superclasse «Object» que són: <strong>InputStream</strong>, <strong>OutputStream</strong>, <strong>Reader</strong> i <strong>Writer</strong>.</p>
<p><strong>InputStream</strong> és la base per a totes les classes definides per al flux d’entrada de dades a nivell de bytes. A la imatge següent es mostren totes les classes que deriven d'InputStream.  De totes les classes derivades de la classe abstracta InputStream, veurem amb més detall les següents: FileInputStream, DataInputStream i ObjectInputStream.</p>
<p><img alt="Jerarquia Classes" src="../assets/Tema8/InputStreamClasses.png"/></p>
<p><strong>OutputStream</strong> és la classe base per a les classes que gestionen el flux d’eixida a nivell de bytes. A la imatge següent es poden observar totes les seues classes derivades. Pel que fa a aquesta classe abstracta, veurem amb més detall: FileOutputStream, DataOutputStream, PrintStream i ObjectOutputStream.</p>
<p><img alt="Jerarquia Classes" src="../assets/Tema8/OutputStreamClasses.png"/></p>
<p><strong>Reader</strong> és la classe per llegir streams a nivell de caracter. Observa les classes derivades a la imatge següent. D'aquesta classe abstracta veurem amb més detall: BufferedReader, InputStreamReader, FileReader</p>
<p><img alt="Jerarquia Classes" src="../assets/Tema8/ReaderClasses.png"/></p>
<p><strong>Writer</strong> és la classe per escriure a streams a nivell de caracter i les classes que deriven d'ell són les que es poden veure a la següent imatge. De totes les derivades ens centrarem en: OutputStreamWriter, FileWriter, BufferedWriter i PrintWriter.</p>
<p><img alt="Jerarquia Classes" src="../assets/Tema8/WriterClasses.png"/></p>
<div class="admonition danger">
<p class="admonition-title">Particularitats de Processing IDE</p>
<p>Processing IDE és un entorn de desenvolupament senzill que no té la potència d'altres entorns com <strong>Eclipse IDE</strong>, per tant moltes de les classes d'entrada i eixida que veurem en aquest tema no es podran provar en Processing. Sempre podem obrir un projecte nou en Eclipse o Visual Studio i provar els exemples que no funcionen en Processing IDE.</p>
</div>
<h3 id="consola">Consola</h3>
<p>Una de les possibilitats de realitzar l'entrada eixida a un programa és mitjançant la consola, on d'una banda es pot escriure i mostrar missatges i d'altra banda l'usuari pot introduir informació.</p>
<h4 id="utilitzant-bufferedreader">Utilitzant BufferedReader</h4>
<p><strong>BufferedReader</strong> és una classe derivada de la classe abstracta <strong>Reader</strong> que es troba dins del paquet <strong>java.io</strong>. A l'exemple següent es mostra com podem utilitzar aquesta classe.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1">// Exemple per a Visual Studio Code o Eclipse IDE</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.BufferedReader</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.InputStreamReader</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="n">BufferedReader</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">));</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">   </span><span class="n">String</span><span class="w"> </span><span class="n">strName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="na">readLine</span><span class="p">();</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">   </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Hola: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"!"</span><span class="p">);</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">}</span><span class="w"> </span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">   </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"S'ha produit un error: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="p">}</span><span class="w"> </span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">   </span><span class="n">reader</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w"> </span><span class="c1">// És molt important tancar els streams</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Consideracions de l'exemple anterior:</p>
<ul>
<li>S'han d'importar les llibreries necessàries per poder utilitzar les classes necessàries.</li>
<li>Per instanciar un objecte de la classe BufferedReader, el constructor necessita que se li passe un objecte de tipus <strong>InputStreamReader</strong> que apunte al flux d'entrada predefinit <strong>System.in</strong> (el teclat)</li>
<li>Tota instrucció relacionada amb els streams, s'han de posar dins d'un bloc try..catch.</li>
</ul>
<h4 id="utilitzant-scanner">Utilitzant Scanner</h4>
<p>L'altra alternativa, més comoda al meu entendre, és l'ús de la classe <strong>Scanner</strong>. Aquesta classe es troba dins del paquet <strong>java.util</strong> i és una derivada de la classe arrel <strong>Object</strong>. Observa l'exemple següent d'ús de la classe <strong>Scanner</strong>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span>
<span class="normal"><a href="#__codelineno-1-8">8</a></span>
<span class="normal"><a href="#__codelineno-1-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// Exemple per a Visual Studio Code o Eclipse IDE</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Scanner</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Per favor escriu el teu nom i prem Intro"</span><span class="p">);</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="n">Scanner</span><span class="w"> </span><span class="n">scanner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Scanner</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">);</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">String</span><span class="w"> </span><span class="n">strName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scanner</span><span class="p">.</span><span class="na">nextLine</span><span class="p">();</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Hola: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"!"</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Algunes consideracions:</p>
<ul>
<li>S'han d'importar les llibreries necessàries per poder utilitzar les classes necessàries.</li>
<li>Per instanciar un objecte de la classe Scanner, el constructor necessita que se li passe un flux d'entrada com pot ser: <strong>System.in</strong> (el teclat)</li>
<li>A diferència del BufferedReader no és necessari posar el codi dins del bloc try..catch</li>
</ul>
<h4 id="bufferedreader-a-processing-ide">BufferedReader a Processing IDE</h4>
<p>A l'API de Processing existeix  una classe <strong>BufferedReader.</strong> Aquesta classe s'encarrega de llegir línia a línia com un conjunt d'Strings individuals.  Però s'utilitza per a llegir de fitxers i no de l'entrada (system.in) com als exemples anteriors. Per poder llegir des de teclat a Processing hem d'utilitzar el mètode <strong>keyPressed</strong></p>
<p>Abans de copiar i provar el següent exemple, descarrega el fitxer <a href="../assets/Tema8/positions.txt"><strong>positions.txt</strong></a> amb parells de números a cada línia separats per un tabulador.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">BufferedReader</span><span class="w"> </span><span class="n">reader</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">String</span><span class="w"> </span><span class="n">line</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="c1">// Open the file from the createWriter() example</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">  </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createReader</span><span class="p">(</span><span class="s">"positions.txt"</span><span class="p">);</span><span class="w">    </span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="p">}</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w"> </span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="na">readLine</span><span class="p">();</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">    </span><span class="c1">// Stop reading because of an error or file is empty</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">    </span><span class="n">noLoop</span><span class="p">();</span><span class="w">  </span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">pieces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">split</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">TAB</span><span class="p">);</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pieces</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">);</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pieces</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">);</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">    </span><span class="n">point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="p">}</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h3 id="flux-darxius">Flux d'arxius</h3>
<p>Un <strong>arxiu o fitxer</strong> és un conjunt de bytes que són emmagatzemats en un dispositiu. Un arxiu o fitxer es identificat per un nom i la descripció de la carpeta o directori (la ruta) que el conté. Una de les principals finalitats dels arxius és tindre desats en <strong>memòria secundària</strong>, quan les aplicacions ja han acabat d’executar-se, i que siguen recuperables després.</p>
<p>Un <strong>fitxer</strong> s’ha de poder llegir, actualitzar, esborrar registres i tornar a guardar-se de nou amb tots els canvis realitzats. Segons el dispositiu físic que els emmagatzeme, els arxius poden ser <strong>directes o seqüencials</strong>, el primer implica que per poder accedir a qualsevol registre, hem de passar prèviament pels anteriors, per exemple una cinta magnètica, mentre que el segon tipus d’arxiu permet l’accés directe al registre en qüestió sense haver de passar pels anteriors. </p>
<p>En Java un arxiu és una <strong>seqüencia de bytes</strong> que contenen la informació emmagatzemada. Per poder treballar amb aquestes seqüencies de bytes, Java disposa de classes com són els tipus bàsics (int, double, string..).
D’una altra banda, com ja hem explicat abans, un flux és una abstracció que es refereix a una corrent <strong>(stream)</strong> de dades entre un origen (també conegut com a font o productor) i una destinació o embornal (consumidor) i la connexió que existeix entre els dos també es coneix com a pipe o tub per on circules les dades.</p>
<p>Quan comença qualsevol execució d’un programa Java, es creen tres objectes flux, canals pels que pot fluir informació d’entrada o eixida; aquests objectes estan definits a la classe System i són:</p>
<ul>
<li><strong>System.in:</strong> entrada estàndard, permet l’entrada de dades des del teclat.Una excepció és un fallo que es produeix en temps d’execució. Classe <strong>InputStream</strong></li>
<li><strong>System.out:</strong> eixida estàndard, permet la programa imprimir per pantalla. Classe <strong>PrintStream</strong></li>
<li><strong>System.err:</strong> eixida d’errors, permet al programa imprimir errors per pantalla Per defecte sol ser la mateixa eixida que System.out. Classe <strong>PrintStream</strong></li>
</ul>
<h3 id="class-file">Class File</h3>
<p>Per poder identificar d’un fitxer al sistema de fitxers de qualsevol sistema operatiu, necessitem: nom i ruta. Per exemple ‘/user/data/file.txt’. El fitxer es diu file.txt i la ruta en la qual es troba és ‘/user/data/’. Aquest identificador de fitxer és el que es passa al constructor de la classe per tal d’obrir un flux.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">File</span><span class="w"> </span><span class="n">fitxer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"prova.txt"</span><span class="p">);</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1">// Fes el que vullgues fer amb el fitxer</span>
</code></pre></div></td></tr></table></div>
<p>En l’exemple anterior hem utilitzat la <strong>classe File</strong> per tal d’instanciar un stream al fitxer que li hem passat per paràmetre «prova.txt». Compte que s’ha de passar la ruta absoluta d’on es troba el fitxer utilitzant la funció de Processing IDE <strong>sketchPath()</strong>.</p>
<p>Hi ha alternatives al constructor de la classe File que hem mostrat a l’exemple anterior, es pot construir també amb dos paràmetres: ruta i nom del fitxer o inclús indicar-li la ruta mitjançant un altre objecte File.</p>
<p>Els mètodes de la classe File són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public boolean exists()</td>
<td>Torna true si el fitxer existeix</td>
</tr>
<tr>
<td>public boolean canWrite()</td>
<td>Torna true si es pot escriure al fitxer</td>
</tr>
<tr>
<td>public boolean canRead()</td>
<td>Torna true si es només de lectura</td>
</tr>
<tr>
<td>public boolean isFile()</td>
<td>Torna true si és un fitxer</td>
</tr>
<tr>
<td>public boolean isDirectory()</td>
<td>Torna true si és un directori</td>
</tr>
<tr>
<td>public boolean isAbsolute()</td>
<td>Torna true si el directori té ruta completa</td>
</tr>
<tr>
<td>public long length()</td>
<td>Torna la mida en bytes del fitxer</td>
</tr>
<tr>
<td>public long lastModified()</td>
<td>Torna el timestamp de l’última modificació</td>
</tr>
<tr>
<td>public String getName()</td>
<td>Torna una string amb el nom del fitxer</td>
</tr>
<tr>
<td>public String getPath()</td>
<td>Torna una string amb el path del fitxer</td>
</tr>
<tr>
<td>public String getAbsolutePath()</td>
<td>Torna la ruta absoluta del fitxer</td>
</tr>
<tr>
<td>public boolean setReadOnly()</td>
<td>Converteix el fitxer en només lectura</td>
</tr>
<tr>
<td>public boolean delete()</td>
<td>Elimina el fitxer o directori (si està buit)</td>
</tr>
<tr>
<td>public boolean renameTo(File nou)</td>
<td>Canvia el nom pel del fitxer nou</td>
</tr>
<tr>
<td>public boolean mkdir()</td>
<td>Crea el directori del fitxer</td>
</tr>
<tr>
<td>public String[] list()</td>
<td>Torna un array d’strings dels elements</td>
</tr>
</tbody>
</table>
<details class="question">
<summary>Activitat 801. Class File</summary>
<p>Crea un projecte en Processing IDE que obriga un fitxer de prova qualsevol, per exemple: prova.txt. 
  Revisa els mètodes de la classe File i comprova el funcionament d'alguns d'ells per exemple: getName();
  Mostra per pantalla una fitxa en la que es mostre la següent informació: </p>
<ul>
<li>Nom del fitxer</li>
<li>Ruta absoluta del fitxer</li>
<li>Data de l'última vegada que s'ha modificat</li>
</ul>
</details>
<!--      [Descarrega la solució ací](assets/Tema8/act801.zip) -->
<p>Com hauràs pogut comprovar amb <strong>la classe File</strong> t'ha resultat impossible escriure o llegir d'ell.  A continuació estudiarem amb més detall les diferents classes que disposa Java pel tractament de l'entrada i eixida d'informació (Streams). Per tal entendre-ho millor, dividirem aquesta secció en dos blocs: <strong>Tractament a nivell de byte</strong> amb les classes abstractes <strong>InputStream i OutputStream</strong> i les seues classes derivades i <strong>tractament a nivell de caracter</strong> amb les classes abstractes <strong>Writer i Reader</strong> i les seues subclasses.</p>
<h2 id="flux-de-dades-a-nivell-de-byte">Flux de dades a nivell de byte</h2>
<p>Com ja hem explicat abans, el tractament de l'entrada eixida en java a nivell de bytes es fa amb les classes abstractes <strong>InputStream i OutputStream</strong> de les quals deriven les classes: </p>
<ul>
<li>FileInputStream i FileOutputStream</li>
<li>PipedInputStream i PipedOutputStream </li>
<li>FilterInputStream i FilterOutputStream</li>
<li>ByteArrayInputStream i ByteArrayOutputStream</li>
<li>ObjectInputStream i ObjectOutputStream, etc.. </li>
</ul>
<h3 id="fileinputstream-i-fileoutputstream">FileInputStream i FileOutputStream</h3>
<p>Tot arxiu es pot considerar en sí mateix una seqüència de bytes de baix nivell i després sobre aquesta informació es pot construir informació de mes alt nivell per tal de processar dades més complexes des de tipus bàsic fins objectes. </p>
<p>En altres paraules, si volem obrir un flux de dades a un fitxer o arxiu i volem llegir byte a byte per després decidir nosaltres a nivell de programació que volem fer amb aquests bytes, hauríem d’utilitzar aquestes classes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"provat.txt"</span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="c1">// Fem el que hem de fer amb le fitxer i després s'ha de tancar</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="n">fen</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>La classe <strong>FileInputStream</strong> s’utilitza per llegir bytes o grups de bytes del fitxer associat. Tots els mètodes tenen visibilitat pública i s’ha de tenir en compte quina és l’excepció que llencen per controlar els possibles errors en temps d’execució.</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>FileOutputStream(String nombre) throws IOException;</td>
<td>Crea un objecte inicialitzat amb el nom d’arxiu que es passa com argument</td>
</tr>
<tr>
<td>FileOutputStream(String nombre, boolean sw) throws IOException;</td>
<td>Crea un objecte inicialitzat amb el nom d’arxiu que es passa per paràmetre. Si sw és true els nous bytes s’afegeixen al final</td>
</tr>
<tr>
<td>FileOutputStream(File nombre) throws IOException;</td>
<td>Crea un objecte inicialitzat amb l’objecte file que es passa per paràmetre</td>
</tr>
<tr>
<td>void write(byte a) throws IOException;</td>
<td>Escriu el byte ‘a’ al flux associat</td>
</tr>
<tr>
<td>void write(byte[] s) throws IOException;</td>
<td>Escriu l’array de bytes ‘s’ al flux</td>
</tr>
<tr>
<td>void write(byte[] s, int org, int len) throws IOException;</td>
<td>Llig una seqüència de bytes del flux i la desa a ‘s’ començant per ‘org’ i una mida de ‘len’. Torna -1 si arriba al final del fitxer</td>
</tr>
<tr>
<td>void close()throws IOException;</td>
<td>Tanca el flux i el fitxer queda lliure per al seu ús posterior</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Exemple 1</p>
<p>A continuació obrirem el fitxer «prova.txt» amb un FileInputStream per llegir-lo i desarem el seu contingut a un fitxer d’eixida «resultat.txt» que obrirem amb un FileOutputStream. Al fitxer d’eixida, bolcarem el contingut de «prova.txt»</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">   </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">      </span><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">      </span><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"prova.txt"</span><span class="p">);</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">      </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"resultat.txt"</span><span class="p">);</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">byteLlegit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fen</span><span class="p">.</span><span class="na">read</span><span class="p">();</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">byteLlegit</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">         </span><span class="n">fout</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">byteLlegit</span><span class="p">);</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">         </span><span class="n">byteLlegit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fen</span><span class="p">.</span><span class="na">read</span><span class="p">();</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">      </span><span class="n">fen</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">      </span><span class="n">fout</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">   </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">FileNotFoundException</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">      </span><span class="n">println</span><span class="p">(</span><span class="s">"Fitxer no trobat"</span><span class="p">);</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">   </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">      </span><span class="n">println</span><span class="p">(</span><span class="s">"Error d'entrada eixida"</span><span class="p">);</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<details class="question">
<summary>Activitat 802. Copiar i invertir</summary>
<p>Basat en el codi anterior i fes que al fitxer resultat, el d’eixida, es copie el que apareix a «prova.txt», el d’entrada però a l’inrevés. Per exemple:</p>
<p>Un possible resultat de l'activitat anterior podria ser el que es pot observar a la imatge següent:      </p>
<p><img alt="Fitxers Invertits" src="../assets/Tema8/FitxersInvertits.png"/></p>
</details>
<!--      [Descarrega la solució ací](assets/Tema8/act802.zip)-->
<h3 id="datainputstream-i-dataoutputstream">DataInputStream i DataOutputStream</h3>
<p>La veritat és que treballar amb bytes quan estem parlant de fitxers o arxius que contenen informació o dades de més nivell pot resultar incomode, ja que entre altres hauríem de saber quants bytes té un caràcter, un enter o un doble. </p>
<p>En Java tenim les classes <strong>DataInputStream</strong> i <strong>DataOutputStream</strong> que són subclasses de les classes <strong>FilterInputStream</strong> i <strong>FilterOutputStream</strong>. </p>
<p>Abans d'entrar en el detall d'aquestes classes, veurem amb més profunditat que són les classes FilterInputStream i FilterOutputStream. Aquestes dues classes deriven de les classes abstractes InputStream i OutputStream. Bàsicament el que fan es sobreescriure tots els mètodes de les seues super classes i permeten agrupar bytes (Input) i desagrupar-lo(Output) de tal forma que classes derivades seues podran treballar amb informació de més alt nivell.</p>
<p>Per tal d'instanciar un objecte de la classe <strong>DataInputStream</strong> d'on es podria llegir, ho fariem de la següent manera:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="n">FileInputStream</span><span class="w"> </span><span class="n">gs</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"prova.txt"</span><span class="p">);</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="n">DataInputStream</span><span class="w"> </span><span class="n">ent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataInputStream</span><span class="p">(</span><span class="n">gs</span><span class="p">);</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="c1">// Treballem amb ells i com passava amb els streams anteriors també els hem de tancar</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="n">gs</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="n">ent</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p><strong>Observa el codi anterior:</strong> Primer s'instancia un objecte de la classe <strong>FileInputStream</strong> (derivada de InputStream) en la que se li indica la ruta del fitxer amb el que volem treballar. Després aquest objecte FileInputStream s'utilitza per poder instanciar un objecte de la classe <strong>DataInputStream</strong> que utilitzarem per llegir tipus de dades primitius del fitxer.</p>
<p>Bàsicament aquestes classes el que fan és organitzar els bytes en tipus primitius de tal forma que ja podem treballar llegint i escrivint als fluxos: enters, caràcters, reals, cadenes etc..</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public DataInputStream(InputStream entrada) throws IOException</td>
<td>Crea un objecte associat a l’stream que es passa per paràmetre</td>
</tr>
<tr>
<td>public final boolean readBoolean() throws IOException</td>
<td>Torna el valor de tipus booleà llegit</td>
</tr>
<tr>
<td>public final byte readByte() throws IOException</td>
<td>Torna el valor de tipus byte llegit</td>
</tr>
<tr>
<td>public final short readShort() throws IOException</td>
<td>Torna el valor de tipus short llegit</td>
</tr>
<tr>
<td>public final char readChar() throws IOException</td>
<td>Torna el valor de tipus char llegit</td>
</tr>
<tr>
<td>public final int readInt() throws IOException</td>
<td>Torna el valor de tipus int llegit</td>
</tr>
<tr>
<td>public final long readLong() throws IOException</td>
<td>Torna el valor de tipus long llegit</td>
</tr>
<tr>
<td>public final float readFloat() throws IOException</td>
<td>Torna el valor de tipus float llegit</td>
</tr>
<tr>
<td>public final double readDouble() throws IOException</td>
<td>Torna el valor de tipus double llegit</td>
</tr>
<tr>
<td>public final String readUTF() throws IOException</td>
<td>Torna una cadena que es va escriure en UTF</td>
</tr>
</tbody>
</table>
<p>D’aquesta forma ja no ens hem de preocupar de saber quants bytes de memòria s’han de reservar per un caràcter o un enter. Per exemple si associem  un <strong>DataOutputStream</strong> a un fitxer i després cridem al mètode <strong>writeInt</strong>, realment el que s’està fent és escriure 4 bytes d’informació al fitxer de la qual cosa s’estaria encarregant de manera transparent a l’usuari.</p>
<p>Per tal d'instanciar un objecte de la classe <strong>DataOutputStream</strong>, on es podria escriure, ho fariem de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"result.txt"</span><span class="p">);</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">DataOutputStream</span><span class="w"> </span><span class="n">snb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataOutputStream</span><span class="p">(</span><span class="n">fn</span><span class="p">);</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="c1">// Treballem amb ells i tanquem.</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="n">fn</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="n">snb</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>Al contrari que passava amb el DataInputStream, al codi anterior estem instanciant un objecte de la classe <strong>DataOutputStream</strong> que utilitzarem per escriure la informació desitjada.</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public DataOutputStream(OutputStream destino) throws IOException</td>
<td>Crea un objecte associat a l’outputstream que es passa per paràmetre</td>
</tr>
<tr>
<td>public final void writeBoolean(boolean v) throws IOException</td>
<td>Escriu un boolean</td>
</tr>
<tr>
<td>public final void writeByte(int v) throws IOException</td>
<td>Escriu un byte</td>
</tr>
<tr>
<td>public final void writeShort(int v) throws IOException</td>
<td>Escriu un short</td>
</tr>
<tr>
<td>public final void writeChar(int v) throws IOException</td>
<td>Escriu un char</td>
</tr>
<tr>
<td>public final void writeChars(String v) throws IOException</td>
<td>Escriu tots els chars que conté la String v</td>
</tr>
<tr>
<td>public final void writeInt(int v) throws IOException</td>
<td>Escriu un int</td>
</tr>
<tr>
<td>public final void writeLong(long v) throws IOException</td>
<td>Escriu un long</td>
</tr>
<tr>
<td>public final void writeFloat(float v) throws IOException</td>
<td>Escriu un float</td>
</tr>
<tr>
<td>public final void writeDouble(double v) throws IOException</td>
<td>Escriu un double</td>
</tr>
<tr>
<td>public final void writeUTF(String cad) throws IOException</td>
<td>Escriu la cadena cad en format UTF</td>
</tr>
<tr>
<td>public final int close()throws IOException</td>
<td>Tanca el flux</td>
</tr>
</tbody>
</table>
<p>Un altre exemple d'ús del <strong>DataInputStream:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"prova.txt"</span><span class="p">;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">strPath</span><span class="p">);</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="n">DataInputStream</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataInputStream</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">available</span><span class="p">();</span><span class="w">  </span><span class="c1">// Quants bytes té l'arxiu</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="n">count</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="n">inst</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">byte</span><span class="w"> </span><span class="n">byt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">arr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">byt</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">          </span><span class="c1">// Si no es tracta del caracter EOF (10 ASCII)</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="n">ki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="w"> </span><span class="n">byt</span><span class="p">;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="n">print</span><span class="p">(</span><span class="n">ki</span><span class="o">+</span><span class="s">"-"</span><span class="p">);</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">  </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">"Algo val mal"</span><span class="p">);</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>A continuació podem veure un exemple en el que fem ús del <strong>DataOutputStream i DataInputStream</strong>. El que fa aquest exemple és escriure a un fitxer d’eixida «pluges.dat» dos valors double aleatoris per després llegir-los amb un DataInputStream i mostrar-los per pantalla. </p>
<p>El codi podria ser el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span>
<span class="normal"><a href="#__codelineno-9-27">27</a></span>
<span class="normal"><a href="#__codelineno-9-28">28</a></span>
<span class="normal"><a href="#__codelineno-9-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"pluges.dat"</span><span class="p">);</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="n">DataOutputStream</span><span class="w"> </span><span class="n">dos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataOutputStream</span><span class="p">(</span><span class="n">fos</span><span class="p">);</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">info</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="n">dos</span><span class="p">.</span><span class="na">writeDouble</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="n">dos</span><span class="p">.</span><span class="na">writeDouble</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">    </span><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"pluges.dat"</span><span class="p">);</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="n">DataInputStream</span><span class="w"> </span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataInputStream</span><span class="p">(</span><span class="n">fis</span><span class="p">);</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">info2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dis</span><span class="p">.</span><span class="na">readDouble</span><span class="p">();</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Primer valor: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">info2</span><span class="p">);</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">    </span><span class="n">info2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dis</span><span class="p">.</span><span class="na">readDouble</span><span class="p">();</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Segon valor: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">info2</span><span class="p">);</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">    </span><span class="n">fos</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">    </span><span class="n">dos</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">    </span><span class="n">fis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">    </span><span class="n">dis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="p">}</span>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">FileNotFoundException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"El fitxer no existeix"</span><span class="p">);</span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="p">}</span>
<a id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Error IO inesperat"</span><span class="p">);</span>
<a id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 803. Data Input i Data Output</summary>
<p>Crea un projecte en Processing copia el codi anterior i una vegada acabada l'execució del programa, obre el fitxer "pluges.dat" i compara el que s'ha mostrat a consola amb el que s'ha gravat al fitxer. Posa el mateix? Per què?</p>
</details>
<!--[Descarrega la solució ací](assets/Tema8/act803.zip)-->
<h3 id="printstream">PrintStream</h3>
<p>La classe <strong>PrintStream</strong> deriva de <strong>FilterOutputStream</strong> i el valor afegit d’aquesta classe derivada és que permet afegir el caràcter final de línia als fitxers. Aquests tipus de fluxos són sempre d’eixida i s’associen a un altre flux de bytes de més baix nivell. <strong>System.out</strong> és un objecte de tipus PrintStream. Per tant quan executem la sentència System.out.println(""); el que estem fent realment és cridar al mètode println de la classe PrintStream.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"Complex.dat"</span><span class="p">;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">PrintStream</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">strFile</span><span class="p">));</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="c1">// Treballem i tanquem</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">ps</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public PrintStream(OutputStream destino)</td>
<td>Crea un objecte associat a qualsevol objecte d’eixida per paràmetre</td>
</tr>
<tr>
<td>public PrintStream(OutputStream destino, boolean flag)</td>
<td>Crea un objecte associat a qualsevol objecte d’eixida per paràmetre. Si flag és true, es produeix un bolcat automàtic al escriure final de línia.</td>
</tr>
<tr>
<td>public void flush()</td>
<td>Bolca el flux actual</td>
</tr>
<tr>
<td>public void print(Object obj)</td>
<td>Escriu la representació de l’objecte obj al flux</td>
</tr>
<tr>
<td>public void print(String cad)</td>
<td>Escriu la cadena al flux</td>
</tr>
<tr>
<td>public void print(char c)</td>
<td>Escriu un caràcter al flux</td>
</tr>
<tr>
<td>public void println(Object obj)</td>
<td>Escriu la representació de l’objecte al flux i final de línia</td>
</tr>
<tr>
<td>public void println(String cad)</td>
<td>Escriu la cadena al flux i final de línia</td>
</tr>
</tbody>
</table>
<p>Observa el codi següent. Utilitzant la classe <strong>PrintStream</strong> s'obre un fitxer 'output.txt' dintre del qual s'escriurà una sola cadena de caracters 'data' i després es tancarà l'stream una vegada finalitzat l'execució del codi.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"output.txt"</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Text que volem escriure dintre del fitxer"</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">   </span><span class="n">PrintStream</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">   </span><span class="n">output</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">   </span><span class="n">output</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="p">}</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">   </span><span class="n">e</span><span class="p">.</span><span class="na">getStackTrace</span><span class="p">();</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 804. LLig per teclat i copia</summary>
<p>Utilitzant el mètode mouseClicked fes una aplicació de tal forma que tot allò que es teclege es guarde en un fitxer de text juntament amb l'hora a la qual s'ha escrit. Per exemple, si l'usuari escriu per pantalla el seu nom, "Manolo" i prem Intro, al fitxer d'eixida s'hauria de gravar: </p>
<p>[09:05:25] - Manolo</p>
<p>Has d'utilitzar la classe <strong>PrintStream</strong> per fer aquesta activitat.</p>
</details>
<!--      [Descarrega la solució ací](assets/Tema8/act804.zip)-->
<h2 id="flux-de-dades-a-nivell-de-caracter">Flux de dades a nivell de caracter</h2>
<p>Una altra forma de poder treballar amb fitxers en lloc de a nivell de byte com estavem fent als apartats anteriors, és fer-ho a nivell de caracter. Al cap i a la fi els arxius, en una gran majoria, solen ser seqüències de caracters i des del punt de vista lògic ens resulta més natural treballar amb ells a aquest nivell.</p>
<h3 id="reader-i-writer">Reader i writer</h3>
<p>Els arxius de text són arxius de caràcters, es poden crear fluxos de bytes o de caràcters derivats de les classes abstractes Reader i Writer.</p>
<p>Els fluxos <strong>Reader i Writer</strong> són fluxos de Java orientats a caràcters. Amb aquests fluxos podem llegir i escriure caràcters o cadenes de caràcters al dispositius connectats mitjançant aquests fluxos.</p>
<p>Per llegir arxius de caràcters s’utilitzen fluxos derivats de la classe Reader on es declaren o sobreescriuen mètodes per la lectura de caràcters. Els mètodes més importants són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public int read()</td>
<td>Llig un caràcter en forma d’enter. Si arriba al final del fitxer torna -1</td>
</tr>
<tr>
<td>public int read(char [] b)</td>
<td>Llig una seqüencia de caràcters fins completar l’array b o llegir el final del fitxer. Torna el nombre de caràcters llegits o -1 si arriba al final de l’arxiu</td>
</tr>
</tbody>
</table>
<h3 id="inputstreamreader-i-outputstreamwriter">InputStreamReader i OutputStreamWriter</h3>
<p>Els fluxos de la classe <strong>InputStreamReader</strong> envolten (wrap) a un flux de bytes; converteixen la seqüència de bytes en seqüència de caràcters i així ja no ho hem de fer nosaltres; la classe deriva directament de Reader, pel que té disponibles els mètodes read() de la seua classe pare per la lectura de caràcters</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="n">InputStreamReader</span><span class="w"> </span><span class="n">ent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">);</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="c1">// En acabar tanquem l'stream</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">ent</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
La classe <strong>OutputStreamWriter</strong> que deriva de <strong>writer</strong>, permet escriure caràcters en un flux de bytes al qual s’associa la creació de l’objecte o flux.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">OutputStreamWriter</span><span class="w"> </span><span class="n">ot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OutputStreamWriter</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">arxiu</span><span class="p">));</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="c1">// Després hem de recordar de tancar l'stream</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="n">ot</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
Els mètodes de la classe <strong>InputStreamReader</strong> són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>void close()</td>
<td>Tanca el flux i allibera tots els recursos del sistema associats</td>
</tr>
<tr>
<td>String getEncoding()</td>
<td>Retorna el nom de la codificació de caràcters que utilitza aquest flux</td>
</tr>
<tr>
<td>int read()</td>
<td>Llegeix un sol caràcter</td>
</tr>
<tr>
<td>int read(char[] buf, int offset, int length)</td>
<td>Llegeix caràcters en una part d'una matriu</td>
</tr>
<tr>
<td>boolean ready()</td>
<td>Indica si aquest flux està llest per ser llegit</td>
</tr>
</tbody>
</table>
<p>Els mètodes de la classe <strong>OutputStreamWriter</strong> són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>void close()</td>
<td>Tanca el corrent, rentant-lo primer</td>
</tr>
<tr>
<td>void flush()</td>
<td>Redueix el corrent</td>
</tr>
<tr>
<td>String getEncoding()</td>
<td>Retorna el nom de la codificació de caràcters que utilitza aquest flux</td>
</tr>
<tr>
<td>void write(char [] buf, int off, int len)</td>
<td>Escriu una part d'una matriu de caràcters</td>
</tr>
<tr>
<td>void write(int c)</td>
<td>Escriu un sol caràcter</td>
</tr>
<tr>
<td>void write(String str, int off, int len)</td>
<td>Escriu una part d'una cadena</td>
</tr>
</tbody>
</table>
<details class="question">
<summary>Activitat 805. InputStreamReader i OutputStreamReader</summary>
<p>Repeteix l'activitat anterior, la 804, però utilitzant InputStreamReader i OutputStreamReader</p>
</details>
<!--      [Descarrega la solució ací](assets/Tema8/act805.zip)-->
<p>Però allò normal és que no s'utilitzen directament aquestes classes sino que es faja ús de <strong>FileReader i FileWriter</strong>.</p>
<h3 id="filereader-i-filewriter">FileReader i FileWriter</h3>
<p>Per llegir arxius de text o de caràcters es pot crear un flux del tipus <strong>FileReader</strong>, aquesta classe deriva d’InputStreamReader, hereta els mètodes read() per a llegir caràcters, el constructor té com entrada una cadena amb el nom de l’arxiu</p>
<p>Per exemple</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"cartes.dat"</span><span class="p">;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="n">FileReader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">fr</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
Els constructors de la classe <strong>FileReader</strong> són:</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>FileReader(File file)</td>
<td>Crea un nou FileReader , amb el nom del fitxer des del qual cal llegir</td>
</tr>
<tr>
<td>FileReader(FileDescriptor fd)</td>
<td>Crea un nou FileReader , donat el FileDescriptor per llegir</td>
</tr>
<tr>
<td>FileReader(String fileName)</td>
<td>Crea un nou FileReader , amb el nom del fitxer des del qual cal llegir</td>
</tr>
</tbody>
</table>
<p>Els mètodes dels que disposa <strong>FileReader</strong> són:</p>
<ul>
<li><strong>Heretats de java.io.InputStreamReader:</strong> close, getEncoding, read, ready</li>
<li><strong>Heretats de java.io.Reader:</strong> mark, markSupported, read, reset, skip</li>
<li><strong>Heretats de java.lang.Object:</strong> clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait</li>
</ul>
<p>No es freqüent utilitzar directament fluxos <strong>OutputStreamWriter</strong>, encara que resulta interessant perquè la classe <strong>FileWriter</strong> és una extensió d’ella. Dissenyada per escriure en un arxiu de caràcters, els fluxos d’aquest tipus escriuen caràcters amb el mètode write() a l’arxiu al que s’associa el flux quan es crea l’objecte.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"cartes.dat"</span><span class="p">;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="n">FileReader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">nr</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">"Frase qualsevol a escriure"</span><span class="p">);</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="n">nr</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
Els constructors de la classe <strong>FileWriter</strong> són:</p>
<table>
<thead>
<tr>
<th>Constructor</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>FileWriter(File file)</td>
<td>Construeix un objecte FileWriter donat un objecte File</td>
</tr>
<tr>
<td>FileWriter(File file, boolean append)</td>
<td>Construeix un objecte FileWriter donat un objecte File</td>
</tr>
<tr>
<td>FileWriter(FileDescriptor fd)</td>
<td>Construeix un objecte FileWriter associat a un descriptor de fitxer</td>
</tr>
<tr>
<td>FileWriter(String fileName)</td>
<td>Construeix un objecte FileWriter amb un nom de fitxer</td>
</tr>
<tr>
<td>FileWriter(String fileName, boolean append)</td>
<td>Construeix un objecte FileWriter amb un nom de fitxer amb un booleà que indica si s'han d'afegir o no les dades escrites</td>
</tr>
</tbody>
</table>
<p>En general no resulta eficient llegir directament d’un flux d’aquest tipus, s’utilitzarà un flux <strong>BufferedReader</strong> i <strong>BufferedWriter</strong></p>
<h3 id="bufferedreader-i-bufferedwriter">BufferedReader i BufferedWriter</h3>
<p>La lectura d’arxius de text es realitza amb un flux que emmagatzema els caràcters en un <strong>buffer</strong> intermedi, aquests no es lligen directament de l’arxiu si no del buffer. D’aquesta manera augmentem l’eficiència a les operacions d’entrada, la classe <strong>BufferedReader</strong> permet crear fluxos de caràcters amb buffer que no és més que una forma d’organitzar el flux bàsic de caràcters del que ve  el text perquè al crear un flux BufferReader, aquest s’inicialitza com un flux de caràcters InputStreamReader o qualsevol altre.</p>
<p>El constructor de la classe té un argument de tipus Reader, FileReader o InputStreamReader, el flux creat disposa d’un buffer de grandària suficient, el qual es pot especificar en el constructor amb un segon argument encara que no fa falta. Exemples de fluxos amb buffer.</p>
<p>Els mètodes de la classe <strong>BufferedReader</strong> són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>void close()</td>
<td>Tanca el flux i allibera tots els recursos del sistema associats</td>
</tr>
<tr>
<td>void mark(int readAheadLimit)</td>
<td>Marca la posició actual al flux</td>
</tr>
<tr>
<td>boolean markSupported()</td>
<td>Indica si aquest flux admet l'operació mark(), que fa</td>
</tr>
<tr>
<td>read()</td>
<td>Llegeix un sol caràcter</td>
</tr>
<tr>
<td>int read(char[] cbuf, int off, int len)</td>
<td>Llegeix caràcters en una part d'una matriu</td>
</tr>
<tr>
<td>String readLine()</td>
<td>Llegeix una línia de text</td>
</tr>
<tr>
<td>boolean ready()</td>
<td>Indica si aquest flux està llest per ser llegit</td>
</tr>
<tr>
<td>void reset()</td>
<td>Restableix el flux a la marca més recent</td>
</tr>
<tr>
<td>long skip(long n)</td>
<td>Omet personatges</td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">File</span><span class="w"> </span><span class="n">someFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(...);</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">aCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="n">FileReader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">someFile</span><span class="p">);</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="n">BufferedReader</span><span class="w"> </span><span class="n">br</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="n">fr</span><span class="p">);</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="c1">// Count the number of 'a' characters.</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">ch</span><span class="p">;</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">br</span><span class="p">.</span><span class="na">read</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ch</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'a'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">      </span><span class="n">aCount</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="p">}</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"There are "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">aCount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" 'a' characters in "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">someFile</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p><strong>BufferedWriter</strong>, per un altre costat, escriu text en un flux de sortida de caràcters, guarda els caràcters en memòria intermèdia (buffer) per tal de proporcionar una escriptura eficient de caràcters, matrius i cadenes individuals.</p>
<p>Es pot especificar la mida de la memòria intermèdia o es pot acceptar la mida predeterminada. El valor predeterminat és prou gran per a la majoria de propòsits.</p>
<p>Es proporciona un mètode newLine(), que utilitza la pròpia noció de separador de línies de la plataforma tal com es defineix per la propietat del sistema line.separator . No totes les plataformes utilitzen el caràcter de nova línia ('\n') per acabar les línies. Per tant, es prefereix cridar aquest mètode per acabar cada línia de sortida que escriure directament un caràcter de nova línia.</p>
<p>Els mètodes de la classe són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>void close()</td>
<td>Tanca el corrent, rentant-lo primer</td>
</tr>
<tr>
<td>void flush()</td>
<td>Redueix el corrent</td>
</tr>
<tr>
<td>void newLine()</td>
<td>Escriu un separador de línies</td>
</tr>
<tr>
<td>void   write(char[] cbuf, int off, int len)</td>
<td>Escriu una part d'una matriu de caràcters</td>
</tr>
<tr>
<td>void write(int c)</td>
<td>Escriu un sol caràcter</td>
</tr>
<tr>
<td>void write(String s, int off, int len)</td>
<td>Escriu una part d'una cadena</td>
</tr>
</tbody>
</table>
<p>Exemple</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileWriter</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.BufferedWriter</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"This is the data in the output file"</span><span class="p">;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span><span class="c1">// Creates a FileWriter</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"output.txt"</span><span class="p">;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">  </span><span class="n">FileWriter</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileWriter</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="c1">// Creates a BufferedWriter</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">  </span><span class="n">BufferedWriter</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedWriter</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">  </span><span class="c1">// Writes the string to the file</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">  </span><span class="n">output</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">  </span><span class="c1">// Closes the writer</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">  </span><span class="n">output</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="p">}</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">  </span><span class="n">e</span><span class="p">.</span><span class="na">getStackTrace</span><span class="p">();</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="p">}</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h3 id="printwriter">PrintWriter</h3>
<p>Els fluxos més utilitzats en l’eixida de caràcters són de tipus PrintWriter, aquesta classe declara constructors per associar un flux PrintWriter amb qualsevol altre de tipus Writer o bé OutputStream.</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public PrintWriter(OutputStream destí)</td>
<td>Crea un flux associat amb un altre d’eixida a nivell de byte.</td>
</tr>
<tr>
<td>public PrintWriter(Writer destino)</td>
<td>Crea un flux associat amb un altre d’eixida de caràcters de tipus Writer.</td>
</tr>
</tbody>
</table>
<p>La importància d’aquesta classe radica en que defineix mètodes print() i println() per cadascun dels tipus de dades simples, per String i per Object; la diferència entre els mètodes print() i println() està en que el segon afegeix els caràcters de final de línia a continuació dels escrits per l’argument. </p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void print(Object obj)</td>
<td>Escriu la representació de l’objecte obj al flux</td>
</tr>
<tr>
<td>public void print(String cad)</td>
<td>Escriu la cadena al flux</td>
</tr>
<tr>
<td>public void print(char c)</td>
<td>Escriu el caràcter c al flux.</td>
</tr>
<tr>
<td>public void println(Object obj)</td>
<td>Escriu la representació de l’objecte obj al flux i final de línia</td>
</tr>
<tr>
<td>public void println(String cad)</td>
<td>Escriu la cadena al flux i el final de línia</td>
</tr>
<tr>
<td>public void println(char c)</td>
<td>Escriu el caràcter c al flux i final de línia.</td>
</tr>
</tbody>
</table>
<p>Exemple</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.PrintWriter</span><span class="p">;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"output.txt"</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="n">FileReader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"This is a text inside the file."</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="n">PrintWriter</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintWriter</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="n">output</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="n">output</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="p">}</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="n">e</span><span class="p">.</span><span class="na">getStackTrace</span><span class="p">();</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 806. FileWriter, FileReader, BufferedReader i PrintWriter</summary>
<p>Utilitzant les classes anteriors, obre un fitxer que continga text, llig tot el seu contingut i enregistra'l a un fitxer d'eixida amb la condició que has de canviar majúscules per minúscules i a l'inrevés des del fitxer d'origen.  </p>
<p>Has de tindre en compte que Processing IDE incorpora les seues pròpies classes BufferedReader i PrintWriter que podràs utilitzar en combinació amb FileWriter i FileReader per poder fer aquesta activitat.</p>
</details>
<!--      [Descarrega la solució ací](assets/Tema8/act806.zip)-->
<h2 id="arxius-dobjectes">Arxius d'objectes</h2>
<p>Fins ara hem tractat el tema d'entrada - eixida d'informació utilitzant els tipus primitius o bàsics que ens proporciona el llenguatge de programació: int, char, float, String... però que passa si el que volem desar o llegir des d'un dispositiu extern és un o diversos objectes? Com es guarden i com es recuperen aquestos objectes?</p>
<p>Java proporciona una mecanisme que s'anomena <strong>serialització</strong> que consisteix en convertir un objecte en una seqüència de bytes de tal forma que, ara sí, es podrà desar a un fitxer o un dispositiu extern. El procés de lectura d'un objecte serialitzat a un fitxer, per contra, s'anomena <strong>desserialització</strong>.</p>
<p>Per tal que un objecte continue existint, és a dir, que siga persistent, una vegada ja hem finalitzat l’execució d’un programa o aplicació l’hem de desar a un arxiu d’objectes. Per poder aconseguir açò, utilitzarem les classes <strong>ObjectInputStream i ObjectOutputStream</strong></p>
<h3 id="classe-dobjecte-persistent">Classe d'objecte persistent</h3>
<p><strong>Serialització:</strong> és el procés de convertir un objecte (incloses les referències a altres objectes) a una seqüència de bytes, així com també l'acció de reconstruir eixos bytes en un objecte viu en un futur. La serialització s'utilitza quan vols <strong>persistir</strong> un objecte, és a dir, que dure més que el que dura l'execució d'un programa o aplicació.</p>
<p>La declaració de la classe els objectes de la qual van a ser persistents, han de implementar la interfície <strong>«serializable»</strong> del paquet java.io, la qual és buida, no declara mètodes, simplement indica a la màquina virtual de Java que les instàncies d’aquestes classes podran gravar-se en un fitxer.</p>
<p>Exemples</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">class</span> <span class="nc">racional</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">serializable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SerialClass</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1L</span><span class="p">;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">currentTime</span><span class="p">;</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="nf">SerialClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">      </span><span class="n">currentTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Calendar</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">getTime</span><span class="p">();</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="nf">getCurrentTime</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">currentTime</span><span class="p">;</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="objectoutputstream">ObjectOutputStream</h3>
<p>Els fluxos de la classe ObjectOutputStream s’utilitzen per gravar objectes persistents. El mètode writeObject() escriu qualsevol objecte d’una classe serializable en el flux de bytes associat. Pot llençar excepcions del tipus IOException que és necessari processar.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">writeObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>El constructor de la classe espera un argument de tipus OutputStream, que és la base dels fluxos d’eixida a nivell de bytes, per tant, per crear aquest tipus de fluxos primer es crea un d’eixida a nivell de bytes associat a un arxiu extern i a continuació, es passa com argument al constructor de ObjectOutputStream, per exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"dadesRac.dat"</span><span class="p">;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">FileReader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">bn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">strFile</span><span class="p">);</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">fobj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">bn</span><span class="p">);</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="n">bn</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="n">fobj</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>A continuació es pot escriure qualsevol objecte al flux:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">Persona</span><span class="w"> </span><span class="n">juan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Persona</span><span class="p">(</span><span class="s">"Juan"</span><span class="p">,</span><span class="s">"Martin"</span><span class="p">,</span><span class="w"> </span><span class="s">"123432123X"</span><span class="p">);</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="n">fobj</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">juan</span><span class="p">);</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="p">(</span><span class="s">"Cadena de favors"</span><span class="p">);</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="n">fobj</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="n">fobj</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<h3 id="objectinputstream">ObjectInputStream</h3>
<p>El objectes guardats en arxius amb fluxos de la classe ObjectOutputStream es recuperen i lligen amb fluxos d’entrada del tipus ObjectInputStream, aquesta classe és una extensió d’InputStream, a més a més, implementa la interfície DataInput, per això disposa de diversos mètodes d’entrada (read) per cadascun dels tipus de dades com readInt() o altres. El mètode més important definit per la classe ObjectInputStream és readObject(), el qual llig un objecte del flux d’entrada, és a dir, de l’arxiu associat al flux de baix nivell; l’objecte llegit es va escriure en el seu moment amb el mètode writeObject()</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">readObject</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>El constructor de fluxos ObjectInputStream té com entrada un altre flux de baix nivell de qualsevol tipus derivat d’InputStream, per exemple: FileInputStream associat amb l’arxiu d’objectes. A continuació es crea un flux d’entrada per llegir els objectes de l’arxiu «arxiuObjects.dat»</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">"arxiuObjects.dat"</span><span class="p">));</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="n">obj</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>El constructor de la classe <strong>ObjectOutputStream</strong> llença una excepció si, per exemple, l’arxiu no existeix, aquella és del tipus «ClassNotFoundException» o «IOException», és necessari poder capturar aquestes excepcions</p>
<details class="danger" open="open">
<summary>Compte on poses el codi</summary>
<p>Ja que l'entorn de desenvolupament que estem utilitzant, Processing IDE, no és un IDE a l'ús com l'Eclipse IDE, Visual Studio Code o NetBeans, la serialització d'objectes pot donar errors. És <strong>molt important</strong> que el codi relatiu als ObjectInputStream i ObjectInputStream estiga escrit en fitxers que no tinguen l'extensió <strong>.pde</strong> i tinguen una extensió <strong>.java</strong>. En altres paraules, aquelles classes que siguen susceptibles de ser serialitzades: </p>
<p><strong>(1)</strong> Tindran tot el codi amb els objectes ObjectOutputStream i ObjectInputStream per poder llegir i escriure objectes en fitxers.
  <strong>(2)</strong> Es desaran amb l'extensió <em>java</em> i <strong>MAI</strong> <em>pde</em>.</p>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Main</label><label for="__tabbed_1_2">Dog</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="c1">// Creates an object of Dog class</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">  </span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">(</span><span class="s">"Tyson"</span><span class="p">,</span><span class="w"> </span><span class="s">"Labrador"</span><span class="p">);</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">  </span><span class="n">dog</span><span class="p">.</span><span class="na">save</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span>
<span class="normal"><a href="#__codelineno-27-23">23</a></span>
<span class="normal"><a href="#__codelineno-27-24">24</a></span>
<span class="normal"><a href="#__codelineno-27-25">25</a></span>
<span class="normal"><a href="#__codelineno-27-26">26</a></span>
<span class="normal"><a href="#__codelineno-27-27">27</a></span>
<span class="normal"><a href="#__codelineno-27-28">28</a></span>
<span class="normal"><a href="#__codelineno-27-29">29</a></span>
<span class="normal"><a href="#__codelineno-27-30">30</a></span>
<span class="normal"><a href="#__codelineno-27-31">31</a></span>
<span class="normal"><a href="#__codelineno-27-32">32</a></span>
<span class="normal"><a href="#__codelineno-27-33">33</a></span>
<span class="normal"><a href="#__codelineno-27-34">34</a></span>
<span class="normal"><a href="#__codelineno-27-35">35</a></span>
<span class="normal"><a href="#__codelineno-27-36">36</a></span>
<span class="normal"><a href="#__codelineno-27-37">37</a></span>
<span class="normal"><a href="#__codelineno-27-38">38</a></span>
<span class="normal"><a href="#__codelineno-27-39">39</a></span>
<span class="normal"><a href="#__codelineno-27-40">40</a></span>
<span class="normal"><a href="#__codelineno-27-41">41</a></span>
<span class="normal"><a href="#__codelineno-27-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Dog</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">   </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">   </span><span class="n">String</span><span class="w"> </span><span class="n">breed</span><span class="p">;</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="nf">Dog</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">breed</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">breed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">breed</span><span class="p">;</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">save</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">            </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">);</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">            </span><span class="c1">// Creates an ObjectOutputStream</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="w">            </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="w">            </span><span class="c1">// Writes objects to the output stream</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a><span class="w">            </span><span class="n">output</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">dog</span><span class="p">);</span>
<a id="__codelineno-27-22" name="__codelineno-27-22"></a>
<a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="w">            </span><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fileStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">);</span>
<a id="__codelineno-27-24" name="__codelineno-27-24"></a>
<a id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">            </span><span class="c1">// Creates an ObjectInputStream</span>
<a id="__codelineno-27-26" name="__codelineno-27-26"></a><span class="w">            </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">fileStream</span><span class="p">);</span>
<a id="__codelineno-27-27" name="__codelineno-27-27"></a>
<a id="__codelineno-27-28" name="__codelineno-27-28"></a><span class="w">            </span><span class="c1">// Reads the objects</span>
<a id="__codelineno-27-29" name="__codelineno-27-29"></a><span class="w">            </span><span class="n">Dog</span><span class="w"> </span><span class="n">newDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Dog</span><span class="p">)</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span>
<a id="__codelineno-27-30" name="__codelineno-27-30"></a>
<a id="__codelineno-27-31" name="__codelineno-27-31"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Dog Name: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">newDog</span><span class="p">.</span><span class="na">name</span><span class="p">);</span>
<a id="__codelineno-27-32" name="__codelineno-27-32"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Dog Breed: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">newDog</span><span class="p">.</span><span class="na">breed</span><span class="p">);</span>
<a id="__codelineno-27-33" name="__codelineno-27-33"></a>
<a id="__codelineno-27-34" name="__codelineno-27-34"></a><span class="w">            </span><span class="n">output</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-27-35" name="__codelineno-27-35"></a><span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-27-36" name="__codelineno-27-36"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-27-37" name="__codelineno-27-37"></a>
<a id="__codelineno-27-38" name="__codelineno-27-38"></a><span class="w">      </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-39" name="__codelineno-27-39"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-27-40" name="__codelineno-27-40"></a><span class="w">      </span><span class="p">}</span><span class="w">    </span>
<a id="__codelineno-27-41" name="__codelineno-27-41"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-27-42" name="__codelineno-27-42"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</input></input></div>
<details class="question">
<summary>Activitat 807. Classe alumne</summary>
<p>Dissenya una aplicació amb Processing IDE on es podrà per un costat introduir informació d'alumnes que es guardaran en un fitxer que s'anomene: 'alumnes.dat'. </p>
<p>Al principi l'aplicació llegirà de l'arxiu 'alumnes.dat' tots els alumnes inscrits al curs i els mostrar per pantalla, ordenats alfabèticament pel cognom. </p>
<p>Una vegada haja mostrat tots els alumnes, l'aplicació esperarà que s'introduisca algun alumne nou per consola, una vegada introduits totes les dades de l'alumne, aquesta es guardarà en un objecte primer i després al fitxer 'alumnes.dat' a continuació dels que ja havien estat enregistrats. </p>
<p>Finalment tornarà a mostrar els alumnes ordenats alfabèticament i torna a començar.</p>
<p><a href="../assets/Tema8/ProvaObjectes.zip">Descarrega un exemple ací</a></p>
</details>
<h2 id="fitxers-xml">Fitxers XML</h2>
<details class="question">
<summary>Activitat 808. Processa un document XML en Java</summary>
</details>
<p>Crear classe Alumne crear estructura xml amb alumnes carregar un arraylist d'alumnes al main. La classe Alumne ha de tindre mètodes LoadXML ....</p>
<details class="question">
<summary>Activitat 809. Aplicació traductora amb XML</summary>
</details>
<h2 id="excepcions">Excepcions</h2>
<p>Un problema important en el desenvolupament del programari és la gestió de les errades o errors. No importa quan bé estiga planificat aquest desenvolupament i quan eficient siga l’equip desenvolupador. És una màxima en informàtica el fet que sempre apareixeran problemes. Aquests problemes inesperats són problemes o errors que apareixen en temps d’execució, per exemple: esgotament de memòria o recursos, errors en els intervals dels bucles, divisions per zero, arxius no existents, etc..</p>
<p>Les excepcions són el mecanisme previst per Java per tractar aquests problemes sobrevinguts. Amb les excepcions, Java dona la possibilitat al programador salvar aquest tipus de situacions de manera controlada sense que el programa o aplicació es tanque, bloquege o deixe de respondre.</p>
<h3 id="condicions-derrors-en-programes">Condicions d'errors en programes</h3>
<p>Programar, escriure codi, mètodes, classes, etc.. que siga eficient, eficaç i lliure d’errades és altament complicat. El control d’errades és una part tant important en el disseny d’aplicacions que a totes les diferents metodologia de cicle de vida software, hi ha una fase que es dedica única i exclusivament a detectar aquestes errades i solucionar-les i així i tot és impossible produir programari totalment lliure d’errades.</p>
<h3 id="tractament-dels-codis-derror">Tractament dels codis d'error</h3>
<p>Java inclou un mecanisme de gestió d’excepcions per poder intentat cobrir possibles errades en els programes en temps d’execució. Aquest mecanisme consisteix en capturar (catch) els errors quan es produeixen en temps d’execució.</p>
<p>Quan es produeix un fallo en temps d’execució es podrien fer tres coses: parar l’execució de sobte, continuar executant esperant que no passe res o establir una senyal d’error que el mateix codi amb altres sentències s’encarregue de gestionar.</p>
<p>Aquestes senyals que envia (throw) el programa quan es produeix alguna errada en Java s’anomenen excepcions i el bloc del codi on es posen les sentències per tal d’intentar solucionar-lo en temps d’execució és el bloc catch.</p>
<h3 id="excepcions-en-java">Excepcions en Java</h3>
<p>Una excepció és un fallo que es produeix en temps d’execució. Si hem escrit bé el codi per tal de gestionar aquest fallo, el flux d’execució passa al codi destinat a gestionar les excepcions, en cas contrari el programa acaba la seua execució.</p>
<p>Aquestes excepcions es poden produir per exemple si intenten accedir a un element d’un array fora dels seus límits, si intentem obrir un fitxer que no existeix o està bloquejat, si dividim per zero, etc..</p>
<p>El model de gestió d’excepcions a Java afegeix cinc noves paraules reservades: try, throw, throws, catch i finally.</p>
<ul>
<li><strong>try:</strong> bloc on es detectaran les excepcions</li>
<li><strong>catch:</strong> captura les excepcions que es produeixen al bloc try </li>
<li><strong>throw:</strong> expressió per llençar excepcions</li>
<li><strong>throws:</strong> indica les excepcions que pot llençar un mètode.</li>
<li><strong>finally:</strong> bloc opcional situat després del try catch</li>
</ul>
<p>Les passes del model de control d’excepcions en Java són:</p>
<ol>
<li>El bloc try conté les instruccions o part del codi susceptible de provocar algun error.</li>
<li>Si en temps d’execució es produeix algun error dins de les sentències que es troben dins del bloc try, es llença una excepció.</li>
<li>S’executa el codi que es troba dins del bloc catch associat a la excepció que s’ha llençat al punt anterior.</li>
<li>S’executa el bloc finally (opcional)</li>
</ol>
<p>Exemple. Suposem una classe persona que incorporarem a la nostra aplicació. Aquesta classe té un constructor al qual se li passa el DNI, imaginem ara que de la nostra aplicació instanciem un objecte de la classe persona a la qual l direm Joan però quan cridem al constructor de la classe no li passem un DNI, aquest «mal ús» de la classe Persona, llençaria una excepció que hauria de capturar la nostra aplicació al bloc catch i és ací, en aquest bloc d’instruccions, en el que s’hauria de corregir la situació o avisar a l’usuari de l’aplicació del que ha passat.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">escolta</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">   </span><span class="c1">// Codi del metode escolta</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">   </span><span class="c1">// ...</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">   </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">();</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="p">}</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">   </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">      </span><span class="n">escolta</span><span class="p">();</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">   </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">      </span><span class="c1">// Codi a executar quan es produeix una excepció.</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Al codi anterior hem crear un mètode escolta que l’únic que fa és llençar una excepció. Quan al mètode main cridem a la funció escolta, si volem fer ús del sistema d’excepcions de Java, l’haurem de posar dins del bloc try. Just desprès d’acabar el conjunt d’instruccions del bloc try posem un catch indicant-li quina és la classe d’excepció que hauriem de capturar, al nostre cas Exception, i dins del bloc catch posariem el codi que s’hauria d’executar en cas de produir-se eixe error. Normalment es solen posar missatges d’error que alerten l’usuari de l’aplicació.</p>
<p>A continuació explicarem amb més detall què és el que fan cadascun dels blocs del mecanisme d’excepcions que ha dissenyat Java.</p>
<h3 id="bloc-try">Bloc try</h3>
<p>Dins del bloc try s’han de posar aquelles sentències que poden llençar alguna excepció entre claudàtors, després del claudàtor de tancament s’ha de posar el bloc catch o controlador d’excepcions almenys un bloc catch. Si l’excepció que es produeix coincideix amb algun dels paràmetres dels blocs catch que hi han, s’executen les sentències que es troben a dintre.</p>
<p>Els blocs try, de la mateixa forma que amb totes les sentències de programació estructurada, es poden niar.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">   </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">      </span><span class="n">escolta</span><span class="p">();</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">         </span><span class="n">tornaAEscoltar</span><span class="p">();</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">      </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">         </span><span class="c1">// Codi excepció interna</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">   </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">      </span><span class="c1">// Codi excepció externa</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>A l’exemple anterior és pot observar un codi amb dos blocs try niats on el primer bloc try té dos blocs catch per controlar varies excepcions</p>
<h3 id="bloc-throw">Bloc throw</h3>
<p>La sentència throw llença (raise) una excepció. Les excepcions en Java són objectes, per tant, una excepció és una instància d’una classe que deriva de la classe Exception
A l’exemple anterior com es pot observar es capturen dos tipus d’excepcions diferents, una generica Exception i una altra FileNotFoundException. Aquesta última es produeix normalment quan volem obrir un fitxer, amb la classe File per exemple, i aquest no existeix.    </p>
<h3 id="bloc-catch">Bloc catch</h3>
<p>El bloc catch o de captura d’excepcions. Quan una excepció es llença des d’un bloc try, si el tipus d’excepció que s’ha llençat coincideix amb el tipus d’excepció que s’ha passat per paràmetre al catch, s’executarien les sentències que hi han dins del bloc catch. Normalment es sol posar el codi necessari per poder eixir de la situació en la que ens trobem quan s’alça una excepció.</p>
<h3 id="clausula-finally">Clàusula finally</h3>
<p>El bloc finally en un try..catch, és el bloc d’instruccions que s’executarà sempre, hi haja excepcions o no, al final de tot el nostre codi. 
Normalment es solen posar sentències per tal d’alliberar tot allò que podem haver creat dins del bloc try, és a dir, tancar fluxos, fitxers, connexions a bases de dades etc..amb la finalitat d’alliberar memòria.</p>
<h3 id="classes-dexcepcions-en-java">Classes d'excepcions en Java</h3>
<p><img alt="Excepcions Java" src="../assets/Tema8/Excepcions.png"/></p>
<h3 id="creacio-dexcepcions">Creació d'excepcions</h3>
<p>Java permet la creació d’excepcions noves que deriven de la classe base Exception</p>
<details class="question">
<summary>Activitat 810. Crear i utilitzar una excepció personalitzada</summary>
</details>
<p>Crea una classe d'excepció personalitzada anomenada NumeroNegatiuException que hereti de la classe Exception. Aquesta excepció s'haurà de llançar quan un valor numèric negatiu sigui introduït en el programa.</p>
<p>Crea un mètode anomenat verificarNumero(int numero) que comprovi si el número és negatiu. Si el número és negatiu, ha de llençar la teva excepció personalitzada (NumeroNegatiuException).</p>
<p>En el mètode main, crida el mètode verificarNumero i captura la excepció per mostrar un missatge d'error si s'introdueix un número negatiu.</p>
<h2 id="introduccio_1">Introducció</h2>
<p>Fins ara hem estat utilitzant els esdeveniments keyPressed i mouseClicked per tal d'interactuar amb l'usuari o bé també utilitzant diàlegs popup.....</p>
<p>En aquest tema utilitzarem una llibreria de Processing IDE que es diu controlP5 que s'instal·la des del menú ** Tools --&gt; Manage Tools<strong>. Al diàleg que s'obre anem a la pestanya </strong>Libraries<strong> i busquem i instal·lem la llibreria </strong>ControlP5**</p>
<h2 id="la-llibreria-controlp5">La llibreria ControlP5</h2>
<p>ControlP5 és una col·lecció de controladors per crear una interfície d'usuari gràfica a la part superior del vostre esbós de processament inclouen controls lliscants, botons, commutadors, botons, camps de text, botons de ràdio, caselles de verificació, entre d'altres, i es poden afegir fàcilment a un esbós de processament. Es poden organitzar en contextos PGraphics de control separats i es poden organitzar en pestanyes o grups.</p>
<p>Amb ControlP5 podem fer:</p>
<ul>
<li>Grups: poden agrupar diversos controls.</li>
<li>Botons</li>
<li>Etiquetes de text o labels.</li>
<li>Camps i arees de text.</li>
<li>Desplegables</li>
<li>Entre molts altres..</li>
</ul>
<center>
<kbd style="border:1px solid #888;width:80%;">![ControlP5 Library](assets/Tema9/controlp5-controllers-range.png)</kbd>
</center>
<p>Per tal de poder utilitzar les llibreries ControlP5 de Processing només hauriem d'instal·lar la llibreria com s'instal·len les llibreries a Processing IDE.</p>
<div class="admonition danger">
<p class="admonition-title">Particularitats Processing IDE i ControlP5</p>
<div class="highlight"><pre><span></span><code>Una vegada ja tens instal·lada la llibreria i abans de passar a utilitzar-la, has de tenir en compte una sèrie de consideracions molt importants per tal que funcione correctament.

1. Processing treballa la part gràfica de l'entorn amb una classe anomenada PApplet que és la que s'utilitza per a dibuixar els **sketch** i a la qual també s'associen els controls derivats de la llibreria **ControlP5**. Per tant per poder utilitzar-la als nostres projectes ens hem d'assegurar que la classe que continga els controls ha de tindre accés al PApplet principal (main).

2. La classe que continga els controls, una classe Menú per exemple, si volem que la interacció amb l'usuari funcione de forma correcta, haurà d'implementar la interfície **ControlListener**  per tant, haurà de tindre el mètode public void controlEvent(ControlEvent theEvent).
</code></pre></div>
</div>
<h2 id="botons">Botons</h2>
<p>Un botó dispara un esdeveniment després de que s'allibere. Els esdeveniments del botó es poden associar a funcions dins de la teua aplicació. Si vols veure més informació d'aquest control pots anar a la documentació de la <a href="https://sojamo.de/libraries/controlP5/reference/index.html?controlP5/Button.html">classe Controller</a>.</p>
<p>Primer crearem una xicoteta aplicació per posar botons i veure amb un poc més de detall com funcionen i que es pot fer amb ells. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Main</label><label for="__tabbed_2_2">Menu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="w">    </span><span class="n">Menu</span><span class="w"> </span><span class="n">menu</span><span class="p">;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">        </span><span class="n">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Menu</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="p">}</span><span class="w">   </span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">        </span><span class="n">menu</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Menu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">boto1</span><span class="p">;</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Menu</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">    </span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">            </span><span class="n">boto1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"BOTÓ"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">150</span><span class="p">);</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">125</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
<a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-31-18" name="__codelineno-31-18"></a><span class="w">            </span>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-31-20" name="__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(){</span>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="w">        </span><span class="n">boto1</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-31-23" name="__codelineno-31-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</input></input></div>
<p>Al codi anterior s'ha creat la <strong>classe Menú</strong> que és la que contindrà els controls de <strong>controlP5</strong>. Al nostre cas es tractarà inicialment d'un sol botó amb text <strong>BOTO1</strong> a la posició (250,150) amb una grandària de 150 per 150 píxels de color blau. Com pots observar també he implementat el mètode (buit de moment) <strong>controlEvent</strong> ja que es tracta d'una classe que implementa la interfície <strong>ControlListener</strong>. Finalment hem posat un mètode <strong>display</strong> public en el que bàsicament el que es fa és cridar al mètode <strong>show()</strong> de la classe Button de la llibreria ControlP5.</p>
<p>Al executar eixe codi es mostra el següent:</p>
<center>
    ![ControlP5 Library](assets/Tema9/ProvaBoto1.png)
</center>
<p>Ara ens quedaria com aconseguir que es puga interactuar amb l'usuari, en altres paraules, que quan l'usuari prema el botó l'aplicació faja alguna cosa. Per aconseguir-ho cal fer dues coses: la primera és afegir-li a l'objecte controlP5 qui serà el que està escoltant les accions que es poden realitzar amb els controls que conté, bàsicament fer clic sobre el botó en el nostre cas. Això es fa afegint-li al controlP5 un <strong>listener</strong> just després de la instanciació d'aquest.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="w">    </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>En altres paraules el que li estem dient al botó és que quan el premem, el codi que ha d'executar-se associat al botó es troba a la mateixa classe <strong>Menu</strong> (this) mitjançant el mètode <strong>controlEvent</strong> de la interfície <strong>ControlListener</strong></p>
<p>Finalment ens quedaria escriure el codi necessari al mètode <strong>controlEvent</strong> amb les accions que volem que es produeixen quan fem clic sobre el botó.</p>
<div class="admonition danger">
<p class="admonition-title">ControlEvent NO és un mètode de botó</p>
<div class="highlight"><pre><span></span><code>Heu de tenir en compte que el mètode **controlEvent** és un mètode que pot respondre a accions de l'usuari en diferents controls de la mateixa classe. És a dir, que la nostra classe menú pot tindre més d'un botó i tots els esdeveniments executaran el mètode en qüestió.
</code></pre></div>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Main</label><label for="__tabbed_3_2">Menu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="w">    </span><span class="n">Menu</span><span class="w"> </span><span class="n">menu</span><span class="p">;</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">        </span><span class="n">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Menu</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">    </span><span class="p">}</span><span class="w">   </span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">        </span><span class="n">menu</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Menu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">boto1</span><span class="p">;</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Menu</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="w">    </span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="w">            </span><span class="n">boto1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"BOTÓ"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">150</span><span class="p">);</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">125</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a>
<a id="__codelineno-34-18" name="__codelineno-34-18"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-34-19" name="__codelineno-34-19"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-20" name="__codelineno-34-20"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"boto1"</span><span class="p">:</span>
<a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"cas 1"</span><span class="p">);</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(){</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</input></input></div>
<p>Per acabar, què passa si el que volem quan es premi un botó modifique l'estat del programa principal? Hem d'aprofitar que al constructor de la classe menú se li passa el <strong>pare</strong> (programa principal en el nostre cas) i per tant des dels esdeveniments de la classe <strong>Menú</strong> podriem cridar a mètodes de la classe pare. Per tant tot allò que volem que siga susceptible de modificar-se des de classes externes com el menú, haurem de crear mètodes als quals podem cridar des del menú.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"/><input id="__tabbed_4_2" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="__tabbed_4_1">Main</label><label for="__tabbed_4_2">Menu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="w">    </span><span class="n">Menu</span><span class="w"> </span><span class="n">menu</span><span class="p">;</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">        </span><span class="n">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Menu</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="p">}</span><span class="w">   </span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">        </span><span class="n">menu</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostraText</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">strText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">strText</span><span class="p">);</span>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span>
<span class="normal"><a href="#__codelineno-36-21">21</a></span>
<span class="normal"><a href="#__codelineno-36-22">22</a></span>
<span class="normal"><a href="#__codelineno-36-23">23</a></span>
<span class="normal"><a href="#__codelineno-36-24">24</a></span>
<span class="normal"><a href="#__codelineno-36-25">25</a></span>
<span class="normal"><a href="#__codelineno-36-26">26</a></span>
<span class="normal"><a href="#__codelineno-36-27">27</a></span>
<span class="normal"><a href="#__codelineno-36-28">28</a></span>
<span class="normal"><a href="#__codelineno-36-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Menu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">boto1</span><span class="p">;</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Menu</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">    </span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">            </span><span class="n">boto1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"BOTÓ"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">150</span><span class="p">);</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">125</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"boto1"</span><span class="p">:</span>
<a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="w">                    </span><span class="n">mostraText</span><span class="p">(</span><span class="s">"Clic botó 1"</span><span class="p">);</span>
<a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-36-25" name="__codelineno-36-25"></a>
<a id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(){</span>
<a id="__codelineno-36-27" name="__codelineno-36-27"></a><span class="w">            </span><span class="n">boto1</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-36-28" name="__codelineno-36-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-36-29" name="__codelineno-36-29"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Al codi anterior hi ha un exemple amb el codi necessari per tal que un botó quan es premi mostre per terminal un text, però compliquem-ho un poc més. A continuació farem una aplicació simple amb tres botons (centrats) dalt d'una pantalla de 640 per 480 píxels on cadascun dels botons el que farà serà pintar la pantalla de fons d'un color concret. Per exemple: un botó que es diga <strong>Roig</strong> i pinte de roig el fons, un botó <strong>Verd</strong> que pinte de verd i finalment un botó <strong>Blau</strong> que pinte de blau.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"/><input id="__tabbed_5_2" name="__tabbed_5" type="radio"/><div class="tabbed-labels"><label for="__tabbed_5_1">Main</label><label for="__tabbed_5_2">Menu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span>
<span class="normal"><a href="#__codelineno-37-11">11</a></span>
<span class="normal"><a href="#__codelineno-37-12">12</a></span>
<span class="normal"><a href="#__codelineno-37-13">13</a></span>
<span class="normal"><a href="#__codelineno-37-14">14</a></span>
<span class="normal"><a href="#__codelineno-37-15">15</a></span>
<span class="normal"><a href="#__codelineno-37-16">16</a></span>
<span class="normal"><a href="#__codelineno-37-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="w">    </span><span class="n">Menu</span><span class="w"> </span><span class="n">menu</span><span class="p">;</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">    </span><span class="n">color</span><span class="w"> </span><span class="n">fons</span><span class="p">;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">        </span><span class="n">fons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">        </span><span class="n">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Menu</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="n">fons</span><span class="p">);</span>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="w">        </span><span class="n">menu</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-14" name="__codelineno-37-14"></a>
<a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostraText</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">strText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-16" name="__codelineno-37-16"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">strText</span><span class="p">);</span>
<a id="__codelineno-37-17" name="__codelineno-37-17"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span>
<span class="normal"><a href="#__codelineno-38-21">21</a></span>
<span class="normal"><a href="#__codelineno-38-22">22</a></span>
<span class="normal"><a href="#__codelineno-38-23">23</a></span>
<span class="normal"><a href="#__codelineno-38-24">24</a></span>
<span class="normal"><a href="#__codelineno-38-25">25</a></span>
<span class="normal"><a href="#__codelineno-38-26">26</a></span>
<span class="normal"><a href="#__codelineno-38-27">27</a></span>
<span class="normal"><a href="#__codelineno-38-28">28</a></span>
<span class="normal"><a href="#__codelineno-38-29">29</a></span>
<span class="normal"><a href="#__codelineno-38-30">30</a></span>
<span class="normal"><a href="#__codelineno-38-31">31</a></span>
<span class="normal"><a href="#__codelineno-38-32">32</a></span>
<span class="normal"><a href="#__codelineno-38-33">33</a></span>
<span class="normal"><a href="#__codelineno-38-34">34</a></span>
<span class="normal"><a href="#__codelineno-38-35">35</a></span>
<span class="normal"><a href="#__codelineno-38-36">36</a></span>
<span class="normal"><a href="#__codelineno-38-37">37</a></span>
<span class="normal"><a href="#__codelineno-38-38">38</a></span>
<span class="normal"><a href="#__codelineno-38-39">39</a></span>
<span class="normal"><a href="#__codelineno-38-40">40</a></span>
<span class="normal"><a href="#__codelineno-38-41">41</a></span>
<span class="normal"><a href="#__codelineno-38-42">42</a></span>
<span class="normal"><a href="#__codelineno-38-43">43</a></span>
<span class="normal"><a href="#__codelineno-38-44">44</a></span>
<span class="normal"><a href="#__codelineno-38-45">45</a></span>
<span class="normal"><a href="#__codelineno-38-46">46</a></span>
<span class="normal"><a href="#__codelineno-38-47">47</a></span>
<span class="normal"><a href="#__codelineno-38-48">48</a></span>
<span class="normal"><a href="#__codelineno-38-49">49</a></span>
<span class="normal"><a href="#__codelineno-38-50">50</a></span>
<span class="normal"><a href="#__codelineno-38-51">51</a></span>
<span class="normal"><a href="#__codelineno-38-52">52</a></span>
<span class="normal"><a href="#__codelineno-38-53">53</a></span>
<span class="normal"><a href="#__codelineno-38-54">54</a></span>
<span class="normal"><a href="#__codelineno-38-55">55</a></span>
<span class="normal"><a href="#__codelineno-38-56">56</a></span>
<span class="normal"><a href="#__codelineno-38-57">57</a></span>
<span class="normal"><a href="#__codelineno-38-58">58</a></span>
<span class="normal"><a href="#__codelineno-38-59">59</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Menu</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">        </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">        </span><span class="n">Button</span><span class="w"> </span><span class="n">btnRoig</span><span class="p">,</span><span class="w"> </span><span class="n">btnVerd</span><span class="p">,</span><span class="w"> </span><span class="n">btnBlau</span><span class="p">;</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">        </span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Menu</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">            </span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">            </span><span class="n">btnRoig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"ROIG"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">            </span><span class="n">btnRoig</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">            </span><span class="n">btnRoig</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">            </span><span class="n">btnRoig</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">            </span><span class="n">btnRoig</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span><span class="w"> </span>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="w">            </span>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="w">            </span><span class="n">btnVerd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"VERD"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">            </span><span class="n">btnVerd</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">            </span><span class="n">btnVerd</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="w">            </span><span class="n">btnVerd</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="w">            </span><span class="n">btnVerd</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span><span class="w"> </span>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="w">            </span>
<a id="__codelineno-38-24" name="__codelineno-38-24"></a><span class="w">            </span><span class="n">btnBlau</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addButton</span><span class="p">(</span><span class="s">"BLAU"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-38-25" name="__codelineno-38-25"></a><span class="w">            </span><span class="n">btnBlau</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">450</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-38-26" name="__codelineno-38-26"></a><span class="w">            </span><span class="n">btnBlau</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-38-27" name="__codelineno-38-27"></a><span class="w">            </span><span class="n">btnBlau</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">));</span>
<a id="__codelineno-38-28" name="__codelineno-38-28"></a><span class="w">            </span><span class="n">btnBlau</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span><span class="w">                 </span>
<a id="__codelineno-38-29" name="__codelineno-38-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-38-30" name="__codelineno-38-30"></a><span class="w">        </span>
<a id="__codelineno-38-31" name="__codelineno-38-31"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-38-32" name="__codelineno-38-32"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-33" name="__codelineno-38-33"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"ROIG"</span><span class="p">:</span>
<a id="__codelineno-38-34" name="__codelineno-38-34"></a><span class="w">                    </span><span class="n">mostraText</span><span class="p">(</span><span class="s">"Pintem de roig"</span><span class="p">);</span>
<a id="__codelineno-38-35" name="__codelineno-38-35"></a><span class="w">                    </span><span class="n">fons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-38-36" name="__codelineno-38-36"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-38-37" name="__codelineno-38-37"></a><span class="w">                </span>
<a id="__codelineno-38-38" name="__codelineno-38-38"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"VERD"</span><span class="p">:</span>
<a id="__codelineno-38-39" name="__codelineno-38-39"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"Pintem de verd"</span><span class="p">);</span>
<a id="__codelineno-38-40" name="__codelineno-38-40"></a><span class="w">                    </span><span class="n">fons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-38-41" name="__codelineno-38-41"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-38-42" name="__codelineno-38-42"></a><span class="w">                </span>
<a id="__codelineno-38-43" name="__codelineno-38-43"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"BLAU"</span><span class="p">:</span>
<a id="__codelineno-38-44" name="__codelineno-38-44"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"Pintem de blau"</span><span class="p">);</span>
<a id="__codelineno-38-45" name="__codelineno-38-45"></a><span class="w">                    </span><span class="n">fons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-38-46" name="__codelineno-38-46"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-38-47" name="__codelineno-38-47"></a><span class="w">                </span>
<a id="__codelineno-38-48" name="__codelineno-38-48"></a><span class="w">                </span><span class="k">default</span><span class="p">:</span>
<a id="__codelineno-38-49" name="__codelineno-38-49"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"Ni idea de que ha passat"</span><span class="p">);</span>
<a id="__codelineno-38-50" name="__codelineno-38-50"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-38-51" name="__codelineno-38-51"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-38-52" name="__codelineno-38-52"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-38-53" name="__codelineno-38-53"></a><span class="w">        </span>
<a id="__codelineno-38-54" name="__codelineno-38-54"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(){</span>
<a id="__codelineno-38-55" name="__codelineno-38-55"></a><span class="w">            </span><span class="n">btnRoig</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-38-56" name="__codelineno-38-56"></a><span class="w">            </span><span class="n">btnVerd</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-38-57" name="__codelineno-38-57"></a><span class="w">            </span><span class="n">btnBlau</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-38-58" name="__codelineno-38-58"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-38-59" name="__codelineno-38-59"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details class="question">
<summary>Activitat 901. Crea una aplicació amb un botó</summary>
<p>Dissenya una aplicació amb un menú que tinga quatre botons.</p>
<div class="highlight"><pre><span></span><code>1. El primer s'encarregarà d'alternar el color de fons de l'aplicació entre pistatxo i fuchsia.
2. El segon demanarà el nom de l'usuari utilitzant la classe JOptionPane i després saludarà amb el text: "Hola ..."
3. El tercer botó dibuixarà cercles del color contrari del fons en una posició aleatòria i de grandària 20 píxels.
4. El quart botó ha de tancar l'aplicació.
</code></pre></div>
</details>
<!--    [Descarrega la solució ací](assets/Tema9/act901.zip)-->
<h2 id="checkbox">CheckBox</h2>
<p>En informàtica, una casella de verificació, check box, checkbox, tickbox o tick box es un element de interacció de la interfície gràfica d'usuari del Sistema Operatiu, que permet a este fer selecciones múltiples d'un conjunto de opcions, marcar respostes, etc.. </p>
<p>Però vegem un exemple. Crearem un checkbox amb sis opcions múltiples que l'usuari podrà marca i desmarcar. Després entrarem més en detall de com controlar els esdeveniments dispara la interacció de l'usuari amb el checkbox.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"/><input id="__tabbed_6_2" name="__tabbed_6" type="radio"/><div class="tabbed-labels"><label for="__tabbed_6_1">Main</label><label for="__tabbed_6_2">Opcions</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="w">    </span><span class="n">Opcions</span><span class="w"> </span><span class="n">opcions</span><span class="p">;</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">        </span><span class="n">opcions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Opcions</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">        </span><span class="n">opcions</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span>
<span class="normal"><a href="#__codelineno-40-20">20</a></span>
<span class="normal"><a href="#__codelineno-40-21">21</a></span>
<span class="normal"><a href="#__codelineno-40-22">22</a></span>
<span class="normal"><a href="#__codelineno-40-23">23</a></span>
<span class="normal"><a href="#__codelineno-40-24">24</a></span>
<span class="normal"><a href="#__codelineno-40-25">25</a></span>
<span class="normal"><a href="#__codelineno-40-26">26</a></span>
<span class="normal"><a href="#__codelineno-40-27">27</a></span>
<span class="normal"><a href="#__codelineno-40-28">28</a></span>
<span class="normal"><a href="#__codelineno-40-29">29</a></span>
<span class="normal"><a href="#__codelineno-40-30">30</a></span>
<span class="normal"><a href="#__codelineno-40-31">31</a></span>
<span class="normal"><a href="#__codelineno-40-32">32</a></span>
<span class="normal"><a href="#__codelineno-40-33">33</a></span>
<span class="normal"><a href="#__codelineno-40-34">34</a></span>
<span class="normal"><a href="#__codelineno-40-35">35</a></span>
<span class="normal"><a href="#__codelineno-40-36">36</a></span>
<span class="normal"><a href="#__codelineno-40-37">37</a></span>
<span class="normal"><a href="#__codelineno-40-38">38</a></span>
<span class="normal"><a href="#__codelineno-40-39">39</a></span>
<span class="normal"><a href="#__codelineno-40-40">40</a></span>
<span class="normal"><a href="#__codelineno-40-41">41</a></span>
<span class="normal"><a href="#__codelineno-40-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Opcions</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">        </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">        </span><span class="n">Button</span><span class="w"> </span><span class="n">boto1</span><span class="p">;</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">        </span><span class="n">CheckBox</span><span class="w"> </span><span class="n">checkbox</span><span class="p">;</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">        </span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Opcions</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">                </span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">            </span><span class="n">checkbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addCheckBox</span><span class="p">(</span><span class="s">"checkBox"</span><span class="p">);</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-40-15" name="__codelineno-40-15"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setColorLabels</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setItemsPerRow</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setSpacingColumn</span><span class="p">(</span><span class="mi">35</span><span class="p">);</span>
<a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">setSpacingRow</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OPCIO1"</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-40-21" name="__codelineno-40-21"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OPCIO2"</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-40-22" name="__codelineno-40-22"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OPCIO3"</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">);</span>
<a id="__codelineno-40-23" name="__codelineno-40-23"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OPCIO4"</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-40-24" name="__codelineno-40-24"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OPCIO5"</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w">    </span>
<a id="__codelineno-40-25" name="__codelineno-40-25"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-40-26" name="__codelineno-40-26"></a><span class="w">        </span>
<a id="__codelineno-40-27" name="__codelineno-40-27"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-28" name="__codelineno-40-28"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-29" name="__codelineno-40-29"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="s">"checkBox"</span><span class="p">:</span>
<a id="__codelineno-40-30" name="__codelineno-40-30"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"CheckBox clicat"</span><span class="p">);</span>
<a id="__codelineno-40-31" name="__codelineno-40-31"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-40-32" name="__codelineno-40-32"></a><span class="w">            </span>
<a id="__codelineno-40-33" name="__codelineno-40-33"></a><span class="w">                </span><span class="k">default</span><span class="p">:</span>
<a id="__codelineno-40-34" name="__codelineno-40-34"></a><span class="w">                    </span><span class="n">println</span><span class="p">(</span><span class="s">"ERROR (controlEvent): "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<a id="__codelineno-40-35" name="__codelineno-40-35"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-40-36" name="__codelineno-40-36"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-40-37" name="__codelineno-40-37"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-40-38" name="__codelineno-40-38"></a><span class="w">        </span>
<a id="__codelineno-40-39" name="__codelineno-40-39"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(){</span>
<a id="__codelineno-40-40" name="__codelineno-40-40"></a><span class="w">            </span><span class="n">checkbox</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-40-41" name="__codelineno-40-41"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-40-42" name="__codelineno-40-42"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Ara ens queda la part en la que obtenim del nostre checkbox quina o quines són les opcions seleccionades, recorda que un checkbox és un control de selecció múltiple, i quines són les accions a realitzar en base a les opcions clicades, és a dir, programar els esdeveniments associats al checkbox. Per això canviarem el nom de les opcions per tal que siguen més significatives del que es suposa que faran.</p>
<p>Canvia al codi anterior les línies <strong>addItem</strong> per les següents:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="w">    </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"ROIG"</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">    </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"FONT GRAN"</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">    </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"VORA"</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">);</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"VERTICAL"</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">    </span><span class="n">checkbox</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"HORITZONTAL"</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w">    </span>
</code></pre></div></td></tr></table></div>
<p>Ara hauriem de implementar el mètode <strong>controlEvent(ControlEvent theEvent)</strong>. Escriu el següent codi i observa el que passa:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">"checkBox"</span><span class="p">:</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">"CheckBox clicat"</span><span class="p">);</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">            </span><span class="n">List</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Toggle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">optionsList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">checkbox</span><span class="p">.</span><span class="na">getItems</span><span class="p">();</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Toggle</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">optionsList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">                </span><span class="n">println</span><span class="p">(</span><span class="s">"opció "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" - "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="na">getState</span><span class="p">());</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="w">        </span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="w">        </span><span class="k">default</span><span class="p">:</span>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">"ERROR (controlEvent): "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<a id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-42-14" name="__codelineno-42-14"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Amb el codi anterior, quan fages clic sobre alguna de les opcions del nostre control de selecció múltiple, es mostraran al terminal totes les opcions com les hem programades i quin valor tenen: true (checked), false (not checked).</p>
<div class="admonition tip">
<p class="admonition-title">Configuració de la font</p>
<p>Segurament hauràs observat que la grandària del text de les opcions costa un poc de llegir. Si vols canviar les característiques de la font que es mostra a les opcions, afegeix la següent línia:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="w">    </span><span class="n">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
</div>
<details class="question">
<summary>Activitat 902. Crea una aplicació amb un checkbox</summary>
<p>Crea una aplicació que tinga una llista d'opcions (checkbox) i un botó. Al llistat d'opcions (checkbox) l'usuari determinarà les característiques d'un rectangle que es dibuixarà quan fem clic sobre el botó.</p>
<p>Les característiques que es podran determinar del rectangle són:</p>
<div class="highlight"><pre><span></span><code>1. Si te vora o no te vora.
2. Si està pintat per dins o no.
3. Si la grandaria de la font es gran o no.
4. El·lipse vertical.
5. El·lipse horitzontal.
</code></pre></div>
<p>L'usuari seleccionarà les opcions que considere i quan faja clic al botó, es modificaran les característiques de l'el·lipse que es dibuixarà al centre de la pantalla de la nostra aplicació.</p>
</details>
<!--    [Descarrega la solució ací](assets/Tema9/act902.zip)-->
<h2 id="llistes-desplegables">Llistes desplegables</h2>
<p>Les llistes desplegables són un tipus de control que permet a l'usuari seleccionar una opció de totes les que conté la llista. Quan una llista desplegable està desactivat només mostra un valor, en canvi si està activat, és a dir, si fem clic sobre ella, desplegarà una llista amb totes les opcions disponibles per tal que l'usuari puga triar-ne alguna.</p>
<p>Aquest tipus de control l'hauràs vist per exemple a formularis de subscripció on pot triar la data de naixement, els mesos solen apareixer representats en una llista desplegable.</p>
<p>Veja'm un exemple. Fem una aplicació simple en la que es mostren tres desplegables on podrem triar la data de naixement (dd/mm/aaaa) i cada vegada que canviem algun element de les nostres llistes desplegables, mostrarà un missatge felicitant-nos l'aniversari.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio"/><input id="__tabbed_7_2" name="__tabbed_7" type="radio"/><div class="tabbed-labels"><label for="__tabbed_7_1">Main</label><label for="__tabbed_7_2">Controls</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="w">    </span><span class="n">Opcions</span><span class="w"> </span><span class="n">opcions</span><span class="p">;</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">        </span><span class="n">opcions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Opcions</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">        </span><span class="n">strDia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="p">;</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="w">        </span><span class="n">strMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"GENER"</span><span class="p">;</span>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="w">        </span><span class="n">strAny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1900"</span><span class="p">;</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="w">        </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="w">        </span><span class="n">opcions</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a><span class="w">        </span><span class="n">textSize</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a><span class="w">        </span><span class="n">textAlign</span><span class="p">(</span><span class="n">CENTER</span><span class="p">);</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a><span class="w">        </span><span class="n">text</span><span class="p">(</span><span class="n">strDia</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" - "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strMes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" - "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strAny</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-45-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-45-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-45-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-45-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-45-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-45-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-45-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-45-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-45-10">10</a></span>
<span class="normal"><a href="#__codelineno-45-11">11</a></span>
<span class="normal"><a href="#__codelineno-45-12">12</a></span>
<span class="normal"><a href="#__codelineno-45-13">13</a></span>
<span class="normal"><a href="#__codelineno-45-14">14</a></span>
<span class="normal"><a href="#__codelineno-45-15">15</a></span>
<span class="normal"><a href="#__codelineno-45-16">16</a></span>
<span class="normal"><a href="#__codelineno-45-17">17</a></span>
<span class="normal"><a href="#__codelineno-45-18">18</a></span>
<span class="normal"><a href="#__codelineno-45-19">19</a></span>
<span class="normal"><a href="#__codelineno-45-20">20</a></span>
<span class="normal"><a href="#__codelineno-45-21">21</a></span>
<span class="normal"><a href="#__codelineno-45-22">22</a></span>
<span class="normal"><a href="#__codelineno-45-23">23</a></span>
<span class="normal"><a href="#__codelineno-45-24">24</a></span>
<span class="normal"><a href="#__codelineno-45-25">25</a></span>
<span class="normal"><a href="#__codelineno-45-26">26</a></span>
<span class="normal"><a href="#__codelineno-45-27">27</a></span>
<span class="normal"><a href="#__codelineno-45-28">28</a></span>
<span class="normal"><a href="#__codelineno-45-29">29</a></span>
<span class="normal"><a href="#__codelineno-45-30">30</a></span>
<span class="normal"><a href="#__codelineno-45-31">31</a></span>
<span class="normal"><a href="#__codelineno-45-32">32</a></span>
<span class="normal"><a href="#__codelineno-45-33">33</a></span>
<span class="normal"><a href="#__codelineno-45-34">34</a></span>
<span class="normal"><a href="#__codelineno-45-35">35</a></span>
<span class="normal"><a href="#__codelineno-45-36">36</a></span>
<span class="normal"><a href="#__codelineno-45-37">37</a></span>
<span class="normal"><a href="#__codelineno-45-38">38</a></span>
<span class="normal"><a href="#__codelineno-45-39">39</a></span>
<span class="normal"><a href="#__codelineno-45-40">40</a></span>
<span class="normal"><a href="#__codelineno-45-41">41</a></span>
<span class="normal"><a href="#__codelineno-45-42">42</a></span>
<span class="normal"><a href="#__codelineno-45-43">43</a></span>
<span class="normal"><a href="#__codelineno-45-44">44</a></span>
<span class="normal"><a href="#__codelineno-45-45">45</a></span>
<span class="normal"><a href="#__codelineno-45-46">46</a></span>
<span class="normal"><a href="#__codelineno-45-47">47</a></span>
<span class="normal"><a href="#__codelineno-45-48">48</a></span>
<span class="normal"><a href="#__codelineno-45-49">49</a></span>
<span class="normal"><a href="#__codelineno-45-50">50</a></span>
<span class="normal"><a href="#__codelineno-45-51">51</a></span>
<span class="normal"><a href="#__codelineno-45-52">52</a></span>
<span class="normal"><a href="#__codelineno-45-53">53</a></span>
<span class="normal"><a href="#__codelineno-45-54">54</a></span>
<span class="normal"><a href="#__codelineno-45-55">55</a></span>
<span class="normal"><a href="#__codelineno-45-56">56</a></span>
<span class="normal"><a href="#__codelineno-45-57">57</a></span>
<span class="normal"><a href="#__codelineno-45-58">58</a></span>
<span class="normal"><a href="#__codelineno-45-59">59</a></span>
<span class="normal"><a href="#__codelineno-45-60">60</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Opcions</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ScrollableList</span><span class="w"> </span><span class="n">ddlDia</span><span class="p">,</span><span class="w"> </span><span class="n">ddlMes</span><span class="p">,</span><span class="w"> </span><span class="n">ddlAny</span><span class="p">;</span>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a><span class="w">        </span>
<a id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Opcions</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-45-9" name="__codelineno-45-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-45-10" name="__codelineno-45-10"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-45-11" name="__codelineno-45-11"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="w">            </span>
<a id="__codelineno-45-13" name="__codelineno-45-13"></a><span class="w">            </span><span class="n">ddlDia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"dia"</span><span class="p">);</span>
<a id="__codelineno-45-14" name="__codelineno-45-14"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setPosition</span><span class="w"> </span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-45-16" name="__codelineno-45-16"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
<a id="__codelineno-45-17" name="__codelineno-45-17"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
<a id="__codelineno-45-18" name="__codelineno-45-18"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-45-19" name="__codelineno-45-19"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">31</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-45-20" name="__codelineno-45-20"></a><span class="w">                </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-45-21" name="__codelineno-45-21"></a><span class="w">            </span>
<a id="__codelineno-45-22" name="__codelineno-45-22"></a><span class="w">            </span><span class="n">ddlMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"mes"</span><span class="p">);</span>
<a id="__codelineno-45-23" name="__codelineno-45-23"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-45-24" name="__codelineno-45-24"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-45-25" name="__codelineno-45-25"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-45-26" name="__codelineno-45-26"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-45-27" name="__codelineno-45-27"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-45-28" name="__codelineno-45-28"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"GENER"</span><span class="p">,</span><span class="w">  </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-45-29" name="__codelineno-45-29"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"FEBRER"</span><span class="p">,</span><span class="w">  </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-45-30" name="__codelineno-45-30"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"MARÇ"</span><span class="p">,</span><span class="w">  </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-45-31" name="__codelineno-45-31"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"ABRIL"</span><span class="p">,</span><span class="w">  </span><span class="mi">4</span><span class="p">);</span>
<a id="__codelineno-45-32" name="__codelineno-45-32"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"MAIG"</span><span class="p">,</span><span class="w">  </span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-45-33" name="__codelineno-45-33"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"JUNY"</span><span class="p">,</span><span class="w">  </span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-45-34" name="__codelineno-45-34"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"JULIOL"</span><span class="p">,</span><span class="w">  </span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-45-35" name="__codelineno-45-35"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"AGOST"</span><span class="p">,</span><span class="w">  </span><span class="mi">8</span><span class="p">);</span>
<a id="__codelineno-45-36" name="__codelineno-45-36"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"SETEMBRE"</span><span class="p">,</span><span class="w">  </span><span class="mi">9</span><span class="p">);</span>
<a id="__codelineno-45-37" name="__codelineno-45-37"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OCTUBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-45-38" name="__codelineno-45-38"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"NOVEMBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">);</span>
<a id="__codelineno-45-39" name="__codelineno-45-39"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"DESEMBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
<a id="__codelineno-45-40" name="__codelineno-45-40"></a><span class="w">            </span>
<a id="__codelineno-45-41" name="__codelineno-45-41"></a><span class="w">            </span><span class="n">ddlAny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"any"</span><span class="p">);</span>
<a id="__codelineno-45-42" name="__codelineno-45-42"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-45-43" name="__codelineno-45-43"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-45-44" name="__codelineno-45-44"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-45-45" name="__codelineno-45-45"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-45-46" name="__codelineno-45-46"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-45-47" name="__codelineno-45-47"></a><span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1950</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2020</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-45-48" name="__codelineno-45-48"></a><span class="w">                </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-45-49" name="__codelineno-45-49"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-45-50" name="__codelineno-45-50"></a><span class="w">        </span>
<a id="__codelineno-45-51" name="__codelineno-45-51"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-52" name="__codelineno-45-52"></a><span class="w">            </span>
<a id="__codelineno-45-53" name="__codelineno-45-53"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-45-54" name="__codelineno-45-54"></a><span class="w">        </span>
<a id="__codelineno-45-55" name="__codelineno-45-55"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-56" name="__codelineno-45-56"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-45-57" name="__codelineno-45-57"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-45-58" name="__codelineno-45-58"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-45-59" name="__codelineno-45-59"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-45-60" name="__codelineno-45-60"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Al codi anterior pots observar que el controlP5 que usem és <strong>ScrollableList</strong>. En total hem instanciant tres ScrollableLists, una per als dies del mes (1-31), la segona per als mesos ("GENER - DESEMBRE") i finalment una altra per a l'any de la data de naixement.</p>
<div class="admonition danger">
<p class="admonition-title">ControlP5 DropDownList</p>
<p>També existeix dins del repositori de controls de la llibreria <strong>ControlP5</strong> el control <strong>DropdownList</strong> però aquest està obsolet i no és recomanable utilitzar-lo si existeixen alternatives.</p>
</div>
<p>Una vegada tenim els controls creats el que hem fet ha sigut afegir-los els items que hi mostraran i el valor que tenen per poder treballar amb ells a posteriori.</p>
<p>La part més complicada d'aquest tipus de controls està en com capturem la informació una vegada la llista llença un esdeveniment (clic normalment o value changed), en altres paraules, què fem quan l'usuari canvie algun valor d'alguna llista desplegable. Mir a el codi i prova'l.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio"/><input id="__tabbed_8_2" name="__tabbed_8" type="radio"/><div class="tabbed-labels"><label for="__tabbed_8_1">Main</label><label for="__tabbed_8_2">Controls</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span>
<span class="normal"><a href="#__codelineno-46-16">16</a></span>
<span class="normal"><a href="#__codelineno-46-17">17</a></span>
<span class="normal"><a href="#__codelineno-46-18">18</a></span>
<span class="normal"><a href="#__codelineno-46-19">19</a></span>
<span class="normal"><a href="#__codelineno-46-20">20</a></span>
<span class="normal"><a href="#__codelineno-46-21">21</a></span>
<span class="normal"><a href="#__codelineno-46-22">22</a></span>
<span class="normal"><a href="#__codelineno-46-23">23</a></span>
<span class="normal"><a href="#__codelineno-46-24">24</a></span>
<span class="normal"><a href="#__codelineno-46-25">25</a></span>
<span class="normal"><a href="#__codelineno-46-26">26</a></span>
<span class="normal"><a href="#__codelineno-46-27">27</a></span>
<span class="normal"><a href="#__codelineno-46-28">28</a></span>
<span class="normal"><a href="#__codelineno-46-29">29</a></span>
<span class="normal"><a href="#__codelineno-46-30">30</a></span>
<span class="normal"><a href="#__codelineno-46-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="w">    </span><span class="n">Opcions</span><span class="w"> </span><span class="n">opcions</span><span class="p">;</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">strDia</span><span class="p">,</span><span class="w"> </span><span class="n">strMes</span><span class="p">,</span><span class="w"> </span><span class="n">strAny</span><span class="p">;</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">        </span><span class="n">opcions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Opcions</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="w">        </span><span class="n">strDia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="p">;</span>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="w">        </span><span class="n">strMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"GENER"</span><span class="p">;</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="w">        </span><span class="n">strAny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1900"</span><span class="p">;</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="w">        </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="w">        </span><span class="n">opcions</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-46-16" name="__codelineno-46-16"></a><span class="w">        </span><span class="n">textSize</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-46-17" name="__codelineno-46-17"></a><span class="w">        </span><span class="n">textAlign</span><span class="p">(</span><span class="n">CENTER</span><span class="p">);</span>
<a id="__codelineno-46-18" name="__codelineno-46-18"></a><span class="w">        </span><span class="n">text</span><span class="p">(</span><span class="n">strDia</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" - "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strMes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" - "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strAny</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-46-19" name="__codelineno-46-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-20" name="__codelineno-46-20"></a>
<a id="__codelineno-46-21" name="__codelineno-46-21"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setDia</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-22" name="__codelineno-46-22"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strDia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
<a id="__codelineno-46-23" name="__codelineno-46-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-24" name="__codelineno-46-24"></a>
<a id="__codelineno-46-25" name="__codelineno-46-25"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMes</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-26" name="__codelineno-46-26"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
<a id="__codelineno-46-27" name="__codelineno-46-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-28" name="__codelineno-46-28"></a>
<a id="__codelineno-46-29" name="__codelineno-46-29"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAny</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-30" name="__codelineno-46-30"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strAny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-46-31" name="__codelineno-46-31"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span>
<span class="normal"><a href="#__codelineno-47-16">16</a></span>
<span class="normal"><a href="#__codelineno-47-17">17</a></span>
<span class="normal"><a href="#__codelineno-47-18">18</a></span>
<span class="normal"><a href="#__codelineno-47-19">19</a></span>
<span class="normal"><a href="#__codelineno-47-20">20</a></span>
<span class="normal"><a href="#__codelineno-47-21">21</a></span>
<span class="normal"><a href="#__codelineno-47-22">22</a></span>
<span class="normal"><a href="#__codelineno-47-23">23</a></span>
<span class="normal"><a href="#__codelineno-47-24">24</a></span>
<span class="normal"><a href="#__codelineno-47-25">25</a></span>
<span class="normal"><a href="#__codelineno-47-26">26</a></span>
<span class="normal"><a href="#__codelineno-47-27">27</a></span>
<span class="normal"><a href="#__codelineno-47-28">28</a></span>
<span class="normal"><a href="#__codelineno-47-29">29</a></span>
<span class="normal"><a href="#__codelineno-47-30">30</a></span>
<span class="normal"><a href="#__codelineno-47-31">31</a></span>
<span class="normal"><a href="#__codelineno-47-32">32</a></span>
<span class="normal"><a href="#__codelineno-47-33">33</a></span>
<span class="normal"><a href="#__codelineno-47-34">34</a></span>
<span class="normal"><a href="#__codelineno-47-35">35</a></span>
<span class="normal"><a href="#__codelineno-47-36">36</a></span>
<span class="normal"><a href="#__codelineno-47-37">37</a></span>
<span class="normal"><a href="#__codelineno-47-38">38</a></span>
<span class="normal"><a href="#__codelineno-47-39">39</a></span>
<span class="normal"><a href="#__codelineno-47-40">40</a></span>
<span class="normal"><a href="#__codelineno-47-41">41</a></span>
<span class="normal"><a href="#__codelineno-47-42">42</a></span>
<span class="normal"><a href="#__codelineno-47-43">43</a></span>
<span class="normal"><a href="#__codelineno-47-44">44</a></span>
<span class="normal"><a href="#__codelineno-47-45">45</a></span>
<span class="normal"><a href="#__codelineno-47-46">46</a></span>
<span class="normal"><a href="#__codelineno-47-47">47</a></span>
<span class="normal"><a href="#__codelineno-47-48">48</a></span>
<span class="normal"><a href="#__codelineno-47-49">49</a></span>
<span class="normal"><a href="#__codelineno-47-50">50</a></span>
<span class="normal"><a href="#__codelineno-47-51">51</a></span>
<span class="normal"><a href="#__codelineno-47-52">52</a></span>
<span class="normal"><a href="#__codelineno-47-53">53</a></span>
<span class="normal"><a href="#__codelineno-47-54">54</a></span>
<span class="normal"><a href="#__codelineno-47-55">55</a></span>
<span class="normal"><a href="#__codelineno-47-56">56</a></span>
<span class="normal"><a href="#__codelineno-47-57">57</a></span>
<span class="normal"><a href="#__codelineno-47-58">58</a></span>
<span class="normal"><a href="#__codelineno-47-59">59</a></span>
<span class="normal"><a href="#__codelineno-47-60">60</a></span>
<span class="normal"><a href="#__codelineno-47-61">61</a></span>
<span class="normal"><a href="#__codelineno-47-62">62</a></span>
<span class="normal"><a href="#__codelineno-47-63">63</a></span>
<span class="normal"><a href="#__codelineno-47-64">64</a></span>
<span class="normal"><a href="#__codelineno-47-65">65</a></span>
<span class="normal"><a href="#__codelineno-47-66">66</a></span>
<span class="normal"><a href="#__codelineno-47-67">67</a></span>
<span class="normal"><a href="#__codelineno-47-68">68</a></span>
<span class="normal"><a href="#__codelineno-47-69">69</a></span>
<span class="normal"><a href="#__codelineno-47-70">70</a></span>
<span class="normal"><a href="#__codelineno-47-71">71</a></span>
<span class="normal"><a href="#__codelineno-47-72">72</a></span>
<span class="normal"><a href="#__codelineno-47-73">73</a></span>
<span class="normal"><a href="#__codelineno-47-74">74</a></span>
<span class="normal"><a href="#__codelineno-47-75">75</a></span>
<span class="normal"><a href="#__codelineno-47-76">76</a></span>
<span class="normal"><a href="#__codelineno-47-77">77</a></span>
<span class="normal"><a href="#__codelineno-47-78">78</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Opcions</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ScrollableList</span><span class="w"> </span><span class="n">ddlDia</span><span class="p">,</span><span class="w"> </span><span class="n">ddlMes</span><span class="p">,</span><span class="w"> </span><span class="n">ddlAny</span><span class="p">;</span>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="w">        </span>
<a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Opcions</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="w">            </span>
<a id="__codelineno-47-13" name="__codelineno-47-13"></a><span class="w">            </span><span class="n">ddlDia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"dia"</span><span class="p">);</span>
<a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setPosition</span><span class="w"> </span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
<a id="__codelineno-47-17" name="__codelineno-47-17"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
<a id="__codelineno-47-18" name="__codelineno-47-18"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-47-19" name="__codelineno-47-19"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">31</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-47-20" name="__codelineno-47-20"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-47-21" name="__codelineno-47-21"></a><span class="w">            </span>
<a id="__codelineno-47-22" name="__codelineno-47-22"></a><span class="w">            </span><span class="n">ddlMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"mes"</span><span class="p">);</span>
<a id="__codelineno-47-23" name="__codelineno-47-23"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-47-24" name="__codelineno-47-24"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-47-25" name="__codelineno-47-25"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-47-26" name="__codelineno-47-26"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-47-27" name="__codelineno-47-27"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-47-28" name="__codelineno-47-28"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"GENER"</span><span class="p">,</span><span class="w">  </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-47-29" name="__codelineno-47-29"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"FEBRER"</span><span class="p">,</span><span class="w">  </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-47-30" name="__codelineno-47-30"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"MARÇ"</span><span class="p">,</span><span class="w">  </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-47-31" name="__codelineno-47-31"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"ABRIL"</span><span class="p">,</span><span class="w">  </span><span class="mi">4</span><span class="p">);</span>
<a id="__codelineno-47-32" name="__codelineno-47-32"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"MAIG"</span><span class="p">,</span><span class="w">  </span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-47-33" name="__codelineno-47-33"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"JUNY"</span><span class="p">,</span><span class="w">  </span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-47-34" name="__codelineno-47-34"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"JULIOL"</span><span class="p">,</span><span class="w">  </span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-47-35" name="__codelineno-47-35"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"AGOST"</span><span class="p">,</span><span class="w">  </span><span class="mi">8</span><span class="p">);</span>
<a id="__codelineno-47-36" name="__codelineno-47-36"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"SETEMBRE"</span><span class="p">,</span><span class="w">  </span><span class="mi">9</span><span class="p">);</span>
<a id="__codelineno-47-37" name="__codelineno-47-37"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"OCTUBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-47-38" name="__codelineno-47-38"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"NOVEMBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">);</span>
<a id="__codelineno-47-39" name="__codelineno-47-39"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"DESEMBRE"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
<a id="__codelineno-47-40" name="__codelineno-47-40"></a><span class="w">            </span>
<a id="__codelineno-47-41" name="__codelineno-47-41"></a><span class="w">            </span><span class="n">ddlAny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addScrollableList</span><span class="p">(</span><span class="s">"any"</span><span class="p">);</span>
<a id="__codelineno-47-42" name="__codelineno-47-42"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setHeight</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-47-43" name="__codelineno-47-43"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-47-44" name="__codelineno-47-44"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setBarHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-47-45" name="__codelineno-47-45"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setItemHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-47-46" name="__codelineno-47-46"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-47-47" name="__codelineno-47-47"></a><span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1950</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2020</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-47-48" name="__codelineno-47-48"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-47-49" name="__codelineno-47-49"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-47-50" name="__codelineno-47-50"></a><span class="w">        </span>
<a id="__codelineno-47-51" name="__codelineno-47-51"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-52" name="__codelineno-47-52"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theEvent</span><span class="p">.</span><span class="na">getController</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-47-53" name="__codelineno-47-53"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getController</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<a id="__codelineno-47-54" name="__codelineno-47-54"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">valor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">ScrollableList</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">).</span><span class="na">getItem</span><span class="p">(</span><span class="n">index</span><span class="p">).</span><span class="na">get</span><span class="p">(</span><span class="s">"name"</span><span class="p">).</span><span class="na">toString</span><span class="p">();</span>
<a id="__codelineno-47-55" name="__codelineno-47-55"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-56" name="__codelineno-47-56"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"dia"</span><span class="p">:</span>
<a id="__codelineno-47-57" name="__codelineno-47-57"></a><span class="w">                </span><span class="n">println</span><span class="p">(</span><span class="s">"dia: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-58" name="__codelineno-47-58"></a><span class="w">                </span><span class="n">setDia</span><span class="p">(</span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-59" name="__codelineno-47-59"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-47-60" name="__codelineno-47-60"></a><span class="w">            </span>
<a id="__codelineno-47-61" name="__codelineno-47-61"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"mes"</span><span class="p">:</span>
<a id="__codelineno-47-62" name="__codelineno-47-62"></a><span class="w">                </span><span class="n">println</span><span class="p">(</span><span class="s">"mes: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-63" name="__codelineno-47-63"></a><span class="w">                </span><span class="n">setMes</span><span class="p">(</span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-64" name="__codelineno-47-64"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-47-65" name="__codelineno-47-65"></a><span class="w">            </span>
<a id="__codelineno-47-66" name="__codelineno-47-66"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"any"</span><span class="p">:</span>
<a id="__codelineno-47-67" name="__codelineno-47-67"></a><span class="w">                </span><span class="n">println</span><span class="p">(</span><span class="s">"any: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-68" name="__codelineno-47-68"></a><span class="w">                </span><span class="n">setAny</span><span class="p">(</span><span class="n">valor</span><span class="p">);</span>
<a id="__codelineno-47-69" name="__codelineno-47-69"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-47-70" name="__codelineno-47-70"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-47-71" name="__codelineno-47-71"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-47-72" name="__codelineno-47-72"></a><span class="w">        </span>
<a id="__codelineno-47-73" name="__codelineno-47-73"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-74" name="__codelineno-47-74"></a><span class="w">            </span><span class="n">ddlDia</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-47-75" name="__codelineno-47-75"></a><span class="w">            </span><span class="n">ddlMes</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-47-76" name="__codelineno-47-76"></a><span class="w">            </span><span class="n">ddlAny</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-47-77" name="__codelineno-47-77"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-47-78" name="__codelineno-47-78"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>A aquest codi se li han afegit els mètodes setDia, setMes i setAny al main per tal que puguen ser cridats des de la classe Opcions on tenim les llistes desplegables. Quan algun valor en alguna llista desplegable canvie, es dispara automàticament el mètode controlEvent. Primer esbrinem quina és la llista que ha provocat aquest esdeveniment amb el <strong>getName()</strong> i després cridem al mètode corresponent del main per tal que modifique els valors de dia, mes o any.</p>
<details class="question">
<summary>Activitat 903. Crea una aplicació amb un desplegable</summary>
<p>Modifica l'exemple anterior per tal que no mostre el resultat dels canvis en les diferents llistes desplegables fins que es premi un botó (Submit) que hi afegiràs.</p>
</details>
<h2 id="radiobutton">RadioButton</h2>
<p>El control RadioButton és un control gràfic que permet a l'usuari escollir només una de les opcions que ens mostra aquest control. Aquesta característica singular converteix els <strong>radiobutton</strong> en diferents als <strong>checkbox</strong>, on sí podem escollir més d'una opció simultània.</p>
<p>El primer que farem serà instanciar un control de la classe radiobutton configurar-lo i que es mostre per pantalla amb les opcions necessàries.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio"/><input id="__tabbed_9_2" name="__tabbed_9" type="radio"/><div class="tabbed-labels"><label for="__tabbed_9_1">Main</label><label for="__tabbed_9_2">Opcions</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="w">    </span><span class="n">Opcions</span><span class="w"> </span><span class="n">opcions</span><span class="p">;</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">        </span><span class="n">opcions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Opcions</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">        </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">        </span><span class="n">opcions</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span>
<span class="normal"><a href="#__codelineno-49-18">18</a></span>
<span class="normal"><a href="#__codelineno-49-19">19</a></span>
<span class="normal"><a href="#__codelineno-49-20">20</a></span>
<span class="normal"><a href="#__codelineno-49-21">21</a></span>
<span class="normal"><a href="#__codelineno-49-22">22</a></span>
<span class="normal"><a href="#__codelineno-49-23">23</a></span>
<span class="normal"><a href="#__codelineno-49-24">24</a></span>
<span class="normal"><a href="#__codelineno-49-25">25</a></span>
<span class="normal"><a href="#__codelineno-49-26">26</a></span>
<span class="normal"><a href="#__codelineno-49-27">27</a></span>
<span class="normal"><a href="#__codelineno-49-28">28</a></span>
<span class="normal"><a href="#__codelineno-49-29">29</a></span>
<span class="normal"><a href="#__codelineno-49-30">30</a></span>
<span class="normal"><a href="#__codelineno-49-31">31</a></span>
<span class="normal"><a href="#__codelineno-49-32">32</a></span>
<span class="normal"><a href="#__codelineno-49-33">33</a></span>
<span class="normal"><a href="#__codelineno-49-34">34</a></span>
<span class="normal"><a href="#__codelineno-49-35">35</a></span>
<span class="normal"><a href="#__codelineno-49-36">36</a></span>
<span class="normal"><a href="#__codelineno-49-37">37</a></span>
<span class="normal"><a href="#__codelineno-49-38">38</a></span>
<span class="normal"><a href="#__codelineno-49-39">39</a></span>
<span class="normal"><a href="#__codelineno-49-40">40</a></span>
<span class="normal"><a href="#__codelineno-49-41">41</a></span>
<span class="normal"><a href="#__codelineno-49-42">42</a></span>
<span class="normal"><a href="#__codelineno-49-43">43</a></span>
<span class="normal"><a href="#__codelineno-49-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Opcions</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">RadioButton</span><span class="w"> </span><span class="n">r1</span><span class="p">;</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="w">        </span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Opcions</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">){</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">            </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">            </span><span class="n">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">                </span>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">            </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span><span class="mi">230</span><span class="p">);</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">            </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addRadioButton</span><span class="p">(</span><span class="s">"radioButton"</span><span class="p">);</span>
<a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="na">y</span><span class="p">);</span>
<a id="__codelineno-49-17" name="__codelineno-49-17"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-49-18" name="__codelineno-49-18"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setColorForeground</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">250</span><span class="p">));</span>
<a id="__codelineno-49-19" name="__codelineno-49-19"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-49-20" name="__codelineno-49-20"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setColorLabel</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-49-21" name="__codelineno-49-21"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setItemsPerRow</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-49-22" name="__codelineno-49-22"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">setSpacingColumn</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span>
<a id="__codelineno-49-23" name="__codelineno-49-23"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"ROIG"</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-24" name="__codelineno-49-24"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"VERD"</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-49-25" name="__codelineno-49-25"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"BLAU"</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-49-26" name="__codelineno-49-26"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"FUCHSIA"</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
<a id="__codelineno-49-27" name="__codelineno-49-27"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="s">"PISTATXO"</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-49-28" name="__codelineno-49-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-49-29" name="__codelineno-49-29"></a><span class="w">        </span>
<a id="__codelineno-49-30" name="__codelineno-49-30"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-31" name="__codelineno-49-31"></a><span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">"clic"</span><span class="p">);</span>
<a id="__codelineno-49-32" name="__codelineno-49-32"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-49-33" name="__codelineno-49-33"></a><span class="w">        </span>
<a id="__codelineno-49-34" name="__codelineno-49-34"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-35" name="__codelineno-49-35"></a><span class="w">            </span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-49-36" name="__codelineno-49-36"></a><span class="w">            </span><span class="n">textSize</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
<a id="__codelineno-49-37" name="__codelineno-49-37"></a><span class="w">            </span><span class="n">text</span><span class="w"> </span><span class="p">(</span><span class="s">"RADIO BUTTON LIST"</span><span class="p">,</span><span class="n">position</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="mi">110</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="na">y</span><span class="o">-</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-49-38" name="__codelineno-49-38"></a><span class="w">            </span><span class="n">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-49-39" name="__codelineno-49-39"></a><span class="w">            </span><span class="n">strokeWeight</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-40" name="__codelineno-49-40"></a><span class="w">            </span><span class="n">rect</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="na">x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="na">y</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">385</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-49-41" name="__codelineno-49-41"></a><span class="w">            </span><span class="n">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-49-42" name="__codelineno-49-42"></a><span class="w">            </span><span class="n">r1</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-49-43" name="__codelineno-49-43"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-49-44" name="__codelineno-49-44"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Finalment i igual que hem estat fent amb els controls vistos fins ara, ens quedaria programar el seu comportament. El que s'ha de fer és implementariem el mètode <strong>controlEvent</strong> fent que aquest cride als mètodes necessaris a la classe principal <strong>Main</strong>.  </p>
<p>El que farem en aquesta aplicació és assignar un color de fons a cada opció de tal forma que quan seleccionem alguna opció, el color del fons de l'aplicació canvie a l'escollit. Per tant serà necessari implementar un mètode <strong>canviaColor(color c)</strong> a la classe principal que siga accessible des del mètode <strong>controlEvent</strong> de la classe <strong>Opcions</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span>
<span class="normal"><a href="#__codelineno-50-23">23</a></span>
<span class="normal"><a href="#__codelineno-50-24">24</a></span>
<span class="normal"><a href="#__codelineno-50-25">25</a></span>
<span class="normal"><a href="#__codelineno-50-26">26</a></span>
<span class="normal"><a href="#__codelineno-50-27">27</a></span>
<span class="normal"><a href="#__codelineno-50-28">28</a></span>
<span class="normal"><a href="#__codelineno-50-29">29</a></span>
<span class="normal"><a href="#__codelineno-50-30">30</a></span>
<span class="normal"><a href="#__codelineno-50-31">31</a></span>
<span class="normal"><a href="#__codelineno-50-32">32</a></span>
<span class="normal"><a href="#__codelineno-50-33">33</a></span>
<span class="normal"><a href="#__codelineno-50-34">34</a></span>
<span class="normal"><a href="#__codelineno-50-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="w"> </span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEVent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="w">        </span>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="w">        </span>
<a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">        </span>
<a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span>
<a id="__codelineno-50-20" name="__codelineno-50-20"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">250</span><span class="p">);</span>
<a id="__codelineno-50-21" name="__codelineno-50-21"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-22" name="__codelineno-50-22"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-23" name="__codelineno-50-23"></a><span class="w">        </span>
<a id="__codelineno-50-24" name="__codelineno-50-24"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-50-25" name="__codelineno-50-25"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="mi">225</span><span class="p">,</span><span class="mi">140</span><span class="p">);</span>
<a id="__codelineno-50-26" name="__codelineno-50-26"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-27" name="__codelineno-50-27"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-28" name="__codelineno-50-28"></a><span class="w">        </span>
<a id="__codelineno-50-29" name="__codelineno-50-29"></a><span class="w">        </span><span class="k">default</span><span class="p">:</span>
<a id="__codelineno-50-30" name="__codelineno-50-30"></a><span class="w">            </span><span class="n">colorActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-50-31" name="__codelineno-50-31"></a><span class="w">            </span><span class="n">canviaColor</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-32" name="__codelineno-50-32"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-50-33" name="__codelineno-50-33"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-50-34" name="__codelineno-50-34"></a><span class="w">        </span><span class="n">r1</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">colorActive</span><span class="p">);</span>
<a id="__codelineno-50-35" name="__codelineno-50-35"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">canviaColor</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w">  </span><span class="c1">// pinta és una variable global de l'arxiu principal</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Nomes quedaria al draw indicar que el background s'ha de pintar amb el valor que conté la variable global <strong>pinta</strong>.</p>
<details class="question">
<summary>Activitat 904. Crea una aplicació amb un radiobutton</summary>
<p>Dissenya una aplicació en la que utilitzes mínim un radiobutton amb 5 opcions diferents. Eres lliure de programar el seu comportament com consideres.</p>
</details>
<h2 id="textfield">TextField</h2>
<p>Un <strong>TextField</strong> és un control gràfic d'interfície d'usuari, que deuria habilitar a l'usuari per poder introduir informació en forma de text per tal que puga ser utilitzada per una aplicació.</p>
<p>A continuació mostrem un exemple de com es podria utilitzar un textField, des de mostrar-lo per pantalla, configurar-lo i controlar els esdeveniments que llenci.  Mira el codi i fixa't com és molt semblant al que estem fent fins ara amb la resta de controls de la llibreria <strong>controlP5</strong>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio"/><input id="__tabbed_10_2" name="__tabbed_10" type="radio"/><div class="tabbed-labels"><label for="__tabbed_10_1">Main</label><label for="__tabbed_10_2">Controls</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span>
<span class="normal"><a href="#__codelineno-52-11">11</a></span>
<span class="normal"><a href="#__codelineno-52-12">12</a></span>
<span class="normal"><a href="#__codelineno-52-13">13</a></span>
<span class="normal"><a href="#__codelineno-52-14">14</a></span>
<span class="normal"><a href="#__codelineno-52-15">15</a></span>
<span class="normal"><a href="#__codelineno-52-16">16</a></span>
<span class="normal"><a href="#__codelineno-52-17">17</a></span>
<span class="normal"><a href="#__codelineno-52-18">18</a></span>
<span class="normal"><a href="#__codelineno-52-19">19</a></span>
<span class="normal"><a href="#__codelineno-52-20">20</a></span>
<span class="normal"><a href="#__codelineno-52-21">21</a></span>
<span class="normal"><a href="#__codelineno-52-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">strNom</span><span class="p">;</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="w">    </span><span class="n">Controls</span><span class="w"> </span><span class="n">control</span><span class="p">;</span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="w">        </span><span class="n">control</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Controls</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="w">        </span><span class="n">strNom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a>
<a id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-11" name="__codelineno-52-11"></a><span class="w">        </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-52-12" name="__codelineno-52-12"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-52-13" name="__codelineno-52-13"></a><span class="w">        </span><span class="n">control</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-52-14" name="__codelineno-52-14"></a><span class="w">        </span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-52-15" name="__codelineno-52-15"></a><span class="w">        </span><span class="n">textSize</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-52-16" name="__codelineno-52-16"></a><span class="w">        </span><span class="n">textAlign</span><span class="p">(</span><span class="n">CENTER</span><span class="p">);</span>
<a id="__codelineno-52-17" name="__codelineno-52-17"></a><span class="w">        </span><span class="n">text</span><span class="p">(</span><span class="s">"Hola "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">strNom</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-52-18" name="__codelineno-52-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-52-19" name="__codelineno-52-19"></a>
<a id="__codelineno-52-20" name="__codelineno-52-20"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">theValue</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-21" name="__codelineno-52-21"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strNom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theValue</span><span class="p">;</span>
<a id="__codelineno-52-22" name="__codelineno-52-22"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span>
<span class="normal"><a href="#__codelineno-53-20">20</a></span>
<span class="normal"><a href="#__codelineno-53-21">21</a></span>
<span class="normal"><a href="#__codelineno-53-22">22</a></span>
<span class="normal"><a href="#__codelineno-53-23">23</a></span>
<span class="normal"><a href="#__codelineno-53-24">24</a></span>
<span class="normal"><a href="#__codelineno-53-25">25</a></span>
<span class="normal"><a href="#__codelineno-53-26">26</a></span>
<span class="normal"><a href="#__codelineno-53-27">27</a></span>
<span class="normal"><a href="#__codelineno-53-28">28</a></span>
<span class="normal"><a href="#__codelineno-53-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Controls</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Textfield</span><span class="w"> </span><span class="n">txtField</span><span class="p">;</span>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">        </span>
<a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Controls</span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"FreeMono"</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="w">            </span>
<a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">txtField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addTextfield</span><span class="p">(</span><span class="s">"NOM"</span><span class="p">,(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="na">x</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pos</span><span class="p">.</span><span class="na">y</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">txtField</span><span class="p">.</span><span class="na">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">txtField</span><span class="p">.</span><span class="na">setColorActive</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">txtField</span><span class="p">.</span><span class="na">setColorBackground</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">));</span>
<a id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">txtField</span><span class="p">.</span><span class="na">setColorCaptionLabel</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="w">        </span>
<a id="__codelineno-53-21" name="__codelineno-53-21"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-22" name="__codelineno-53-22"></a><span class="w">            </span><span class="n">txtField</span><span class="p">.</span><span class="na">show</span><span class="p">();</span>
<a id="__codelineno-53-23" name="__codelineno-53-23"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-53-24" name="__codelineno-53-24"></a><span class="w">        </span>
<a id="__codelineno-53-25" name="__codelineno-53-25"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-26" name="__codelineno-53-26"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">"NOM"</span><span class="p">)</span>
<a id="__codelineno-53-27" name="__codelineno-53-27"></a><span class="w">            </span><span class="n">setName</span><span class="p">(</span><span class="n">txtField</span><span class="p">.</span><span class="na">getText</span><span class="p">());</span>
<a id="__codelineno-53-28" name="__codelineno-53-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-53-29" name="__codelineno-53-29"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Input TextArea</p>
<p>Un textArea és molt semblant al textField revisant un poc la seua documentació, és fàcil d'adaptar el codi anterior i convertir que textField que hem utilitzat en un textArea.</p>
</div>
<details class="question">
<summary>Activitat 905. Crea una aplicació amb un camp de text</summary>
<p>Dissenya la típica pantalla de login en la que es demana un usuari i una contrasenya. Quan s'introdueixen les dades s'ha de poder premer el botó de login que també hauràs de posar al teu formulari.</p>
</details>
<h2 id="slide">Slide</h2>
<p>Per acabar amb aquest tema veurem un control anomenat <strong>Slider</strong>. En l'exemple que mostrarem a continuació, disposarem de tres controls de tipus slide que ens indicaran el percentatge (0-100) de color <strong>roig</strong>, <strong>verd</strong> i <strong>blau</strong> amb els que pintarem el fons de la pantalla.</p>
<p>Mira el codi següent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio"/><input id="__tabbed_11_2" name="__tabbed_11" type="radio"/><div class="tabbed-labels"><label for="__tabbed_11_1">Main</label><label for="__tabbed_11_2">Controls</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span>
<span class="normal"><a href="#__codelineno-54-14">14</a></span>
<span class="normal"><a href="#__codelineno-54-15">15</a></span>
<span class="normal"><a href="#__codelineno-54-16">16</a></span>
<span class="normal"><a href="#__codelineno-54-17">17</a></span>
<span class="normal"><a href="#__codelineno-54-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="w">    </span><span class="n">Controls</span><span class="w"> </span><span class="n">control</span><span class="p">;</span>
<a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="w">    </span><span class="n">color</span><span class="w"> </span><span class="n">pinta</span><span class="p">;</span>
<a id="__codelineno-54-3" name="__codelineno-54-3"></a>
<a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="w">        </span><span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">);</span>
<a id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="w">        </span><span class="n">control</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Controls</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">));</span>
<a id="__codelineno-54-7" name="__codelineno-54-7"></a><span class="w">        </span><span class="n">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-54-8" name="__codelineno-54-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-54-9" name="__codelineno-54-9"></a>
<a id="__codelineno-54-10" name="__codelineno-54-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-11" name="__codelineno-54-11"></a><span class="w">        </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-54-12" name="__codelineno-54-12"></a><span class="w">        </span><span class="n">background</span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<a id="__codelineno-54-13" name="__codelineno-54-13"></a><span class="w">        </span><span class="n">control</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<a id="__codelineno-54-14" name="__codelineno-54-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-54-15" name="__codelineno-54-15"></a>
<a id="__codelineno-54-16" name="__codelineno-54-16"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setColor</span><span class="w"> </span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-17" name="__codelineno-54-17"></a><span class="w">        </span><span class="n">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<a id="__codelineno-54-18" name="__codelineno-54-18"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span>
<span class="normal"><a href="#__codelineno-55-13">13</a></span>
<span class="normal"><a href="#__codelineno-55-14">14</a></span>
<span class="normal"><a href="#__codelineno-55-15">15</a></span>
<span class="normal"><a href="#__codelineno-55-16">16</a></span>
<span class="normal"><a href="#__codelineno-55-17">17</a></span>
<span class="normal"><a href="#__codelineno-55-18">18</a></span>
<span class="normal"><a href="#__codelineno-55-19">19</a></span>
<span class="normal"><a href="#__codelineno-55-20">20</a></span>
<span class="normal"><a href="#__codelineno-55-21">21</a></span>
<span class="normal"><a href="#__codelineno-55-22">22</a></span>
<span class="normal"><a href="#__codelineno-55-23">23</a></span>
<span class="normal"><a href="#__codelineno-55-24">24</a></span>
<span class="normal"><a href="#__codelineno-55-25">25</a></span>
<span class="normal"><a href="#__codelineno-55-26">26</a></span>
<span class="normal"><a href="#__codelineno-55-27">27</a></span>
<span class="normal"><a href="#__codelineno-55-28">28</a></span>
<span class="normal"><a href="#__codelineno-55-29">29</a></span>
<span class="normal"><a href="#__codelineno-55-30">30</a></span>
<span class="normal"><a href="#__codelineno-55-31">31</a></span>
<span class="normal"><a href="#__codelineno-55-32">32</a></span>
<span class="normal"><a href="#__codelineno-55-33">33</a></span>
<span class="normal"><a href="#__codelineno-55-34">34</a></span>
<span class="normal"><a href="#__codelineno-55-35">35</a></span>
<span class="normal"><a href="#__codelineno-55-36">36</a></span>
<span class="normal"><a href="#__codelineno-55-37">37</a></span>
<span class="normal"><a href="#__codelineno-55-38">38</a></span>
<span class="normal"><a href="#__codelineno-55-39">39</a></span>
<span class="normal"><a href="#__codelineno-55-40">40</a></span>
<span class="normal"><a href="#__codelineno-55-41">41</a></span>
<span class="normal"><a href="#__codelineno-55-42">42</a></span>
<span class="normal"><a href="#__codelineno-55-43">43</a></span>
<span class="normal"><a href="#__codelineno-55-44">44</a></span>
<span class="normal"><a href="#__codelineno-55-45">45</a></span>
<span class="normal"><a href="#__codelineno-55-46">46</a></span>
<span class="normal"><a href="#__codelineno-55-47">47</a></span>
<span class="normal"><a href="#__codelineno-55-48">48</a></span>
<span class="normal"><a href="#__codelineno-55-49">49</a></span>
<span class="normal"><a href="#__codelineno-55-50">50</a></span>
<span class="normal"><a href="#__codelineno-55-51">51</a></span>
<span class="normal"><a href="#__codelineno-55-52">52</a></span>
<span class="normal"><a href="#__codelineno-55-53">53</a></span>
<span class="normal"><a href="#__codelineno-55-54">54</a></span>
<span class="normal"><a href="#__codelineno-55-55">55</a></span>
<span class="normal"><a href="#__codelineno-55-56">56</a></span>
<span class="normal"><a href="#__codelineno-55-57">57</a></span>
<span class="normal"><a href="#__codelineno-55-58">58</a></span>
<span class="normal"><a href="#__codelineno-55-59">59</a></span>
<span class="normal"><a href="#__codelineno-55-60">60</a></span>
<span class="normal"><a href="#__codelineno-55-61">61</a></span>
<span class="normal"><a href="#__codelineno-55-62">62</a></span>
<span class="normal"><a href="#__codelineno-55-63">63</a></span>
<span class="normal"><a href="#__codelineno-55-64">64</a></span>
<span class="normal"><a href="#__codelineno-55-65">65</a></span>
<span class="normal"><a href="#__codelineno-55-66">66</a></span>
<span class="normal"><a href="#__codelineno-55-67">67</a></span>
<span class="normal"><a href="#__codelineno-55-68">68</a></span>
<span class="normal"><a href="#__codelineno-55-69">69</a></span>
<span class="normal"><a href="#__codelineno-55-70">70</a></span>
<span class="normal"><a href="#__codelineno-55-71">71</a></span>
<span class="normal"><a href="#__codelineno-55-72">72</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="w">    </span><span class="kn">import</span><span class="w"> </span><span class="nn">controlP5.*</span><span class="p">;</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Controls</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ControlListener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">ControlP5</span><span class="w"> </span><span class="n">cp5</span><span class="p">;</span>
<a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Slider</span><span class="w"> </span><span class="n">sldRed</span><span class="p">,</span><span class="w"> </span><span class="n">sldGreen</span><span class="p">,</span><span class="w"> </span><span class="n">sldBlue</span><span class="p">;</span>
<a id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iRed</span><span class="p">,</span><span class="w"> </span><span class="n">iGreen</span><span class="p">,</span><span class="w"> </span><span class="n">iBlue</span><span class="p">;</span>
<a id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="w">        </span>
<a id="__codelineno-55-9" name="__codelineno-55-9"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Controls</span><span class="w"> </span><span class="p">(</span><span class="n">PApplet</span><span class="w"> </span><span class="n">parent</span><span class="p">,</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-10" name="__codelineno-55-10"></a><span class="w">            </span>
<a id="__codelineno-55-11" name="__codelineno-55-11"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">iRed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">iGreen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-55-13" name="__codelineno-55-13"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">iBlue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-55-14" name="__codelineno-55-14"></a><span class="w">            </span><span class="n">color</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">iRed</span><span class="p">,</span><span class="w"> </span><span class="n">iGreen</span><span class="p">,</span><span class="w"> </span><span class="n">iBlue</span><span class="p">);</span>
<a id="__codelineno-55-15" name="__codelineno-55-15"></a><span class="w">            </span><span class="n">setColor</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<a id="__codelineno-55-16" name="__codelineno-55-16"></a><span class="w">            </span>
<a id="__codelineno-55-17" name="__codelineno-55-17"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<a id="__codelineno-55-18" name="__codelineno-55-18"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
<a id="__codelineno-55-19" name="__codelineno-55-19"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="p">.</span><span class="na">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-55-20" name="__codelineno-55-20"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">cp5</span><span class="p">.</span><span class="na">setFont</span><span class="p">(</span><span class="n">createFont</span><span class="p">(</span><span class="s">"FreeMono"</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-55-21" name="__codelineno-55-21"></a><span class="w">            </span>
<a id="__codelineno-55-22" name="__codelineno-55-22"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addSlider</span><span class="p">(</span><span class="s">"ROIG"</span><span class="p">);</span>
<a id="__codelineno-55-23" name="__codelineno-55-23"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">pos</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="mi">25</span><span class="p">);</span>
<a id="__codelineno-55-24" name="__codelineno-55-24"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-55-25" name="__codelineno-55-25"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-55-26" name="__codelineno-55-26"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">setLabel</span><span class="p">(</span><span class="s">"ROIG (0-255)"</span><span class="p">);</span>
<a id="__codelineno-55-27" name="__codelineno-55-27"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">getCaptionLabel</span><span class="p">().</span><span class="na">align</span><span class="p">(</span><span class="n">ControlP5</span><span class="p">.</span><span class="na">LEFT</span><span class="p">,</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">.</span><span class="na">TOP_OUTSIDE</span><span class="p">).</span><span class="na">setPaddingX</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-55-28" name="__codelineno-55-28"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldRed</span><span class="p">.</span><span class="na">setColorCaptionLabel</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-55-29" name="__codelineno-55-29"></a><span class="w">            </span>
<a id="__codelineno-55-30" name="__codelineno-55-30"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addSlider</span><span class="p">(</span><span class="s">"VERD"</span><span class="p">);</span>
<a id="__codelineno-55-31" name="__codelineno-55-31"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">pos</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="mi">70</span><span class="p">);</span>
<a id="__codelineno-55-32" name="__codelineno-55-32"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-55-33" name="__codelineno-55-33"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-55-34" name="__codelineno-55-34"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">setLabel</span><span class="p">(</span><span class="s">"VERD (0-255)"</span><span class="p">);</span>
<a id="__codelineno-55-35" name="__codelineno-55-35"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">getCaptionLabel</span><span class="p">().</span><span class="na">align</span><span class="p">(</span><span class="n">ControlP5</span><span class="p">.</span><span class="na">LEFT</span><span class="p">,</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">.</span><span class="na">TOP_OUTSIDE</span><span class="p">).</span><span class="na">setPaddingX</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-55-36" name="__codelineno-55-36"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldGreen</span><span class="p">.</span><span class="na">setColorCaptionLabel</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-55-37" name="__codelineno-55-37"></a><span class="w">            </span>
<a id="__codelineno-55-38" name="__codelineno-55-38"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp5</span><span class="p">.</span><span class="na">addSlider</span><span class="p">(</span><span class="s">"BLAU"</span><span class="p">);</span>
<a id="__codelineno-55-39" name="__codelineno-55-39"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">setPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">pos</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="mi">115</span><span class="p">);</span>
<a id="__codelineno-55-40" name="__codelineno-55-40"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-55-41" name="__codelineno-55-41"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">setSize</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-55-42" name="__codelineno-55-42"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">setLabel</span><span class="p">(</span><span class="s">"BLAU (0-255)"</span><span class="p">);</span>
<a id="__codelineno-55-43" name="__codelineno-55-43"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">getCaptionLabel</span><span class="p">().</span><span class="na">align</span><span class="p">(</span><span class="n">ControlP5</span><span class="p">.</span><span class="na">LEFT</span><span class="p">,</span><span class="w"> </span><span class="n">ControlP5</span><span class="p">.</span><span class="na">TOP_OUTSIDE</span><span class="p">).</span><span class="na">setPaddingX</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-55-44" name="__codelineno-55-44"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">sldBlue</span><span class="p">.</span><span class="na">setColorCaptionLabel</span><span class="p">(</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-55-45" name="__codelineno-55-45"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-55-46" name="__codelineno-55-46"></a><span class="w">        </span>
<a id="__codelineno-55-47" name="__codelineno-55-47"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-48" name="__codelineno-55-48"></a><span class="w">            </span><span class="n">fill</span><span class="p">(</span><span class="mi">210</span><span class="p">);</span>
<a id="__codelineno-55-49" name="__codelineno-55-49"></a><span class="w">            </span><span class="n">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a id="__codelineno-55-50" name="__codelineno-55-50"></a><span class="w">            </span><span class="n">strokeWeight</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-55-51" name="__codelineno-55-51"></a><span class="w">            </span><span class="n">rect</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="n">pos</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>
<a id="__codelineno-55-52" name="__codelineno-55-52"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-55-53" name="__codelineno-55-53"></a><span class="w">        </span>
<a id="__codelineno-55-54" name="__codelineno-55-54"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">controlEvent</span><span class="p">(</span><span class="n">ControlEvent</span><span class="w"> </span><span class="n">theEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-55" name="__codelineno-55-55"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getController</span><span class="p">().</span><span class="na">getName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-56" name="__codelineno-55-56"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"ROIG"</span><span class="p">:</span>
<a id="__codelineno-55-57" name="__codelineno-55-57"></a><span class="w">                </span><span class="n">iRed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">theEvent</span><span class="p">.</span><span class="na">getController</span><span class="p">().</span><span class="na">getValue</span><span class="p">();</span>
<a id="__codelineno-55-58" name="__codelineno-55-58"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-55-59" name="__codelineno-55-59"></a><span class="w">            </span>
<a id="__codelineno-55-60" name="__codelineno-55-60"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"VERD"</span><span class="p">:</span>
<a id="__codelineno-55-61" name="__codelineno-55-61"></a><span class="w">                </span><span class="n">iGreen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">cp5</span><span class="p">.</span><span class="na">getController</span><span class="p">(</span><span class="s">"VERD"</span><span class="p">).</span><span class="na">getValue</span><span class="p">();</span>
<a id="__codelineno-55-62" name="__codelineno-55-62"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-55-63" name="__codelineno-55-63"></a><span class="w">            </span>
<a id="__codelineno-55-64" name="__codelineno-55-64"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s">"BLAU"</span><span class="p">:</span>
<a id="__codelineno-55-65" name="__codelineno-55-65"></a><span class="w">                </span><span class="n">iBlue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">cp5</span><span class="p">.</span><span class="na">getController</span><span class="p">(</span><span class="s">"BLAU"</span><span class="p">).</span><span class="na">getValue</span><span class="p">();</span>
<a id="__codelineno-55-66" name="__codelineno-55-66"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-55-67" name="__codelineno-55-67"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-55-68" name="__codelineno-55-68"></a><span class="w">            </span>
<a id="__codelineno-55-69" name="__codelineno-55-69"></a><span class="w">            </span><span class="n">color</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">iRed</span><span class="p">,</span><span class="n">iGreen</span><span class="p">,</span><span class="n">iBlue</span><span class="p">);</span>
<a id="__codelineno-55-70" name="__codelineno-55-70"></a><span class="w">            </span><span class="n">setColor</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<a id="__codelineno-55-71" name="__codelineno-55-71"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-55-72" name="__codelineno-55-72"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details class="question">
<summary>Activitat 906. Amplia l'exemple anterior</summary>
<p>Basant-se en l'exemple anterior, afegeix un slider més per tal que també es puga modificar el valor alpha del color de fons.</p>
</details>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "toc.integrate", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
</body>
</html>