
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Tema%2006.%20Desenvolupament%20de%20Classes/" rel="prev"/>
<link href="../Tema%2008.%20Col%C2%B7leccions/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.50" name="generator"/>
<title>07.- Entrada, eixida i gràfics - PROGRAMACIÓ 1DAW</title>
<link href="../assets/stylesheets/main.a40c8224.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheet/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.9/mermaid.neutral.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tema-7-entrada-eixida-i-grafics">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-header__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PROGRAMACIÓ 1DAW
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              07.- Entrada, eixida i gràfics
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Canvia a mode fosc" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Canvia a mode fosc">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"></path></svg>
</label>
<input aria-label="Canvia a preferència del sistema" class="md-option" data-md-color-accent="white" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Canvia a preferència del sistema">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-nav__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    PROGRAMACIÓ 1DAW
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Índex
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2001.%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/">
<span class="md-ellipsis">
    01.- Introducció a la programació
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2002.%20El%20llenguatge%20Java/">
<span class="md-ellipsis">
    02.- El llenguatge Java
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2003.%20Programaci%C3%B3%20Orientada%20a%20Objectes/">
<span class="md-ellipsis">
    03.- Prog. Orientada a Objectes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2004.%20Estructures%20de%20Control/">
<span class="md-ellipsis">
    04.- Estructures de Control
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2005.%20Programaci%C3%B3%20Modular/">
<span class="md-ellipsis">
    05.- Programació modular
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2006.%20Desenvolupament%20de%20Classes/">
<span class="md-ellipsis">
    06.- Desenvolupament de classes
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    07.- Entrada, eixida i gràfics
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    07.- Entrada, eixida i gràfics
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
<span class="md-ellipsis">
      Introducció
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#entrada-i-eixida-basiques">
<span class="md-ellipsis">
      Entrada i eixida bàsiques
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#entrada-i-eixida-per-consola-en-processing-ide">
<span class="md-ellipsis">
      Entrada i eixida per consola en Processing IDE
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio-als-fitxers">
<span class="md-ellipsis">
      Introducció als fitxers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fitxers-de-text-guardar-i-recuperar-informacio">
<span class="md-ellipsis">
      Fitxers de text: guardar i recuperar informació
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2008.%20Col%C2%B7leccions/">
<span class="md-ellipsis">
    08.- Col·leccions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2009.%20Her%C3%A8ncia%2C%20polimorfisme%20i%20interf%C3%ADcies/">
<span class="md-ellipsis">
    09.- Herència, polimorfisme i interfícies
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2010.%20Bases%20de%20dades%20relacionals/">
<span class="md-ellipsis">
    10.- Bases de dades relacionals
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tema-7-entrada-eixida-i-grafics">Tema 7. Entrada, eixida i gràfics</h1>
<div class="admonition danger">
<p class="admonition-title">Resultat d'aprenentatge associat</p>
<p><strong>RA5. Realitza operacions d'entrada i sortida d'informació utilitzant procediments específics del llenguatge i llibreries de classes..</strong></p>
</div>
<h3 id="criteris-davaluacio">Criteris d'avaluació</h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.1. S'ha utilitzat la consola per realitzar operacions d'entrada i sortida d'informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.2. S'han aplicat formats en la visualització de la informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.3. S'han reconegut les possibilitats d'entrada / sortida del llenguatge i les llibreries associades.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.4. S'han utilitzat fitxers per emmagatzemar i recuperar informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.5. S'han creat programes que utilitzin diversos mètodes d'accés al contingut dels fitxers.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> RA5.6. S'han utilitzat les eines de l'entorn de desenvolupament per crear interfícies gràfics d'usuari simples.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.7. S'han programat controladors d'esdeveniments.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.8. S'han escrit programes que utilitzin interfícies gràfics per a l'entrada i sortida d'informació.
Tainted Love    Imelda May</li>
</ul>
<h2 id="introduccio">Introducció</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>“Un programa es comunica amb l’usuari i amb el món exterior”</strong></p>
</div>
<p>Una part important de tot llenguatge de programació és com s’establirà el contacte amb l’exterior, bé siga mitjançant la <strong>consola</strong> o a través del <strong>sistema de fitxers</strong>, per finalment poder actuar amb l’usuari d’una aplicació en execució. Ambdós, consola i sistema de fitxers, poden funcionar tant d’entrada als nostres programes com d’eixida.</p>
<p>Java defineix una abstracció, els <strong>streams o fluxos</strong> per tractar la comunicació d’informació amb l’exterior. Per entendre-ho millor, un stream o flux és com un canal de comunicació entre un origen i un destí. Per exemple suposem el cas d’un programa que quan arranque haja de llegir una llista de clients d’un fitxer de text per crear una agenda. En aquest cas <strong>l’origen</strong> seria el fitxer de text i el <strong>destí</strong> el programa o aplicació que s’encarrega d’emplenar l’agenda amb el llistat de clients, doncs bé, l’stream en aquest escenari seria el <strong>canal de comunicació</strong> que s’establiria entre el fitxer de text i el programa per tal que aquest puga llegir la informació.</p>
<p><center>
<img src="../assets/Tema7/EntradaEixida.png"/>
</center></p>
<p>A la imatge anterior es poden observar dos tipus de fluxos de dades: El primer és un flux d'entrada de dades, s'enten d'entrada perquè va del sistema de fitxers al programa, mentre que el segon representa un flux de dades d'eixida, ja que aquest va del programa al sistema de fitxers.</p>
<p>En aquest tema explicarem com Java tracta mitjançant objectes l’establiment d'aquests canals de comunicació i quines són les operacions que hi podem fer i com s’han d’utilitzar aquestes abstraccions de Java.
D’altra banda Java també ofereix el mecanisme d’excepcions per controlar els errors sobrevinguts. Una excepció és un problema que es produeix en temps d’execució. Java permet controlar aquests problemes i programar amb els try...catch la solució als errors en temps d’execució.</p>
<h2 id="entrada-i-eixida-basiques">Entrada i eixida bàsiques</h2>
<p>Com hem dit abans, Java organitza la entrada i eixida mitjançant l’ús d’streams, que són <strong>abstraccions en realitat</strong>, i aquests streams el que fan es transportar la informació del programa o aplicació a dispositius externs. Aquests dispositius externs poden ser bé fitxers o inclús la consola, que es tractada com un fitxer per Java.</p>
<h3 id="flux-i-jerarquia-de-classes">Flux i jerarquia de classes</h3>
<p>Com que les possibilitats que tenim en programació respecte de l’ús de fitxers és ampla, podem: llegir de fitxers, escriure en fitxers, llegir per una entrada com un teclat <strong>System.in</strong> o escriure en una eixida com un monitor <strong>System.out</strong>, Java en primera instància distingeix entre dos tipus de fluxos: <strong>flux de bytes</strong> i <strong>flux de caracters</strong></p>
<table>
<thead>
<tr>
<th>E/S</th>
<th>Bytes</th>
<th>Caracters</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flux entrada</td>
<td>InputStream</td>
<td>Reader</td>
</tr>
<tr>
<td>Flux eixida</td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
</tbody>
</table>
<p>Java declara quatre classes <strong>abstractes</strong>, és a dir, que no podem instanciar cap objectes d'aquestes classes, que deriven directament de la superclasse «Object» que són: <strong>InputStream</strong>, <strong>OutputStream</strong>, <strong>Reader</strong> i <strong>Writer</strong>.</p>
<p><strong>InputStream</strong> és la base per a totes les classes definides per al flux d’entrada de dades a nivell de bytes. A la imatge següent es mostren totes les classes que deriven d'InputStream.  De totes les classes derivades de la classe abstracta InputStream, veurem amb més detall les següents: FileInputStream, DataInputStream i ObjectInputStream.</p>
<p><center>
<img src="../assets/Tema7/InputStreamClasses.png"/>
</center></p>
<p><strong>OutputStream</strong> és la classe base per a les classes que gestionen el flux d’eixida a nivell de bytes. A la imatge següent es poden observar totes les seues classes derivades. Pel que fa a aquesta classe abstracta, veurem amb més detall: FileOutputStream, DataOutputStream, PrintStream i ObjectOutputStream.</p>
<p><center>
<img src="../assets/Tema7/OutputStreamClasses.png"/>
</center></p>
<p><strong>Reader</strong> és la classe per llegir streams a nivell de caracter. Observa les classes derivades a la imatge següent. D'aquesta classe abstracta veurem amb més detall: BufferedReader, InputStreamReader, FileReader</p>
<p><center>
<img src="../assets/Tema7/ReaderClasses.png"/>
</center></p>
<p><strong>Writer</strong> és la classe per escriure a streams a nivell de caracter i les classes que deriven d'ell són les que es poden veure a la següent imatge. De totes les derivades ens centrarem en: OutputStreamWriter, FileWriter, BufferedWriter i PrintWriter.</p>
<p><center>
<img src="../assets/Tema7/WriterClasses.png"/>
</center></p>
<h2 id="entrada-i-eixida-per-consola-en-processing-ide">Entrada i eixida per consola en Processing IDE</h2>
<blockquote>
<p><em>La consola com a eina d’eixida i entrada bàsica d’informació</em></p>
</blockquote>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.1. S'ha utilitzat la consola per realitzar operacions d'entrada i sortida d'informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.2. S'han aplicat formats en la visualització de la informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.3. S'han reconegut les possibilitats d'entrada / sortida del llenguatge i les llibreries associades.</li>
</ul>
</div>
<p>En Processing IDE, la consola <strong>no és el canal principal d’interacció amb l’usuari</strong>, ja que aquest entorn està pensat sobretot per a aplicacions gràfiques i interactives. Tot i això, la consola continua sent molt útil per a:</p>
<ul>
<li>mostrar informació i resultats</li>
<li>indicar l’estat del programa</li>
<li>detectar errors i depurar codi</li>
<li>fer proves ràpides amb entrada molt bàsica</li>
</ul>
<p>En aquest bloc treballarem la <strong>eixida d’informació per consola</strong> i veurem un mecanisme senzill per capturar entrada de dades en Processing, sense utilitzar <code>Scanner</code>.</p>
<h3 id="eixida-de-dades-per-consola">Eixida de dades per consola</h3>
<p>La forma més habitual de mostrar informació en Processing és utilitzar la consola mitjançant l’objecte <code>System.out</code> o les funcions pròpies <code>print()</code> i <code>println()</code>.</p>
<p><strong>Exemples:</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">println</span><span class="p">(</span><span class="s">"Hola món"</span><span class="p">);</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">print</span><span class="p">(</span><span class="s">"Valor actual: "</span><span class="p">);</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">println</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div>
<p>Aquestes instruccions permeten mostrar:</p>
<ul>
<li>valors de variables</li>
<li>resultats de càlculs</li>
<li>missatges informatius</li>
</ul>
<p>La consola és especialment útil per comprovar què està passant dins del programa mentre s’executa.</p>
<details class="question">
<summary>Activitat 701. Missatges per consola</summary>
<p>Escriu un programa que mostre per consola:</p>
<ul>
<li>Un missatge de benvinguda</li>
<li>El valor de tres variables diferents (enter, real i text)</li>
<li>Un missatge final indicant que el programa ha acabat</li>
</ul>
</details>
<h3 id="mostrar-informacio-amb-format">Mostrar informació amb format</h3>
<p>Quan volem mostrar informació de manera més clara o ordenada, podem utilitzar formats. Processing permet usar <code>printf()</code> igual que Java.</p>
<p><strong>Exemple:</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">edat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kt">float</span><span class="w"> </span><span class="n">nota</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">8.345f</span><span class="p">;</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"Edat: %d anys%n"</span><span class="p">,</span><span class="w"> </span><span class="n">edat</span><span class="p">);</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"Nota final: %.2f%n"</span><span class="p">,</span><span class="w"> </span><span class="n">nota</span><span class="p">);</span>
</code></pre></div>
<p>Formats habituals:</p>
<ul>
<li><code>%d</code> → nombres enters</li>
<li><code>%f</code> → nombres reals</li>
<li><code>%.2f</code> → nombre real amb dos decimals</li>
<li><code>%s</code> → text</li>
<li><code>%n</code> → salt de línia</li>
</ul>
<p>L’ús de formats millora molt la llegibilitat de la informació mostrada.</p>
<details class="question">
<summary>Activitat 702. Eixida amb format</summary>
<p>Declara variables per al nom d’un alumne, la seua edat i una nota mitjana. Mostra tota la informació per consola utilitzant printf() i formats adequats.</p>
</details>
<h3 id="entrada-de-dades-basica-amb-el-teclat-en-processing">Entrada de dades bàsica amb el teclat en Processing</h3>
<div class="admonition danger">
<p class="admonition-title">Particularitats de Processing IDE</p>
<p>Processing IDE és un entorn de desenvolupament senzill que no té la potència d'altres entorns com <strong>Eclipse IDE o Visual Studio Code</strong>, per tant moltes de les classes d'entrada i eixida que veurem en aquest tema no es podran provar en Processing. Sempre podem obrir un projecte nou en Eclipse o Visual Studio i provar els exemples que no funcionen en Processing IDE.</p>
</div>
<p>Processing <strong>no està pensat per a una entrada de dades per consola com Java clàssic</strong>, però ofereix un mecanisme molt senzill per capturar l’entrada de l’usuari mitjançant el teclat: la variable <code>key</code> i la funció <code>keyPressed()</code>.</p>
<p>Aquest mecanisme permet llegir <strong>caràcter a caràcter</strong>, suficient per a entrades simples.</p>
<p><strong>Exemple: lectura d’un caràcter:</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">keyPressed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="s">"Tecla premuda: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">}</span>
</code></pre></div>
<p>Cada vegada que l’usuari prem una tecla, Processing executa automàticament aquesta funció.</p>
<details class="question">
<summary>Activitat 703. Caputra de tecles</summary>
<p>Crea un programa que mostre per consola totes les tecles que va prement l’usuari. Prova a distingir lletres, números i la barra espaiadora.</p>
</details>
<h3 id="entrada-de-text-senzilla-simulant-un-scanner">Entrada de text senzilla (simulant un Scanner)</h3>
<p>Podem simular una entrada de text similar a <code>Scanner</code> acumulant els caràcters introduïts per l’usuari fins que preme la tecla <strong>ENTER</strong>.</p>
<p><strong>Exemple:</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">String</span><span class="w"> </span><span class="n">entrada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">keyPressed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ENTER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">"Text introduït: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entrada</span><span class="p">);</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="n">entrada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"> </span><span class="c1">// reiniciem l’entrada</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="n">entrada</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="p">}</span>
</code></pre></div>
<p>Aquest codi permet:</p>
<ul>
<li>escriure text amb el teclat</li>
<li>mostrar-lo per consola quan es prem ENTER</li>
</ul>
<p>És una forma molt bàsica d’entrada de dades, però suficient per entendre com Processing gestiona la interacció amb l’usuari.</p>
<details class="question">
<summary>Activitat 704. Entrada de paraules</summary>
<p>Modifica el programa perquè l’usuari introduïsca una paraula i el programa la mostre per consola en majúscules quan es preme ENTER.</p>
</details>
<h3 id="limitacions-de-lentrada-per-consola-en-processing">Limitacions de l’entrada per consola en Processing</h3>
<p>Cal tindre en compte que aquest tipus d’entrada:</p>
<ul>
<li>no és bloquejant (el programa continua executant-se)</li>
<li>no és adequada per a dades complexes</li>
<li>es fa de manera asíncrona</li>
</ul>
<p>Per aquest motiu, en els següents blocs del tema:</p>
<ul>
<li>la <strong>entrada principal de dades</strong> es farà mitjançant <strong>fitxers</strong> i <strong>interfícies gràfiques</strong></li>
<li>la consola quedarà com a eina de suport i depuració</li>
</ul>
<details class="question">
<summary>Activitat 705. Control d'errors en l'entrada per consola</summary>
<ul>
<li>Validació de dades</li>
<li>Gestió d'errors habituals</li>
</ul>
</details>
<h2 id="introduccio-als-fitxers">Introducció als fitxers</h2>
<blockquote>
<p>"Quan les dades han de sobreviure al programa"</p>
</blockquote>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.3. S'han reconegut les possibilitats d'entrada / sortida del llenguatge i les llibreries associades.</li>
</ul>
</div>
<p>Fins ara, tota la informació que utilitza el programa desapareix quan aquest s’atura. En aquest bloc introduirem els fitxers com a mecanisme per guardar informació de manera permanent.</p>
<p>En Processing IDE, els fitxers són especialment importants perquè permeten:</p>
<ul>
<li>Guardar resultats</li>
<li>Carregar configuracions</li>
<li>Reutilitzar dades entre execucions</li>
</ul>
<p>Aquest bloc és conceptual i pràctic alhora, i servirà de base per als següents apartats del tema.</p>
<p>### Què és un fitxer</p>
<p>Un <strong>arxiu o fitxer</strong> és un conjunt de bytes que són emmagatzemats en un dispositiu. Un arxiu o fitxer es identificat per un nom i la descripció de la carpeta o directori (la ruta) que el conté. Una de les principals finalitats dels arxius és tindre desats en <strong>memòria secundària</strong>, quan les aplicacions ja han acabat d’executar-se, i que siguen recuperables després.</p>
<p>Un <strong>fitxer</strong> sUn <strong>arxiu o fitxer</strong> és un conjunt de bytes que són emmagatzemats en un dispositiu. Un arxiu o fitxer es identificat per un nom i la descripció de la carpeta o directori (la ruta) que el conté. Una de les principals finalitats dels arxius és tindre desats en <strong>memòria secundària</strong>, quan les aplicacions ja han acabat d’executar-se, i que siguen recuperables després.’ha de poder llegir, actualitzar, esborrar registres i tornar a guardar-se de nou amb tots els canvis realitzats. Segons el dispositiu físic que els emmagatzeme, els arxius poden ser <strong>directes o seqüencials</strong>, el primer implica que per poder accedir a qualsevol registre, hem de passar prèviament pels anteriors, per exemple una cinta magnètica, mentre que el segon tipus d’arxiu permet l’accés directe al registre en qüestió sense haver de passar pels anteriors. </p>
<p>En Java un arxiu és una <strong>seqüencia de bytes</strong> que contenen la informació emmagatzemada. Per poder treballar amb aquestes seqüencies de bytes, Java disposa de classes com són els tipus bàsics (int, double, string..).
D’una altra banda, com ja hem explicat abans, un flux és una abstracció que es refereix a una corrent <strong>(stream)</strong> de dades entre un origen (també conegut com a font o productor) i una destinació o embornal (consumidor) i la connexió que existeix entre els dos també es coneix com a pipe o tub per on circules les dades.</p>
<p>Quan comença qualsevol execució d’un programa Java, es creen tres objectes flux, canals pels que pot fluir informació d’entrada o eixida; aquests objectes estan definits a la classe System i són:</p>
<ul>
<li><strong>System.in:</strong> entrada estàndard, permet l’entrada de dades des del teclat.Una excepció és un fallo que es produeix en temps d’execució. Classe <strong>InputStream</strong></li>
<li><strong>System.out:</strong> eixida estàndard, permet la programa imprimir per pantalla. Classe <strong>PrintStream</strong></li>
<li><strong>System.err:</strong> eixida d’errors, permet al programa imprimir errors per pantalla. Per defecte sol ser la mateixa eixida que System.out. Classe <strong>PrintStream</strong></li>
</ul>
<p>En resum, un fitxer és un conjunt de dades emmagatzemades en un dispositiu de memòria secundària (disc dur, SSD, USB…). A diferència de les variables, el contingut d’un fitxer no es perd quan el programa finalitza.</p>
<p>En programació, els fitxers s’utilitzen principalment per:</p>
<ul>
<li>Guardar informació</li>
<li>Recuperar dades</li>
<li>Compartir informació entre programes</li>
</ul>
<p>Podem distingir, de manera general, dos tipus de fitxers:</p>
<ul>
<li><strong>Fitxers de text:</strong> contenen informació llegible (txt, csv…)</li>
<li><strong>Fitxers binaris:</strong> contenen dades codificades (imatges, dades numèriques, objectes…)</li>
</ul>
<h3 id="la-classe-file">La classe File</h3>
<p>Per poder identificar d’un fitxer al sistema de fitxers de qualsevol sistema operatiu, necessitem: nom i ruta. Per exemple ‘/user/data/file.txt’. El fitxer es diu file.txt i la ruta en la qual es troba és ‘/user/data/’. Aquest identificador de fitxer és el que es passa al constructor de la classe per tal d’obrir un flux.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="na">separator</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">File</span><span class="w"> </span><span class="n">fitxer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">strPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"prova.txt"</span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="c1">// Fes el que vullgues fer amb el fitxer</span>
</code></pre></div></td></tr></table></div>
<p>Veiem un altre exemple d'ús de la classe File</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">File</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">);</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="na">exists</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="s">"El fitxer existeix"</span><span class="p">);</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="s">"El fitxer no existeix"</span><span class="p">);</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="ubicacio-dels-fitxers-en-processing-ide">Ubicació dels fitxers en Processing IDE</h4>
<p>En l’exemple anterior hem utilitzat la <strong>classe File</strong> per tal d’instanciar un stream al fitxer que li hem passat per paràmetre «prova.txt». Compte que s’ha de passar la ruta absoluta d’on es troba el fitxer utilitzant la funció de Processing IDE <strong>sketchPath()</strong>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">String</span><span class="w"> </span><span class="n">ruta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">);</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="n">println</span><span class="p">(</span><span class="n">ruta</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Hi ha alternatives al constructor de la classe File que hem mostrat a l’exemple anterior, es pot construir també amb dos paràmetres: ruta i nom del fitxer o inclús indicar-li la ruta mitjançant un altre objecte File.</p>
<p>Els mètodes de la classe File són:</p>
<table>
<thead>
<tr>
<th>Mètode</th>
<th>Explicació</th>
</tr>
</thead>
<tbody>
<tr>
<td>public boolean exists()</td>
<td>Torna true si el fitxer existeix</td>
</tr>
<tr>
<td>public boolean canWrite()</td>
<td>Torna true si es pot escriure al fitxer</td>
</tr>
<tr>
<td>public boolean canRead()</td>
<td>Torna true si es només de lectura</td>
</tr>
<tr>
<td>public boolean isFile()</td>
<td>Torna true si és un fitxer</td>
</tr>
<tr>
<td>public boolean isDirectory()</td>
<td>Torna true si és un directori</td>
</tr>
<tr>
<td>public boolean isAbsolute()</td>
<td>Torna true si el directori té ruta completa</td>
</tr>
<tr>
<td>public long length()</td>
<td>Torna la mida en bytes del fitxer</td>
</tr>
<tr>
<td>public long lastModified()</td>
<td>Torna el timestamp de l’última modificació</td>
</tr>
<tr>
<td>public String getName()</td>
<td>Torna una string amb el nom del fitxer</td>
</tr>
<tr>
<td>public String getPath()</td>
<td>Torna una string amb el path del fitxer</td>
</tr>
<tr>
<td>public String getAbsolutePath()</td>
<td>Torna la ruta absoluta del fitxer</td>
</tr>
<tr>
<td>public boolean setReadOnly()</td>
<td>Converteix el fitxer en només lectura</td>
</tr>
<tr>
<td>public boolean delete()</td>
<td>Elimina el fitxer o directori (si està buit)</td>
</tr>
<tr>
<td>public boolean renameTo(File nou)</td>
<td>Canvia el nom pel del fitxer nou</td>
</tr>
<tr>
<td>public boolean mkdir()</td>
<td>Crea el directori del fitxer</td>
</tr>
<tr>
<td>public String[] list()</td>
<td>Torna un array d’strings dels elements</td>
</tr>
</tbody>
</table>
<details class="question">
<summary>Activitat 706. Class File</summary>
<p>Crea un projecte en Processing IDE que obriga un fitxer de prova qualsevol, per exemple: prova.txt. 
  Revisa els mètodes de la classe File i comprova el funcionament d'alguns d'ells per exemple: getName();
  Mostra per pantalla una fitxa en la que es mostre la següent informació: </p>
<ul>
<li>Nom del fitxer</li>
<li>Ruta absoluta del fitxer</li>
<li>Data de l'última vegada que s'ha modificat</li>
</ul>
</details>
<h3 id="carpetes-i-organitzacio-de-fitxers">Carpetes i organització de fitxers</h3>
<p>A mesura que un projecte creix, és recomanable organitzar els fitxers en carpetes. La classe File permet treballar també amb carpetes.</p>
<p>Exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">File</span><span class="w"> </span><span class="n">carpeta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="n">sketchPath</span><span class="p">(</span><span class="s">"dades"</span><span class="p">));</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">carpeta</span><span class="p">.</span><span class="na">exists</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span><span class="n">carpeta</span><span class="p">.</span><span class="na">mkdir</span><span class="p">();</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="errors-habituals">Errors habituals</h3>
<p>Quan treballem amb fitxers poden aparèixer problemes com:</p>
<ul>
<li>Fitxers inexistents</li>
<li>Rutes incorrectes</li>
<li>Permisos insuficients</li>
</ul>
<p>La gestió d’aquests errors es fa mitjançant el mecanisme de les excepcions com ja varem veure al tema 4</p>
<h2 id="fitxers-de-text-guardar-i-recuperar-informacio">Fitxers de text: guardar i recuperar informació</h2>
<blockquote>
<p>El primer pas real per a la persistència de dades</p>
</blockquote>
<div class="admonition success">
<p class="admonition-title">Criteris d'avaluació associats</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.4. S'han utilitzat fitxers per emmagatzemar i recuperar informació.</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"/><span class="task-list-indicator"></span></label> RA5.5. S'han creat programes que utilitzin diversos mètodes d'accés al contingut dels fitxers.</li>
</ul>
</div>
<p>En aquest bloc aprendrem a escriure i llegir fitxers de text. A diferència del bloc anterior, ara sí treballarem amb dades reals que es guardaran en disc i es podran recuperar en una altra execució del programa.</p>
<p>Treballarem dues vies:</p>
<ul>
<li>Classes estàndard de Java (PrintWriter, BufferedReader)</li>
<li>Funcions pròpies de Processing (saveStrings(), loadStrings())</li>
</ul>
<h3 id="escriure-en-un-fitxer-de-text-amb-printwriter">Escriure en un fitxer de text amb PrintWriter</h3>
<p>La classe PrintWriter permet escriure text en un fitxer de manera senzilla.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.PrintWriter</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">ruta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sketchPath</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">);</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="n">PrintWriter</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createWriter</span><span class="p">(</span><span class="n">ruta</span><span class="p">);</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="n">writer</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Primera línia"</span><span class="p">);</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="n">writer</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Segona línia"</span><span class="p">);</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">  </span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="n">writer</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">  </span><span class="n">writer</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">  </span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="s">"Fitxer creat correctament."</span><span class="p">);</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>És important: </p>
<ul>
<li>Escriure les línies amb println()</li>
<li>Tancar el fitxer amb close()</li>
</ul>
<details class="question">
<summary>Activitat 707. Crear un fitxer de text</summary>
<p>Escriu un programa que cree un fitxer anomenat alumne.txt i guarde el teu nom, edat i curs en línies separades.</p>
</details>
<h3 id="llegir-un-fitxer-de-text-amb-loadstrings">Llegir un fitxer de text amb loadStrings()</h3>
<p>Processing ofereix la funció loadStrings() que permet llegir totes les línies d’un fitxer de text en un array de cadenes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span>
<span class="normal"><a href="#__codelineno-9-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">linies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadStrings</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">);</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">linies</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">linies</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Cada element de l’array correspon a una línia del fitxer.</p>
<details class="question">
<summary>Activitat 708. Llegir un fitxer</summary>
<p>Llig el fitxer alumne.txt creat anteriorment i mostra el seu contingut per consola.</p>
</details>
<h3 id="processsar-la-informacio-llegida">Processsar la informació llegida</h3>
<p>Quan llegim un fitxer, sovint necessitem processar les dades.</p>
<p>Per exemple, si un fitxer conté números, podem convertir-los amb int() o float().</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">linies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadStrings</span><span class="p">(</span><span class="s">"numeros.txt"</span><span class="p">);</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">suma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">linia</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">linies</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="n">suma</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">linia</span><span class="p">);</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">  </span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="s">"Suma total: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">suma</span><span class="p">);</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 709. Sumar valors d'un fitxer</summary>
<p>Crea un fitxer amb diversos números (un per línia) i escriu un programa que calcule i mostre la suma total.</p>
</details>
<details class="question">
<summary>Activitat 710. Copiar i invertir</summary>
<p>Basat en el codi anterior i fes que al fitxer resultat, el d’eixida, es copie el que apareix a «prova.txt», el d’entrada però a l’inrevés. Per exemple:</p>
<p>Un possible resultat de l'activitat anterior podria ser el que es pot observar a la imatge següent:      </p>
<p><img alt="Fitxers Invertits" src="../assets/Tema8/FitxersInvertits.png"/></p>
</details>
<h3 id="afegir-informacio-a-un-fitxer-existent">Afegir informació a un fitxer existent</h3>
<p>Si volem afegir informació sense esborrar el contingut anterior, podem treballar acumulant les dades en un array i tornar-les a guardar.</p>
<p><strong>Estratègia bàsica:</strong></p>
<ol>
<li>Llegir el fitxer amb loadStrings()</li>
<li>Afegir una nova línia</li>
<li>Tornar a guardar amb saveStrings()</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">linies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadStrings</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">);</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">novesLinies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">linies</span><span class="p">,</span><span class="w"> </span><span class="s">"Nova línia"</span><span class="p">);</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="n">saveStrings</span><span class="p">(</span><span class="s">"dades.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">novesLinies</span><span class="p">);</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Activitat 711. Afegir dades</summary>
<p>Modifica el programa perquè afegisca una nova línia amb la data actual al fitxer alumne.txt</p>
</details>
<h3 id="problemes-habituals-i-control-derrors">Problemes habituals i control d'errors</h3>
<p>En treballar amb fitxers de text poden aparèixer problemes com:</p>
<ul>
<li>Fitxer inexistent</li>
<li>Contingut inesperat</li>
<li>Errors de conversió de tipus</li>
</ul>
<p>Aquests casos es poden controlar amb els mecanismes ja estudiats al Tema 4.</p>
<details class="question">
<summary>Activitat 712. Detecció de problemes</summary>
<p>Prova què ocorre si intentes llegir un fitxer que no existeix. Explica què passa i com es podria evitar el problema.</p>
</details>
<!--

### Escriure en fitxers de text
- PrintWriter
- Escriure línies de text
- Afegir informació a un fitxer

### Llegir de fitxers de text
- BufferedReader
- Lectura línia a línia
- Processar informació llegida

### Funcions pròpies de Processing IDE
- saveStrings ();
- loadStrings ();

### Control d'errors en fitxers de text
- Problemes habituals en lectura i escriptura
- Ús de try / catch aplicat a fitxers (recordatori)

## Bloc 4. Fitxers binaris i dades estructurades

!!! note
    "Quan el text no és suficient. Treballar amb dades no textuals"

!!! success "Criteris d'avaluació associats"
    - [x] RA5.4. S'han utilitzat fitxers per emmagatzemar i recuperar informació.
    - [x] RA5.5. S'han creat programes que utilitzin diversos mètodes d'accés al contingut dels fitxers.

### Fitxers binaris
- Què són i per a què serveixen.
- Diferències amb els fitxers de text

### Escriptura i lectura de dades primitives
- DataInputStream
- DataOutputStream

### Ordre de lectura i consistència de dades

### Control d'errors en fitxers binaris
- Errors d'ordre i fi de fitxer
- Gestió d'errors durant la lectura

## Bloc 5. Objectes i persistència

!!! note
    "Guardar objectes complets"

!!! success "Criteris d'avaluació associats"
    - [x] RA5.5. S'han creat programes que utilitzen diversos mètodes d'accés al contingut dels fitxers.

### Què és la persistència
- Quan té sentit usar-la

### Serialització d'objectes
- ObjectInputStream
- ObjectOutputStream

### Consideracions en Processing IDE
- Fitxers .java vs fitxers .pde

### Control d'errors en la serialització
- Problemes habituals
- Gestió d'errors en lectura d'objectes.

## Bloc 6. Interfícies gràfiques amb ControlP5

!!! note 
    "Entrada i eixida gràfica d'informació"

!!! success "Criteris d'avaluació associats"
    - [x] RA5.6. S'han utilitzat les eines de l'entorn de desenvolupament per crear interfícies gràfics d'usuari simples.
    - [x] RA5.7. S'han programat controladors d'esdeveniments.
    - [x] RA5.8. S'han escrit programes que utilitzin interfícies gràfics per a l'entrada i sortida d'informació.

### Introducció a ControlP5
- Què és controlP5
- Instal·lació de la llibreria

### Controls bàsics
- Botons
- Sliders
- Camps de text
- Etiquetes

### Gestió d'esdeveniments
- ControlListener
- controlEvent
- Interacció amb l'usuari.

### Comunicació amb el programa principal
- Classes menú
- Modificar l'estat de l'aplicació

### Connexió amb fitxers
- Guardar dades des de la GUI
- Recuperar informació guardada

## Projecte final del tema

!!! note
    "Aplicació completa d'entrada i eixida"

### Descripció del projecte
- Interfície gràfica
- Entrada de dades per GUI
- Guardar i recuperar dades de fitxer

### Requisits mínims
- Ús de ControlP5
- Eixida per pantalla
- Persistència de les dades.

### Ampliacions possibles
- Millora visual
- Validacions
- Estadístiques.

## Resum i connexions amb altres temes
- Què hem après
- Relació amb programació modular i classes.
- Preparació per a projectes més grans



-->
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "toc.integrate", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
</body>
</html>