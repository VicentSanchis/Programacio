
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Tema%2006.%20Programaci%C3%B3%20Orientada%20a%20Objectes/" rel="prev"/>
<link href="../Tema%2008.%20Entrada%2C%20eixida%20i%20excepcions/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.3, mkdocs-material-9.1.15" name="generator"/>
<title>7.- Herència, polimorfisme.. - PROGRAMACIÓ 1DAW</title>
<link href="../assets/stylesheets/main.26e3688c.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheet/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.9/mermaid.neutral.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tema-7-herencia-polimorfisme-i-interficies">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-header__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PROGRAMACIÓ 1DAW
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              7.- Herència, polimorfisme..
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-nav__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    PROGRAMACIÓ 1DAW
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Index
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2001.%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/">
        1.- Introducció programació
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2002.%20Programaci%C3%B3%20Estructurada/">
        2.- Programació Estructurada
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2003.%20El%20llenguatge%20Java/">
        3.- El llenguatge Java
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2004.%20Programaci%C3%B3%20Modular/">
        4.- Programació Modular
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2005.%20Tipus%20compostos%20de%20dades/">
        5.- Tipus Compostos Dades
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2006.%20Programaci%C3%B3%20Orientada%20a%20Objectes/">
        6.- Prog Orientada Objectes
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          7.- Herència, polimorfisme..
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        7.- Herència, polimorfisme..
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
    Introducció
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#herencia">
    Herència
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#polimorfisme">
    Polimorfisme
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interficies">
    Interfícies
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2008.%20Entrada%2C%20eixida%20i%20excepcions/">
        8.- Entrada, eixida, excepcions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2009.%20Gr%C3%A0fics.%20Java%20Swing/">
        9.- Gràfics. Java Swing.
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2010.%20Acc%C3%A9s%20a%20dades/">
        10.- Accés a dades
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tema-7-herencia-polimorfisme-i-interficies">Tema 7. Herència, polimorfisme i interfícies</h1>
<h2 id="introduccio">Introducció</h2>
<p>Un dels mecanismes més potents que incorpora el <strong>paradigma de programació orientada a objectes</strong> són <strong>l’herència</strong> i el <strong>polimorfisme.</strong> </p>
<p>El <ins><strong>primer</strong></ins> ens permet crear una jerarquia de classes relacionades entre sí de tal forma que la quantitat de codi, especialment el codi redundant, es redueix significativament. </p>
<p>El <ins><strong>segon</strong></ins> permet redefinir mètodes de tal forma que realitzen funcions diferents depenent del context en el qual es troben. En altres paraules, el <strong>polimorfisme</strong> és el mecanisme de la programació orientada a objectes que permet que una funció amb el mateix nom realitze tasques diferents depenent de l’objecte des del qual es fa referència. </p>
<p>Finalment també veurem com a les <strong>interfícies</strong> podrem especificar les operacions que haurien de definir-se a les classes que la implementen. Una interfície és un mitjà per a que els objectes no relacionats es comuniquen entres sí. Aquestes són les definicions de mètodes i valors sobre els quals els objectes estan d’acord per cooperar.</p>
<h2 id="herencia">Herència</h2>
<p>En programació orientada a objectes l’herència és un mecanisme que permet potenciar la reutilització i l’extensibilitat en el desenvolupament de programari a banda de <strong>reduir la quantitat de codi redundant.</strong> Aquest mecanisme permet crear noves classes a partir d’una classe o <strong>jerarquia de classes</strong> preexistent (ja comprovades i verificades) evitant d’aquesta forma el redisseny, la modificació i verificació de la part ja implementada. L’herència facilita la creació d’objectes a partir d’altres ja existents i implica que una subclasse obté tot el comportament (mètodes) i finalment els atributs (variables) de la seua superclasse.</p>
<p>Suposem el cas en el que disposem de dues classes (amb menys classes resultaria impossible l’herència), una s’anomenarà: <strong>classe base, superclasse o classe pare;</strong> mentre que l’altra serà <strong>la classe derivada, subclasse o classe filla.</strong></p>
<p>Seguint amb l'exemple del tema anterior del <strong>Volcano</strong> <a href="../assets/Tema7/Volcano.zip">(Descarrega'l ací)</a>, els nostres piroclasts tenen tots les mateixes característiques (aparença) i tots tenen el mateix comportament conforme l'hem dissenyada fins ara. Si apliquem els conceptes d'herència i polimorfisme al nostre projecte el canvi pot ser significatiu.</p>
<p>Basant-nos en el projecte del volcà del tema anterior però aplicant algunes modificacions de classes i amb el que varem explicar al tema anterior sobre <strong>herència</strong> on haviem dissenyat una sèrie de classes derivades de <strong>Piroclast</strong> com es podreu observar al següent esquema:</p>
<div class="admonition danger">
<p class="admonition-title">Canvis Projecte Volcano</p>
<p>La classe <strong>Con</strong> es converteix en la classe <strong>Crater</strong>
La classe <strong>Cendra</strong> ara és la classe <strong>Fum</strong></p>
</div>
<p><center>
<div class="mermaid">	classDiagram 
        Crater "1" --&gt; "*" Piroclast

		Piroclast &lt;|-- Fum
		Piroclast &lt;|-- Lava
		Piroclast &lt;|-- Roca
</div>
</center></p>
<p>Ara tenim una superclasse <strong>Piroclast</strong> amb les subclasses associades <strong>Fum</strong>, <strong>Lava</strong> i <strong>Roca</strong>. Tots tres són <strong>Piroclasts</strong>, és a dir, tots tenen: posició, direcció, velocitat, color inicial, color final, temps de vida i grandaria a banda d'altres atributs que anirem veient i, a més a més, a tots els afecten les lleis de la física, però cadascuna de les subclasses tenen certes <strong>peculiaritats:</strong></p>
<ul>
<li>El <strong>fum</strong> sol anar sempre cap amunt es dissipa amb facilitat i es sol veure afectat per la direcció en la que va el vent.</li>
<li>La <strong>lava</strong> pot ser des de liquida fins quasi sòlida, els colors varien mentre cau i al final s'esclafa en terra.</li>
<li>Les <strong>roques</strong> a banda de ser sòlides, poden adoptar moltes formes diferents i quan cauen reboten.</li>
</ul>
<p>La <strong>classe base</strong> en una jerarquia d’herència és la classe que conté els <strong>atributs i mètodes comuns</strong> a totes les classes derivades i és per això que s’evita la redundància del codi que es produiria si haguérem de repetir codi comú a cadascuna de les subclasses, per tant, es podria deduir que una classe derivada és de facto una ampliació de les funcionalitats de la classe base ja que contindrà tant els membres de la classe base com els que s'afegeixen de més a la classe derivada.</p>
<h3 id="declaracio-duna-classe-derivada">Declaració d'una classe derivada</h3>
<p>Per tal de declarar que una classe hereta d’una altra, Java utilitza la paraula reservada <strong>extends</strong>. Si ens basem en el diagrama de classes anteriors, el codi quedaria de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Codi de la classe Piroclast</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fum</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Codi de la classe Fum</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Codi de la classe Lava</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Codi de la classe Roca</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Respecte de la <strong>visibilitat</strong> dels membre de la superclasse, les subclasses tindran accés als membres, siguen atributs o mètodes, public o protected mentre que no heretaran els membres privats de la classe pare. </p>
<h3 id="disseny-de-subclasses">Disseny de subclasses</h3>
<p>Dissenyar és adaptar la realitat que es vol representar a un model concret, en el nostre cas els diagrames de classes d’UML. És en aquest pas en el que s’han de prendre les decisions que poden condicionar el resultat final de la nostra aplicació i no sempre és fàcil determinar quines són les relacions que s’han d’establir.  És per això que cal tenir en ment sempre la següent màxima: </p>
<div class="admonition quote">
<p class="admonition-title">Principi de programació</p>
<p>«La jerarquia de classes més eficient i efectiva és aquella que minimitza el codi al redundant al màxim i simplifica el codi»
«És molt habitual una vegada finalitzat el projecte "refactoritzar" i modificar atributs i mètodes comuns»</p>
</div>
<p>Al utilitzar el mecanisme de l’herència en programació orientada a objectes hem d’intentar sempre tindre un màxim de membres a la superclasse i després a les diferents subclasses només aquells membres o atributs que fan de discriminador, és a dir, que diferencien la classe especialitzada (o subclasse) de la classe superior.</p>
<p>A la nostra classe Piroclast ens interessa saber com ja haviem fet al tema anterior: la posició, la direcció, velocitat, color inicial, color final i grandària. Mentre que de les subclasses seria interessant saber del fum la seua densitat i com li afecta el vent, de la lava volem saber un color inicial i final que ens simule com va canviant de temperatura, mentre que de la roca ens interessa la forma que té i que pot rebotar.</p>
<p><center>
<div class="mermaid">	classDiagram 
		direction LR
        Crater: #ample
        Crater: #alt
        Crater: #color
        Crater: #posicio
        Crater: + Crater(int, int)
        Crater: + display()
        Crater: + update()
        Crater: + run()
        Crater: + createPiroclast()
        Crater: - mostraPiroclasts()
        Crater: - actualitzaPiroclasts()
        Crater: - comprovaMorts()
        Crater "1" --&gt; "*" Piroclast

        Piroclast: # velocitat
        Piroclast: # grandaria
        Piroclast: # lifeSpan
        Piroclast: # colorInicial
        Piroclast: # colorActual
        Piroclast: # colorFinal
        Piroclast: # posicio
        Piroclast: # direccio
        Piroclast: # alturaTerra

        Piroclast: + Piroclast (PVector, int, color, color)
        Piroclast: + display()
        Piroclast: + update()
        Piroclast: + quedaVida() 
        Piroclast: + estaTocantTerra()
        Piroclast: + estaParada() 
        

        Fum: - dissipacio
        Fum: - expansio
        Fum: + display()
        Fum: + update()

        Lava: - percentColor
        Lava: + display()
        Lava: + update()

        Roca: - percentColor
        Roca: - angleDeGir
        Roca: - velAngular
        Roca: - sentitRellotge 
        Roca: + display()
        Roca: + update()
        Roca: - rebota()
        Roca: - calculaAngleGir()
        Roca: - actualitzaColor()

		Piroclast &lt;|-- Fum
		Piroclast &lt;|-- Lava
		Piroclast &lt;|-- Roca
</div>
</center></p>
<details class="question">
<summary>Activitat 701. El joc dels escacs</summary>
<p>Fes un diagrama de classes per al joc dels escacs utilitzant els mecanismes d'herència com hem vist amb l'exemple del Volcano.</p>
<p><center>
<kbd style="border:1px solid #888;"><img alt="Volcano" src="../assets/Tema7/Escacs.gif"/></kbd>
</center></p>
<p>Basant-nos en la imatge anterior, podriem fer un dissenya amb un tauler de joc una classe base fitxa que aglutine tots els atributs i mètodes comuns i després per cada una de les fitxes diferents: torre, cavall, àlfil, peó, torre, rei i reina es podrien crear classes derivades on especificariem les diferències en aparença, cada fitxa té una forma, i en comportament, cada fitxa es mou d'una forma diferent.</p>
</details>
<h3 id="herencia-publica">Herència pública</h3>
<p>En Java tenim la possibilitat de fer protected <strong>(#)</strong> private <strong>(-)</strong> public <strong>(+)</strong> i package <strong>(~)</strong> ens determina la visibilitat dels membres d’una classe. Java considera que l’herència és sempre pública i que la classe derivada tindrà per tant accés als membres protected i public de la classe pare però no als membres privats. El fet de poder tindre elements privats a la nostra classe base seria per poder ocultar informació a les classes derivades.</p>
<p>Fixa't que ací els atributs de la classe pare o <strong>superclasse</strong> ja no usen el modificador de visibilitat private sino <strong>protected</strong>. Si no les subclasses no podrien heretar els atributs de la classe pare.</p>
<p>Traduint el diagrama de classes anterior i aplicant els modificadors de visibilitat adequats, el codi podria quedar de la següent forma:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><input id="__tabbed_1_4" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Piroclast</label><label for="__tabbed_1_2">Fum</label><label for="__tabbed_1_3">Lava</label><label for="__tabbed_1_4">Roca</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">velocitat</span><span class="p">;</span><span class="w">     </span><span class="cm">/** Magnitud en metres per segon                                  */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span><span class="w">     </span><span class="cm">/** Grandaria del piroclast en píxels                             */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">lifeSpan</span><span class="p">;</span><span class="w">      </span><span class="cm">/** Temps de vida que li queda en frames                          */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorInicial</span><span class="p">;</span><span class="w">  </span><span class="cm">/** Color base o inicial del piroclast                            */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorActual</span><span class="p">;</span><span class="w">   </span><span class="cm">/** Color amb el que el piroclast està pintat                     */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorFinal</span><span class="p">;</span><span class="w">    </span><span class="cm">/** Color al qual va el piroclast conforme es gela                */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span><span class="w">       </span><span class="cm">/** Vector de posició del piroclast                               */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span><span class="w">      </span><span class="cm">/** Vector de direcció (en realitat velocitat vectorial)          */</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">alturaTerra</span><span class="p">;</span><span class="w">   </span><span class="cm">/** Punt de l'eix de les y on ha de tocar terra la roca i rebotar */</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Piroclast</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">c1</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">c2</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">quedaVida</span><span class="w"> </span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaTocantTerra</span><span class="w"> </span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaParada</span><span class="w"> </span><span class="p">()</span><span class="w"> </span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fum</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">dissipacio</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">expansio</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Fum</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w">  </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">percentColor</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Lava</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">percentColor</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">angleGir</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">velAngular</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">sentitRellotge</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Roca</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">rebota</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">calculaAngleGir</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzaColor</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</input></input></input></input></div>
<p>Del codi anterior es pot extreure la següent informació:</p>
<ul>
<li>Totes les subclasses tindran accés, encara que al codi no estiga als atributs de la superclasse.</li>
<li>Totes les subclasses quan criden als mètodes display i update, executaran el codi que hi ha a la superclasse sempre que no es s’indique el contrari (sobrecàrrega o sobreescriptura).</li>
<li>La lava no rebota mentre que la roca sí.</li>
<li>El fum vola cap amunt</li>
</ul>
<p>Per poder acoblar el nostre volcà al nou sistema de partícules (fum, lava i roques) haurem de fer alguns canvis.
El primer és conceptual, a partir d'ara el nostre <strong>Crater</strong> contindrà un conjunt de <strong>roques, laves i partícules de fum</strong>.
El segon és que ara cada vegada que s'afegisca un nou piroclast al con per expulsat, aquest podrà ser una de les tres opcions anteriors, però com decidim el tipus? Doncs els frames parells crearem lava mentre que als cicles senars crearem roques, el fum es genera a tots els frames.</p>
<details class="question">
<summary>Activitat 702. Visibilitat</summary>
<p>Revisa i comprova que has posat de forma correcta els modificadors de visibilitat al teu projecte.</p>
</details>
<h3 id="constructors-en-herencia">Constructors en herència</h3>
<p>De la mateixa manera que s’hereten mètodes i atributs també s’hereten els constructors de la classe. D’aquesta forma si declarem un objecte d’una classe derivada, primer s’executa el constructor de la classe base i a continuació s’executa la part de codi de la classe derivada.</p>
<p>Si executes el codi anterior veuràs que dona un error d'execució i no funciona però, què està passant realment? Si feu una traça al codi veureu que el problema està quan s'intenten dibuixar com que no hem inicialitzat els valors de posició etc a les classes derivades, el programa para d'executar-se. I això és perquè quan creem una nova instància de roca per exemple, aquesta crida al constructor de la classe Piroclast sense paràmetres i no assigna valors inicials. Si volem que cride al constructor de la superclasse parametritzat, afegiriem el següent codi al constructor per defecte de les subclasses:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="mi">135</span><span class="p">),</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>El que fem amb el codi anterior i la crida a <strong>super</strong> és cridar al constructor de la classe pare passant-li els paràmetres que demana per tal d'inicialitzar els diferents piroclasts de forma correcta.</p>
<p>Per tal de distingir les diferents subclasses, els assignarem diferents colors a les diferents subclasses.</p>
<p><center>
<kbd style="border:1px solid #888;"><img alt="Volcano" src="../assets/Tema7/VolcanoT7.gif"/></kbd>
</center></p>
<p>A més a més, super() també ens permet cridar a mètodes de la classe pare de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">super</span><span class="p">.</span><span class="na">metode</span><span class="p">(</span><span class="n">arguments</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Mira el següent exemple, passa'l a Processing IDE i comprova que és el que està passant. Seria interessant que abans d'executar el codi per comprovar el que està passant, t'escrigueres el que trobes que va a passar.</p>
<details class="exemple">
<summary>Constructors en herència</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:6"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"/><input id="__tabbed_2_2" name="__tabbed_2" type="radio"/><input id="__tabbed_2_3" name="__tabbed_2" type="radio"/><input id="__tabbed_2_4" name="__tabbed_2" type="radio"/><input id="__tabbed_2_5" name="__tabbed_2" type="radio"/><input id="__tabbed_2_6" name="__tabbed_2" type="radio"/><div class="tabbed-labels"><label for="__tabbed_2_1">Main</label><label for="__tabbed_2_2">B1</label><label for="__tabbed_2_3">B2</label><label for="__tabbed_2_4">D</label><label for="__tabbed_2_5">H</label><label for="__tabbed_2_6">Dh</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="n">d1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">D</span><span class="p">();</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">"_______________________\n"</span><span class="p">);</span>
<span class="w">    </span><span class="n">Dh</span><span class="w"> </span><span class="n">d2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dh</span><span class="p">();</span>
<span class="p">}</span><span class="w">    </span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">B1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">B1</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">"Constructor B1"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">B2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">B2</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">"Constructor B2"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">D</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">D</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">"Constructor D"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">H</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">B2</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">H</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">"Constructor H"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Dh</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Dh</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">"Constructor Dh"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</details>
<p>Finalment cal dir que el constructor d'una classe base (superclasse) pot executar una part del codi que és comú a totes les subclasses i la resta del codi necessari per a la construcció d'una subclasse ho pot fer la classe derivada.</p>
<p>Però vegem com afecta el que acabem d'explicar al nostre projecte Volcano. Una vegada afegides les modificacions el projecte podria quedar com mostra el següent codi. Fixa't especialment en la modificació de codi que s'ha fet al mètode <strong>creaPiroclast</strong> de la classe <strong>Crater</strong> que és la que va afegint els piroclasts a l'arrayList:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:6"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"/><input id="__tabbed_3_2" name="__tabbed_3" type="radio"/><input id="__tabbed_3_3" name="__tabbed_3" type="radio"/><input id="__tabbed_3_4" name="__tabbed_3" type="radio"/><input id="__tabbed_3_5" name="__tabbed_3" type="radio"/><input id="__tabbed_3_6" name="__tabbed_3" type="radio"/><div class="tabbed-labels"><label for="__tabbed_3_1">Main</label><label for="__tabbed_3_2">Piroclast</label><label for="__tabbed_3_3">Crater</label><label for="__tabbed_3_4">Fum</label><label for="__tabbed_3_5">Lava</label><label for="__tabbed_3_6">Roca</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">INTERVAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="n">Crater</span><span class="w"> </span><span class="n">vesuvi</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">);</span>
<span class="w">        </span><span class="n">vesuvi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Crater</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">135</span><span class="p">);</span>
<span class="w">        </span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">vent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">clear</span><span class="w"> </span><span class="p">();</span>
<span class="w">        </span><span class="n">background</span><span class="w"> </span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">haPassatInterval</span><span class="p">())</span><span class="w"> </span>
<span class="w">            </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">creaPiroclast</span><span class="w"> </span><span class="p">();</span>

<span class="w">        </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">display</span><span class="w"> </span><span class="p">();</span>
<span class="w">        </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">run</span><span class="w">     </span><span class="p">();</span><span class="w">        </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">haPassatInterval</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">INTERVAL</span><span class="o">*</span><span class="n">vesuvi</span><span class="p">.</span><span class="na">getTotalPiroclasts</span><span class="p">())</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">INTERVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">velocitat</span><span class="p">;</span><span class="w">     </span><span class="cm">/** Magnitud en metres per segon                                  */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span><span class="w">     </span><span class="cm">/** Grandaria del piroclast en píxels                             */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">lifeSpan</span><span class="p">;</span><span class="w">      </span><span class="cm">/** Temps de vida que li queda en frames                          */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorInicial</span><span class="p">;</span><span class="w">  </span><span class="cm">/** Color base o inicial del piroclast                            */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorActual</span><span class="p">;</span><span class="w">   </span><span class="cm">/** Color amb el que el piroclast està pintat                     */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorFinal</span><span class="p">;</span><span class="w">    </span><span class="cm">/** Color al qual va el piroclast conforme es gela                */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span><span class="w">       </span><span class="cm">/** Vector de posició del piroclast                               */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span><span class="w">      </span><span class="cm">/** Vector de direcció (en realitat velocitat vectorial)          */</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">alturaTerra</span><span class="p">;</span><span class="w">   </span><span class="cm">/** Punt de l'eix de les y on ha de tocar terra la roca i rebotar */</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Piroclast</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tam</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">colIni</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">colFin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">tam</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorInicial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colIni</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorActual</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">colIni</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorFinal</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">colFin</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alturaTerra</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="p">(</span><span class="mi">210</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="p">);</span><span class="w">     </span><span class="c1">// Inicialitzem el punt y on es simulara que el piroclast xocarà</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">mult</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w">    </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="p">}</span><span class="w">       </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w">    </span><span class="nf">update</span><span class="w">  </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>
<span class="w">        </span><span class="p">}</span><span class="w">       </span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">quedaVida</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaTocantTerra</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">alturaTerra</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alturaTerra</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaParada</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">alturaTerra</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">mag</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w">    </span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Crater</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">       </span><span class="n">ample</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Base del volcà en píxels</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">       </span><span class="n">alt</span><span class="p">;</span><span class="w">                        </span><span class="c1">// Alt del volcà en píxels</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">color</span><span class="w">     </span><span class="n">col</span><span class="p">;</span><span class="w">                        </span><span class="c1">// Color del volcà</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">PVector</span><span class="w">   </span><span class="n">posicio</span><span class="p">;</span><span class="w">                    </span><span class="c1">// Posició en la que es troba el volcà que també posiciona el cràter</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">ArrayList</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Piroclast</span><span class="o">&gt;</span><span class="w"> </span><span class="n">alPiroclasts</span><span class="p">;</span><span class="w">   </span><span class="c1">// Col·lecció de piroclasts que el volcà va expulsant</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Crater</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">ample</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alt</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">col</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Piroclast</span><span class="o">&gt;</span><span class="w"> </span><span class="p">();</span><span class="w">  </span><span class="c1">// Inicialitzem el conjunt de piroclasts a punt de ser expulsats.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fill</span><span class="w">     </span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
<span class="w">            </span><span class="n">stroke</span><span class="w">   </span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">rectMode</span><span class="w"> </span><span class="p">(</span><span class="n">CENTER</span><span class="p">);</span>
<span class="w">            </span><span class="n">triangle</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="o">-</span><span class="p">(</span><span class="n">ample</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="n">alt</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="p">(</span><span class="n">ample</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="n">alt</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">mostraPiroclasts</span><span class="w">     </span><span class="p">();</span>
<span class="w">            </span><span class="n">actualitzaPiroclasts</span><span class="w"> </span><span class="p">();</span>
<span class="w">            </span><span class="n">comprovaMorts</span><span class="w">        </span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">creaPiroclast</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Fum</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Fum</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">            </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Lava</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">                </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">l</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Roca</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Roca</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">                </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">Fum</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Fum</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">            </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">f2</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostraPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">)</span>
<span class="w">            </span><span class="n">piro</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzaPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">)</span><span class="w"> </span>
<span class="w">            </span><span class="n">piro</span><span class="p">.</span><span class="na">update</span><span class="p">();</span><span class="w"> </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">comprovaMorts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">piro</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">piro</span><span class="p">.</span><span class="na">quedaVida</span><span class="p">())</span><span class="w">   </span><span class="c1">// Esborrem els que ja se'ls haja acabada la vida (lifeSpan) </span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">piro</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getTotalPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fum</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dissipacio</span><span class="p">;</span><span class="w">  </span><span class="c1">// Valor que determina la velocitat (píxels) a la que es dissipa el fum</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expansio</span><span class="p">;</span><span class="w">   </span><span class="c1">// Valor que determina la velocitat (píxels) amb la que s'expandeix el fum</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Fum</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">170</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.1</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">dissipacio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">expansio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">190</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">color</span><span class="w"> </span><span class="n">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<span class="w">            </span><span class="n">circle</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">vent</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">expansio</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">dissipacio</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">percentColor</span><span class="p">;</span><span class="w">   </span><span class="c1">// Percentatge de modulació del color inicial al final</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Lava</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">18</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fill</span><span class="p">(</span><span class="n">colorActual</span><span class="p">);</span>
<span class="w">            </span><span class="n">circle</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">lifeSpan</span><span class="w"> </span><span class="o">--</span><span class="p">;</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">ellipse</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">grandaria</span><span class="o">/</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentColor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">            </span><span class="n">percentColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">0.003</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">colorActual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lerpColor</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">colorFinal</span><span class="p">,</span><span class="w"> </span><span class="n">percentColor</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccioAire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">().</span><span class="na">mult</span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">gravetat</span><span class="p">);</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">percentColor</span><span class="p">;</span><span class="w">   </span><span class="c1">// Percentatge de modulació del color inicial al final</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">angleDeGir</span><span class="p">;</span><span class="w">     </span><span class="c1">// Angle necessari per poder simular la rotació sobre l'eix Z</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">velAngular</span><span class="p">;</span><span class="w">     </span><span class="c1">// Velocitat angular a la que està rodant la roca</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">sentitRellotge</span><span class="p">;</span><span class="w"> </span><span class="c1">// Sentit de gir: true significa en sentit de les agulles del rellotge</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Roca</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span><span class="mi">175</span><span class="p">,</span><span class="mi">175</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="w">            </span><span class="n">velAngular</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.20</span><span class="p">);</span><span class="w">    </span><span class="c1">// Inicialitzem la velocitat angular (giratòria) de la roca de forma aleatòria.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">calculaAngleGir</span><span class="w"> </span><span class="p">();</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaParada</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">pushMatrix</span><span class="p">();</span>
<span class="w">                </span><span class="n">translate</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">);</span>
<span class="w">                </span><span class="n">rotate</span><span class="p">(</span><span class="n">angleDeGir</span><span class="p">);</span>
<span class="w">                </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">);</span>
<span class="w">                </span><span class="n">rect</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="n">popMatrix</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="n">lifeSpan</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">rect</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaParada</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccioAire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">().</span><span class="na">mult</span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">gravetat</span><span class="p">);</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="w">  </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span>
<span class="w">                </span><span class="n">rebota</span><span class="p">();</span><span class="w">   </span>
<span class="w">            </span>
<span class="w">            </span><span class="n">actualitzaColor</span><span class="w"> </span><span class="p">();</span><span class="w"> </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">rebota</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">);</span>
<span class="w">            </span><span class="n">velAngular</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
<span class="w">            </span><span class="n">sentitRellotge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">sentitRellotge</span><span class="p">;</span><span class="w">  </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">calculaAngleGir</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sentitRellotge</span><span class="p">)</span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">velAngular</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">velAngular</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">TWO_PI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"> </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzaColor</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentColor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                </span><span class="n">percentColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">0.01</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">colorActual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lerpColor</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">colorFinal</span><span class="p">,</span><span class="w"> </span><span class="n">percentColor</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details class="question">
<summary>Activitat 703. Constructors de classe</summary>
<p>Implementa els constructors de les classes que has dissenyat per al teu projecte dels Escacs.</p>
</details>
<h3 id="sobrecarrega-i-sobreescriptura-de-metodes">Sobrecàrrega i sobreescriptura de mètodes</h3>
<p>La <strong>sobrecàrrega</strong> de mètodes és la creació de diversos mètodes amb el mateix nom però amb diferent llista de tipus de paràmetres o de funcionalitat. Java diferencia entre els mètodes sobrecarregats en base al número i tipus de paràmetres o arguments que té el mètode i no pel tipus que retorna.</p>
<p>D'aquesta forma una classe derivada pot redefinir un mètode de la classe base amb el mateix nom però una llista diferent d’arguments </p>
<p>Un exemple de sobrecàrrega al codi del nostre projecte de volcà és quan definim diversos constructors per a una mateixa classe. Tenen el mateix identificador però el nombre de paràmetres canvia d'un a l'altre.</p>
<p>Si pel contrari tenim un mateix mètode amb el mateix nom i la mateixa signatura (els mateixos paràmetres) el que estem fent es <strong>sobreescriure</strong> (override) i no sobrecarregar (overloading) que bàsicament consisteix en canviar la signatura (els paràmetres). Imagina que la nostra subclasse <strong>fum</strong> en el seu mètode <strong>update</strong> fa el mateix que la resta de piroclasts però a banda va augmentant el seu diametre. Estariem en un cas de sobreescriptura de mètodes a la classe derivada i el codi quedaria així:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">super</span><span class="p">.</span><span class="na">update</span><span class="p">();</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="conversio-entre-subclasse-i-superclasse">Conversió entre subclasse i superclasse</h3>
<p>De vegades en programació hem de poder convertir entre tipus de dades, aquest mecanisme s’anomena també «cast». Per exemple si tenim un double amb valor 6,8 i volem convertir-lo en un moment determinat de la nostra aplicació a un int, ho fariem de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">d</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Entre objectes també existeix la possibilitat de aplicar aquest mecanisme. Al nostre model de piroclasts, ens podríem trobar amb la següent situació:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">();</span>
<span class="n">Fum</span><span class="w"> </span><span class="n">fum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Fum</span><span class="w"> </span><span class="p">();</span>
<span class="n">Roca</span><span class="w"> </span><span class="n">roca</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Roca</span><span class="w"> </span><span class="p">();</span>

<span class="n">piro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fum</span><span class="p">;</span><span class="w">  </span><span class="c1">// Conversió automàtica</span>
<span class="n">piro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roca</span><span class="p">;</span><span class="w">  </span><span class="c1">// Conversió automàtica</span>
</code></pre></div></td></tr></table></div>
<h3 id="classes-no-derivables-atribut-final">Classes no derivables: atribut final</h3>
<p>Si volem que alguna classe en concret no siga ja més derivable, és a dir, que no volem que es creen més subclasses a partir d’una classe concreta, ho indiquem utilitzant la paraula reservada «final»</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fum</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Fum</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">}</span><span class="w"> </span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="polimorfisme">Polimorfisme</h2>
<p>El polimorfisme (del Grec πολύς, polys, "molt, molts" i μορφή, morphē, "forma, figura") és una característica d'alguns llenguatges de programació que tenen la propietat d'enviar missatges sintàcticament iguals als objectes de diferents tipus. L'únic requisit que han de complir els objectes que s'utilitzen de manera polimòrfica és saber respondre al missatge que se'ls hi envia, en altres paraules, les classes han de tindre implementats els mètodes amb els que se'ls envia el missatge.</p>
<p>El polimorfisme permet fer referència a altres objectes de classes mitjançant el mateix element de programa i realitzar la mateixa operació de diferents maneres d’acord amb l’objectes al qual es fa referència en cada moment.</p>
<h3 id="lligadura">Lligadura</h3>
<p>El terme lligadura es correspon a l’enllaç que es produeix entre un objecte o instància d’una classe i les seues propietats. Si aquestes propietats són atributs, la lligadura és refereix a la connexió entre l’atribut i la referència a memòria on es trobaria el valor de l’atribut en qüestió mentre que si estem parlant de mètodes, la lligadura és refereix a la connexió entre el nom del mètode que es pretén executar i el codi que executaria.</p>
<p>Per un altre costat, el temps de lligadura és el moment en el que l’atribut s’associa amb el seu valor o que un mètode s’agrupa amb el seu codi corresponent. Aquest temps de lligadura pot ser ‘estàtic’ o ‘dinàmic’. El primer es produeix durant la compilació del programa mentre que la segona es produeix en temps d’execució.</p>
<p>La majoria de llenguatges de programació com C utilitzen la lligadura estàtica en temps de compilació mitjançant l’enllaçador, pel contrari els llenguatges de programació que utilitzen lligadura dinàmica, no determinen quin és el codi que s’executarà en la crida al mètode fins que arriba el moment en temps d’execució i és només en eixe cas en el que es determinarà de totes les possibilitats de codi a executar (polimorfisme) quin és el que s’enllaçarà o lligarà (lligadura efectiva).</p>
<p>Java és un llenguatge orientat a objectes que utilitza la lligadura dinàmica en temps d’execució amb l’excepció dels mètodes static o final que utilitzen lligadura estàtica.</p>
<h3 id="classes-i-metodes-abstractes">Classes i mètodes abstractes</h3>
<p>Les classes i mètodes abstractes són un «fenomen» que es dona en algunes de les generalitzacions que ens apareixen quan analitzem una realitat des del punt de vista de la programació orientada a objectes. És a dir, l’abstracció com a tècnica en POO només es pot donar en l’herència entre classes, concretament a les classes més altes de la jerarquia.</p>
<p>Una classe abstracta és aquella de la qual mai s’instanciarà cap objecte. Per exemple Piroclast al nostre volcano on o s’instancia una roca, una lava o fum però mai un piroclast com a tal.</p>
<p>A nivell de codi l’únic canvi que es produeix és que a la classe general «Piroclast» se li afegeix la paraula reservada abstract com a modificador de comportament de la classe.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">nomClasse</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Normalment els mètodes d’una classe abstracta també seran abstractes.</p>
<p>Una classe abstracta sol ser aquella que no existeix com a tal en la realitat que volem modelar. Al nostre exemple de volcà, el piroclast podria ser implementat com una classe abstracta ja que en el nostre sistema de particules, mai instanciarem un objecte piroclast. Bé instanciarem un objecte Fum, Lava o Roca, però mai un objecte Piroclast.</p>
<p><strong>Mètodes Abstractes</strong>
Un mètode abstracte és un mètode que defineix un comportament o funcionalitat concreta però no especifica la seua implementació i ha de ser la classe filla la que implemente el mètode. En altres paraules, a la classe pare o superclasse podem tindre mètodes abstractes sempre i quan no tinguen codi.</p>
<p>La implementació de mètodes abstractes per part de les classes filles en una jerarquia utilitzen la lligadura dinàmica ja que no es possible determinar el codi que s’ha d’executar en temps de compilació.</p>
<h3 id="us-del-polimorfisme">Ús del polimorfisme</h3>
<p>Arribats a aquest punt podem treure les  següents conclusions: que el polimorfisme ens permet que diferents objectes responguen de manera diferent al mateix missatge (mètode amb el mateix nom) i que aquesta diferenciació de quin codi executar ho fa el compilador amb lligadura dinàmica (en temps d’execució i no de compilació) </p>
<p>Per usar el polimorfisme a Java hem de seguir les següents regles:</p>
<ol>
<li>Crear una jerarquia de classes amb les operacions importants definies per els mètodes membre declarades com abstractes a la base.</li>
<li>Les implementacions específiques dels mètodes abstractes s’han de fer a les classes derivades.</li>
<li>Les instàncies d’aquestes classes s’usen mitjançant una referència a la base amb lligadura dinàmica la qual és l’essència del polimorfisme a Java</li>
</ol>
<p>Finalment, en realitat no és necessari declarar abstractes els mètodes a la classe base si després es redefineixen amb la mateixa signatura (nom més paràmetres) a la classe derivada.</p>
<details class="question">
<summary>Activitat 704. Classe fitxa abstracta</summary>
<p>Converteix la classe pare fitxa en una classe abstracta. També has de fer abstractes els mètodes que consideres.</p>
</details>
<h3 id="avantatges-del-polimorfisme">Avantatges del polimorfisme</h3>
<p>El polimorfisme fa el seu sistema més flexible, sense perdre cap dels avantatges de la compilació estàtica de tipus que tenen lloc en temps de compilació; tal és el cas de Java.</p>
<p>Les aplicacions més freqüents del polimorfisme són:
- Especialització de classes derivades. És a dir, especialitzar classes que han estat definits des; per exemple: Quadrat és una especialització de la classe Rectangle perquè qualsevol quadrat és un tipus de rectangle; aquesta classe de polimorfisme augmenta la eficiència de la subclasse, mentre conserva un alt grau de flexibilitat i permet un mitjà uniforme de manejar rectangles i quadrats.
- Estructures de dades heterogenis. De vegades és útil poder manipular conjunts similars dors d'objectes; amb el polimorfisme es poden crear i gestionar fàcilment estructures de dades heterogenis que són fàcils de dissenyar i dibuixar, sense perdre la comprovació de tipus dels elements utilitzats.
- Gestió d'una jerarquia de classes. Són col·leccions de classes altament estructurades
amb relacions d'herència que es poden estendre fàcilment.</p>
<h3 id="metodes-no-derivables-atribut-final">Mètodes no derivables: atribut final</h3>
<p>Al context de l’herència, la paraula reservada final, s’utilitza per protegir la redefinició dels mètodes de la classe base; un mètode que té l’atribut final, no pot tornar a definir-se a la o les classes derivades.</p>
<p>Però veiem com podem aplicar aquestos conceptes al nostre volcà. Per tal d'il·lustrar-ho farem que els diferents tipus de Piroclast es comporten de forma diferent i que tinguen un aspecte diferent. Per un costat el fum ha de poder volar envolar-se amb el vent, la Lava canviarà de color roig a taronja conforme vaja caent i la roca tindrà una forma de requadre i ha d'anar girant sobre l'eix z.</p>
<p>Per tal d'aconseguir-ho, la manera més fàcil és convertir el mètode <strong>display</strong> de la classe Piroclast en <strong>abstract</strong> i després a cada classe filla li escriurem el codi d'acord amb el seu suposat comportament. Haurem de fer el mateix per al mètode <strong>update</strong> ja que el moviment tampoc serà igual per a tots els tipus de Piroclasts. Per tant haurem de substituir el mètode update sobreescrit de la classe fum que haviem fet abans però mantenint el codi anterior al mètode update.</p>
<p>Finalment només ens quedaria afegir el codi necessari als mètodes display i update per tal que el fum vole amb el vent, que la lava canvie gradualment de color i s'esclafe quan arriba a terra que la roca siga un requadre que gira i que rebota a terra fins que perd tota l'energia..</p>
<p>El resultat final seria el següent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:6"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"/><input id="__tabbed_4_2" name="__tabbed_4" type="radio"/><input id="__tabbed_4_3" name="__tabbed_4" type="radio"/><input id="__tabbed_4_4" name="__tabbed_4" type="radio"/><input id="__tabbed_4_5" name="__tabbed_4" type="radio"/><input id="__tabbed_4_6" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="__tabbed_4_1">Main</label><label for="__tabbed_4_2">Piroclast</label><label for="__tabbed_4_3">Crater</label><label for="__tabbed_4_4">Fum</label><label for="__tabbed_4_5">Lava</label><label for="__tabbed_4_6">Roca</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">INTERVAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="n">Crater</span><span class="w"> </span><span class="n">vesuvi</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">);</span>
<span class="w">        </span><span class="n">vesuvi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Crater</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">135</span><span class="p">);</span>
<span class="w">        </span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">vent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">clear</span><span class="w"> </span><span class="p">();</span>
<span class="w">        </span><span class="n">background</span><span class="w"> </span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">haPassatInterval</span><span class="p">())</span><span class="w"> </span>
<span class="w">            </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">creaPiroclast</span><span class="w"> </span><span class="p">();</span>

<span class="w">        </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">display</span><span class="w"> </span><span class="p">();</span>
<span class="w">        </span><span class="n">vesuvi</span><span class="p">.</span><span class="na">run</span><span class="w">     </span><span class="p">();</span><span class="w">        </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">haPassatInterval</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">INTERVAL</span><span class="o">*</span><span class="n">vesuvi</span><span class="p">.</span><span class="na">getTotalPiroclasts</span><span class="p">())</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">INTERVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">velocitat</span><span class="p">;</span><span class="w">     </span><span class="c1">// Magnitud en metres per segon</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span><span class="w">     </span><span class="c1">// Grandària del piroclast en píxels</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">lifeSpan</span><span class="p">;</span><span class="w">      </span><span class="c1">// Temps de vida que li queda en frames</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorInicial</span><span class="p">;</span><span class="w">  </span><span class="c1">// Color base o inicial del piroclast</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorActual</span><span class="p">;</span><span class="w">   </span><span class="c1">// Color amb el que el piroclast està pintat</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">colorFinal</span><span class="p">;</span><span class="w">    </span><span class="c1">// Color al qual va el piroclast conforme es gela</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span><span class="w">       </span><span class="c1">// Vector de posició del piroclast</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span><span class="w">      </span><span class="c1">// Vector de direcció (en realitat velocitat vectorial)</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">alturaTerra</span><span class="p">;</span><span class="w">   </span><span class="c1">// Punt de l'eix de les y on ha de tocar terra la roca i rebotar</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Piroclast</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tam</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">colIni</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">colFin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">tam</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorInicial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colIni</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorActual</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">colIni</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">colorFinal</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">colFin</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="na">copy</span><span class="p">();</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alturaTerra</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="p">(</span><span class="mi">210</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="p">);</span><span class="w">     </span><span class="c1">// Inicialitzem el punt y on es simulara que el piroclast xocarà</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">mult</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w">    </span><span class="nf">display</span><span class="w"> </span><span class="p">();</span><span class="w">       </span><span class="c1">// Mostra la boleta a la posició actual en la que es troba</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w">    </span><span class="nf">update</span><span class="w">  </span><span class="p">();</span><span class="w">       </span><span class="c1">// Actualitza la posició del piroclast en base al nostre enunciat</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">quedaVida</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaTocantTerra</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">alturaTerra</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alturaTerra</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">estaParada</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">alturaTerra</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">mag</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w">    </span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Crater</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">       </span><span class="n">ample</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Base del volcà en píxels</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w">       </span><span class="n">alt</span><span class="p">;</span><span class="w">                        </span><span class="c1">// Alt del volcà en píxels</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">color</span><span class="w">     </span><span class="n">col</span><span class="p">;</span><span class="w">                        </span><span class="c1">// Color del volcà</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">PVector</span><span class="w">   </span><span class="n">posicio</span><span class="p">;</span><span class="w">                    </span><span class="c1">// Posició en la que es troba el volcà que també posiciona el cràter</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">ArrayList</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Piroclast</span><span class="o">&gt;</span><span class="w"> </span><span class="n">alPiroclasts</span><span class="p">;</span><span class="w">   </span><span class="c1">// Col·lecció de piroclasts que el volcà va expulsant</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Crater</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">ample</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alt</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">col</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Piroclast</span><span class="o">&gt;</span><span class="w"> </span><span class="p">();</span><span class="w">  </span><span class="c1">// Inicialitzem el conjunt de piroclasts a punt de ser expulsats.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fill</span><span class="w">     </span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
<span class="w">            </span><span class="n">stroke</span><span class="w">   </span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">rectMode</span><span class="w"> </span><span class="p">(</span><span class="n">CENTER</span><span class="p">);</span>
<span class="w">            </span><span class="n">triangle</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="o">-</span><span class="p">(</span><span class="n">ample</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="n">alt</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="o">+</span><span class="p">(</span><span class="n">ample</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="o">+</span><span class="n">alt</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">mostraPiroclasts</span><span class="w">     </span><span class="p">();</span>
<span class="w">            </span><span class="n">actualitzaPiroclasts</span><span class="w"> </span><span class="p">();</span>
<span class="w">            </span><span class="n">comprovaMorts</span><span class="w">        </span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">creaPiroclast</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Fum</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Fum</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">            </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Lava</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Lava</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">                </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">l</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Roca</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Roca</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">                </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">Fum</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Fum</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">);</span>
<span class="w">            </span><span class="n">alPiroclasts</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">f2</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mostraPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">)</span>
<span class="w">            </span><span class="n">piro</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzaPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">)</span><span class="w"> </span>
<span class="w">            </span><span class="n">piro</span><span class="p">.</span><span class="na">update</span><span class="p">();</span><span class="w"> </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">comprovaMorts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Piroclast</span><span class="w"> </span><span class="n">piro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">piro</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">piro</span><span class="p">.</span><span class="na">quedaVida</span><span class="p">())</span><span class="w">   </span><span class="c1">// Esborrem els que ja se'ls haja acabada la vida (lifeSpan) </span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">piro</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getTotalPiroclasts</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">alPiroclasts</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fum</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dissipacio</span><span class="p">;</span><span class="w">  </span><span class="c1">// Valor que determina la velocitat (píxels) a la que es dissipa el fum</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expansio</span><span class="p">;</span><span class="w">   </span><span class="c1">// Valor que determina la velocitat (píxels) amb la que s'expandeix el fum</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Fum</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">170</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">),</span><span class="w"> </span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.1</span><span class="p">));</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">dissipacio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">expansio</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">190</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">color</span><span class="w"> </span><span class="n">pinta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">pinta</span><span class="p">);</span>
<span class="w">            </span><span class="n">circle</span><span class="w"> </span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">vent</span><span class="p">);</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">posicio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frameCount</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">grandaria</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">expansio</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">lifeSpan</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">dissipacio</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">percentColor</span><span class="p">;</span><span class="w">   </span><span class="c1">// Percentatge de modulació del color inicial al final</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Lava</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">18</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fill</span><span class="p">(</span><span class="n">colorActual</span><span class="p">);</span>
<span class="w">            </span><span class="n">circle</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">lifeSpan</span><span class="w"> </span><span class="o">--</span><span class="p">;</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">ellipse</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">grandaria</span><span class="o">/</span><span class="mi">3</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentColor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">            </span><span class="n">percentColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">0.003</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">colorActual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lerpColor</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">colorFinal</span><span class="p">,</span><span class="w"> </span><span class="n">percentColor</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccioAire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">().</span><span class="na">mult</span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">gravetat</span><span class="p">);</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">percentColor</span><span class="p">;</span><span class="w">   </span><span class="c1">// Percentatge de modulació del color inicial al final</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">angleDeGir</span><span class="p">;</span><span class="w">     </span><span class="c1">// Angle necessari per poder simular la rotació sobre l'eix Z</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w">   </span><span class="n">velAngular</span><span class="p">;</span><span class="w">     </span><span class="c1">// Velocitat angular a la que està rodant la roca</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">sentitRellotge</span><span class="p">;</span><span class="w"> </span><span class="c1">// Sentit de gir: true significa en sentit de les agulles del rellotge</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">Roca</span><span class="w"> </span><span class="p">(</span><span class="n">PVector</span><span class="w"> </span><span class="n">posCrater</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">super</span><span class="w"> </span><span class="p">(</span><span class="n">posCrater</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span><span class="mi">175</span><span class="p">,</span><span class="mi">175</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="w">            </span><span class="n">velAngular</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.20</span><span class="p">);</span><span class="w">    </span><span class="c1">// Inicialitzem la velocitat angular (giratòria) de la roca de forma aleatòria.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">calculaAngleGir</span><span class="w"> </span><span class="p">();</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaParada</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">pushMatrix</span><span class="p">();</span>
<span class="w">                </span><span class="n">translate</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">);</span>
<span class="w">                </span><span class="n">rotate</span><span class="p">(</span><span class="n">angleDeGir</span><span class="p">);</span>
<span class="w">                </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">);</span>
<span class="w">                </span><span class="n">rect</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="n">popMatrix</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">noStroke</span><span class="p">();</span>
<span class="w">            </span><span class="n">lifeSpan</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">            </span><span class="n">fill</span><span class="w"> </span><span class="p">(</span><span class="n">colorActual</span><span class="p">,</span><span class="w"> </span><span class="n">lifeSpan</span><span class="p">);</span>
<span class="w">            </span><span class="n">rect</span><span class="p">(</span><span class="n">posicio</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">posicio</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">,</span><span class="w"> </span><span class="n">grandaria</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">estaParada</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccioAire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direccio</span><span class="p">.</span><span class="na">copy</span><span class="p">().</span><span class="na">mult</span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">friccioAire</span><span class="p">);</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">add</span><span class="w"> </span><span class="p">(</span><span class="n">Fisiques2D</span><span class="p">.</span><span class="na">gravetat</span><span class="p">);</span>
<span class="w">            </span><span class="n">posicio</span><span class="p">.</span><span class="na">add</span><span class="w">  </span><span class="p">(</span><span class="n">direccio</span><span class="p">);</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">estaTocantTerra</span><span class="p">())</span><span class="w"> </span>
<span class="w">                </span><span class="n">rebota</span><span class="p">();</span><span class="w">   </span>
<span class="w">            </span>
<span class="w">            </span><span class="n">actualitzaColor</span><span class="w"> </span><span class="p">();</span><span class="w"> </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">rebota</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">direccio</span><span class="p">.</span><span class="na">mult</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">);</span>
<span class="w">            </span><span class="n">velAngular</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
<span class="w">            </span><span class="n">sentitRellotge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">sentitRellotge</span><span class="p">;</span><span class="w">  </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">calculaAngleGir</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sentitRellotge</span><span class="p">)</span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">velAngular</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">velAngular</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">TWO_PI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">                </span><span class="n">angleDeGir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"> </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">actualitzaColor</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentColor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                </span><span class="n">percentColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">0.01</span><span class="p">;</span>
<span class="w">            </span>
<span class="w">            </span><span class="n">colorActual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lerpColor</span><span class="p">(</span><span class="n">colorInicial</span><span class="p">,</span><span class="w"> </span><span class="n">colorFinal</span><span class="p">,</span><span class="w"> </span><span class="n">percentColor</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details class="question">
<summary>Activitat 705. Polimorfisme</summary>
<p>Modifica els mètodes de les classes derivades per tal d'aconseguir que les fitxes es moguen de forma diferent i tinguen una aparença distinta entre elles.</p>
</details>
<h2 id="interficies">Interfícies</h2>
<p>Una interfície en Java, és sintàcticament similar a una classe abstracta, en la qual pot especificar un o més mètodes que no tenen cos. Aquests mètodes han de ser implementats per una classe perquè es defineixen les seues accions.</p>
<p>Per tant, una interfície especifica què s'ha de fer, però no com fer-ho. Una vegada que es defineix una interfície, qualsevol quantitat de classes pot implementar-la. A més, una classe pot implementar qualsevol quantitat d'interfícies.</p>
<p>Per implementar una interfície, una classe ha de proporcionar cossos (implementacions) per als mètodes descrits per la interfície. Cada classe és lliure de determinar els detalls de la seva pròpia implementació. Dues classes poden implementar la mateixa interfície de diferents maneres, però cada classe encara admet el mateix conjunt de mètodes. Per tant, el codi que té. Herència, polimorfisme i Interfícies coneixement de la interfície pot usar objectes de qualsevol classe, ja que la interfície amb aquests objectes és la mateixa.</p>
<h3 id="implementacio-duna-interficie">Implementació d'una interfície</h3>
<p>La interfície especifica el comportament comú que tenen un conjunt de dades el qual es realitza en cadascuna d’elles i es coneix també com a implementació d’una interfície. La sintaxis és similar a la derivació o extensió d’una classe amb la paraula reservada implements en llo d’extends.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Class</span><span class="w"> </span><span class="n">nomClasse</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">nomInterficie</span><span class="w"> </span><span class="p">{</span>
<span class="c1">// definició d’atributs</span>
<span class="c1">// implementació dels mètodes de la classe</span>
<span class="c1">// implementació dels mètodes de la interfícies</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
La classe que implementa la interfície ha d’especificar el codi (la implementació) de cadascun dels mètodes, en cas de no fer-ho, la classe es. Herència, polimorfisme i Interfícies converteix en abstracta i com a tal s’ha de declarar. És a dir, si una classe implementa una interfície, està obligada a implementar tots els seus mètodes.</p>
<p>Per tal d’il·lustrar amb un exemple sobre una interfície, utilitzarem un comandament a distància de qualsevol dispositiu electrònic. Es suposa que des d’un comandament a distància podrem: encendre i apagar el dispositiu, pujar i baixar el volum, silenciar etc..</p>
<p>La nostra interfície creada amb Java podria ser com la següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Comandament</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">engegar</span><span class="w"> </span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">apagar</span><span class="w"> </span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujarVolum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixarVolum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">decrement</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">silenciar</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Els mètodes declarats ací a la interfície Comandament deurien ser auto-explicatoris. Hem inclòs només unes poques de les múltiples accions que es poden realitzar amb un comandament a distància d’un dispositiu electrònic i encara se li podrien afegir algunes més ben segur. </p>
<p>No hi ha definició de cap dels mètodes ací, Els mètodes declarats en una interfície són sempre abstractes i sempre públics per defecte. Ara qualsevol classe que necessite de l’ús de la funcionalitat proveïda per Comandament només ha de declarar que implementa la interficie a més a més de definir cadascun dels mètodes que la formen. </p>
<p>Posem per exemple una televisió, el codi Java seria el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TV</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">comandament</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">engegar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codi necessari per engegar la televisió</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">apagar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codi necessari per apagar la televisió</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujaVolum</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codi necessari per incrementar el volum en increment</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixaVolum</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codi necessari per disminuir el volum en increment</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">silenciar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codi necessari per silenciar la televisió</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="jerarquia-dinterficies">Jerarquia d'interfícies</h3>
<p>Les interfícies també es poden organitzar de forma jerarquica de manera que els mètodes siguen heretats</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">interficie</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">interficie2</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">interficie3</span><span class="p">...</span>
</code></pre></div></td></tr></table></div>
<h3 id="herencia-de-classes-i-implementacio-dinterficies">Herència de classes i implementació d'interfícies</h3>
<p>es interfícies no són classes ja que especifiquen un comportament mitjançant mètodes per la classe que els implemente; per això, una classe pot heretar de la seua classe base i al mateix temps implementar una interfície. Per exemple si tenim una classe base anomenada Electrodomèstic de la qual hereten una sèrie de classes com podrien ser: Televisió, DVD, Microones, Forn, Nevera etc..i a més a més també disposem d’una interfície Comandament,  podríem crear una aplicació en la que la televisió herete de la classe general electrodomèstic i a banda implemente la interfície comandament com hem vist abans.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Televisio</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Electrodomestic</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">comandament</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="classes-internes">Classes internes</h3>
<p>Una classe interna és una classe que es declara dintre d’una altra classe.</p>
<canvas data-processing-sources="assets/Tema8/jocDomino.pde"></canvas>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.b4d07000.min.js"></script>
<script src="../js/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script "="" src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.0/processing.min.js"></script>
<script>mermaid.initialize({
    theme: "forest"
});</script></body>
</html>